<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ูุนุจุฉ ุงููุนุฏุฉ - ุงููุณุฎุฉ ุงููุณุชูุฑุฉ V23</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { font-family: 'Cairo', sans-serif; touch-action: manipulation; -webkit-tap-highlight-color: transparent; }
        body {
            background-color: #f8f9fa;
            background-image: radial-gradient(#cbd5e1 1.5px, transparent 1.5px), radial-gradient(#cbd5e1 1.5px, #f8f9fa 1.5px);
            background-size: 24px 24px;
            background-position: 0 0, 12px 12px;
            overscroll-behavior: none;
            user-select: none;
        }
        .animate-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-pulse { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .rotate-90-text { transform: rotate(90deg); white-space: nowrap; }
        .bomb-pulse { animation: bomb 0.5s infinite; }
        @keyframes bomb { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body>
    <div id="app" class="min-h-screen">
        <div class="max-w-md mx-auto min-h-screen shadow-2xl bg-white/95 backdrop-blur-sm relative overflow-hidden border-x-2 border-slate-100 flex flex-col">
            <div class="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-rose-500 via-amber-400 to-indigo-500 z-50"></div>
            
            <!-- Global Controls -->
            <div class="absolute top-4 left-4 z-50 flex flex-col gap-2">
                <button onclick="toggleMute()" id="muteBtn" class="p-2 bg-white rounded-full shadow-md text-slate-600 hover:bg-slate-50 transition">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
                </button>
                <button onclick="goHome()" class="p-2 bg-white rounded-full shadow-md text-slate-600 hover:bg-slate-50 transition">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                </button>
            </div>

            <div id="screen-container" class="flex-1 flex flex-col h-full overflow-hidden"></div>
        </div>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let gameInterval = null; 

        // ===== STATE =====
        let state = {
            screen: 'home',
            isMuted: false,
            daresEnabled: false,
            teamMode: false, // ูุถุน ุงููุฑู
            teamsSetupTab: 'A', // ุงูุชุจููุจ ุงููุดุท ูู ุฅุนุฏุงุฏ ุงููุฑู
            players: [
                { id: 1, name: 'ุงููุงุนุจ ูก', score: 0 },
                { id: 2, name: 'ุงููุงุนุจ ูข', score: 0 },
                { id: 3, name: 'ุงููุงุนุจ ูฃ', score: 0 }
            ],
            teams: [
                { id: 'A', name: 'ูุฑูู ุฃ', score: 0, color: 'text-rose-600', members: [] },
                { id: 'B', name: 'ูุฑูู ุจ', score: 0, color: 'text-indigo-600', members: [] }
            ],
            turnQueue: [], // For fair distribution
            currentGame: null
        };

        // ===== DATA LIBRARIES =====
        const DARES_LIST = ["ุงุฑูุต ุจูุฏู 30 ุซุงููุฉ", "ุงุนูู 10 ุถุบุท", "ุงุชููู ุฎููุฌู ููุฏูุฑ ุงูุฌุงู", "ุงูุชุจ ุจูุณุช ูุญุฑุฌ", "ุงุนุฒู ุงููู ุนูู ุญุงุฌุฉ", "ุบูู ูุนูุฑู ุฏูุงุจ ุนุงูู", "ููู ููุชุฉ ุจุงูุฎุฉ", "ุงูุดู ูุดูุฉ ุงูุจุทุฑูู", "ุงุนูู ุตูุช ูุฑุฎุฉ", "ุณูุจ ุชูููููู ููุชูุญ ุฏูููุชูู ูุน ุงููู ุฌูุจู"];

        const SPY_CATEGORIES = {
            'ุฃูุงูู ุฎุฑูุฌ': ["ุณูุชู ุณุชุงุฑุฒ", "ููู ุงูุนุฑุจ", "ูุงูุฑู ููุณุชููุงู", "ููุดู ุฃูู ูุตุฑ", "ุญุฏููุฉ ุงูุฃุฒูุฑ", "ุจุฑุฌ ุงููุงูุฑุฉ", "ุงูุฃูุฑุงูุงุช", "ุงูุญุณูู", "ุงููุนุฒ", "ูุณุท ุงูุจูุฏ", "ุฏุฑูู ุจุงุฑู", "ุฒูุฏ ุจุงุฑู", "ุงูุณุงุญู ุงูุดุฑูุฑ", "ุฏูุจ", "ุงูุฌููุฉ", "ุงูููุทู"],
            'ุฃููุงุช': ["ูุดุฑู", "ูุงูุฏููุงูุฏุฒ", "ููุชุงูู", "ุจุงุฒููุง", "ุญุถุฑููุช", "ุตุจุญู ูุงุจุฑ", "ุงูุจุฑูุณ", "ุงููุงููู", "ุงูุนุจุฏ", "ุฅูุชูุงู", "ุจูุจุณู", "ุดูุจุณู", "ุฅูุฏููู", "ุดุงูุฑูุง", "ุญูุงูุดู", "ูุณูุฎ", "ุณูุดู", "ุณููุงุจูู", "ูุงูู"],
            'ุชูููููุฌูุง': ["ููุณุจูู", "ูุงุชุณุงุจ", "ุงูุณุชุฌุฑุงู", "ุชูู ุชูู", "ุชููุชุฑ", "ููุชููุจ", "ุทูุจุงุช", "ุฃูุจุฑ", "ุฅู ุฏุฑุงูู", "ุงูุณุชุงุจุงู", "ุฒููู", "ุจุจุฌู", "ูุงูุฏู ูุฑุงุด"],
            'ููุงุตูุงุช': ["ุงููุชุฑู", "ุงููููุฑูุจุงุต", "ุงูุชููุชูู", "ุงูุชุงูุณู", "ุฃูุจุฑ", "ุงูุทุฑูุงู", "ุงููุทุฑ", "ุงูุทูุงุฑุฉ", "ุงูุนุจุงุฑุฉ", "ุงูุณููุชุฑ", "ุงูุนุฌูุฉ", "ุงูููููุฑูู"],
            'ููู': ["ููุชููุจุฑ", "ุงูููููุณุฑ", "ููุชูุฌุฑุงูุฑ", "ุฏูููุฑู", "ููู ุณูุชุฑ", "ุจุฑูุฌุฑุงูุฑ", "ูุงุจุชู ุฃูุจุฑ", "ููุฏูู", "ูููุจ ุฃุฑุชูุณุช", "ุฌููุฑ", "ุจููุฌุฑ"]
        };

        const CHARADES_DATA = {
            'ุฃููุงู ููููุฏู': ["ุงูููุจู", "ุนุณู ุฃุณูุฏ", "ุฅูุณ ูุงุฑุฌ", "ุบุจู ููู ููู", "ููู ุงูุตูู ุงูุนุธูู", "ุทูุฑ ุฅูุช", "ูุง ุชุฑุงุฌุน ููุง ุงุณุชุณูุงู", "ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงูุซุฉ", "ุจูู ุงูุญุธ", "ูุด ุฅุฌุฑุงู", "ูุฏู ุฑุถุง", "ูุทุจ ุตูุงุนู", "ุธุฑู ุทุงุฑู", "ุจูุจู ุญูุฑุงู", "ุณููุฑ ูุดููุฑ ูุจููุฑ", "ุงููุงุธุฑ", "ุฌุงุกูุง ุงูุจูุงู ุงูุชุงูู", "ุฃุจู ุนูู", "ุฒูู ุดุงู", "ุจูุดูุงุด", "ูุฑูุฑ", "ูุฑุฌุงู ุฃุญูุฏ ูุฑุฌุงู", "ุฅุชุด ุฏุจูุฑ"],
            'ุฃูุดู': ["ุงูููู ุงูุฃุฒุฑู", "ููุงุฏ ุฑุฒู", "ุฅุจุฑุงููู ุงูุฃุจูุถ", "ุงูุฌุฒูุฑุฉ", "ุชูุชู", "ุงููุตูุญุฉ", "ููุฑุฉ ูุงูุฌู", "ุงูุฎููุฉ", "ููุงูู ุฅุณููุฏุฑูุฉ", "ุฃุณู ุนูู ุงูุฅุฒุนุงุฌ", "ุนูุงุฑุฉ ูุนููุจูุงู", "ุณูุฑ ุงูููุงูู", "ูุงุญุฏ ูู ุงููุงุณ", "ุฎุงุฑุฌ ุนู ุงููุงููู", "ุญูู ููุณุฑุฉ", "ุงููุฑุญ", "ูุจุงุฑูู", "ุชุฑุงุจ ุงููุงุณ"],
            'ูุณูุณูุงุช': ["ุงูุงุฎุชูุงุฑ", "ุงููุจูุฑ ุฃูู", "ุจู 100 ูุด", "ุฌุนูุฑ ุงูุนูุฏุฉ", "ุณูุงุญ ุงูุฌูุฒุฉ", "ูุง ูุฑุงุก ุงูุทุจูุนุฉ", "ููุถูุน ุนุงุฆูู", "ุงููุนุจุฉ", "ูู ุจูุชูุง ุฑูุจูุช", "ุงููุฏุงุญ", "ูุณู ุงูุฃุบุฑุงุจ", "ุงูุจุฑูุณ", "ุงูุฃุณุทูุฑุฉ", "ููููู ูุดุฑููุงู", "ุฑูุญ ุงููุฏุงู", "ุงููุตูุฉ", "ุณุงุจุน ุฌุงุฑ", "ุฃุจู ุงูุนุฑูุณุฉ", "ุจุงูุทู"],
            'ุดุฎุตูุงุช': ["ูุญูุฏ ุตูุงุญ", "ุจูุฌ ุฑุงูู", "ููุฌุฒ", "ุญูู ุจููุง", "ูุงุณููู ุนุฒ", "ุฑุถูู ุงูุดุฑุจููู", "ุดูุฑูู ุนุจุฏ ุงูููุงุจ", "ูุญูุฏ ุฑูุถุงู", "ุชุงูุฑ ุญุณูู", "ุนูุฑู ุฏูุงุจ", "ุฃุญูุฏ ุญููู", "ููู ุฒูู", "ุนุงุฏู ุฅูุงู", "ุญุณู ุดุงููุด", "ูุฑูุงู ุจุงุจูู", "ุฃุจู ุงูููู", "ุงูููููุงุก", "ูุชุฑู ุงูุฃููุงู"]
        };

        const QUOTES_DATA = [
            { "quote": "ุงุนูู ููุณู ููุช ุงุนูู ููุณู ููุช", "work": "ุงููุงุธุฑ", "actor": "ุนูุงุก ููู ุงูุฏูู" },
            { "quote": "ุงูุชู ูุงุจุณู ุงูุจูุทููู ููุง", "work": "ุงูููุจู", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ุงูุชู ุจุชุชูููู ูุฏู ููู ูุง ูุฑู", "work": "ุงูุงููุงูู", "actor": "ูุญูุฏ ุฑูุถุงู" },
            { "quote": "ุงูุช ููู ุฏูุง ูุงูุจุช ุนููู ุฎุฑุงุจุงุช ูุตุฑ ูููุง", "work": "ุงูุงููุงูู", "actor": "ูุญูุฏ ุฑูุถุงู" },
            { "quote": "ูู ุญูู ูุญุฏุฏ ุนุงูุฒุงูู ุงุญูู ุจููุ", "work": "ุชูุชุฉ ุฑููุจุฉ", "actor": "ูุญูุฏ ูููุฏู" },
            { "quote": "ูุงุดุฑุจุด ุนูุฏู ุจุฑุชูุงู ..", "work": "ุงููุฑููุทู", "actor": "ุฃุญูุฏ ุขุฏู" },
            { "quote": "ูุด ุฃูุง ุนูุฏ ูููุงุฏู ุงูููุฑุฏุฉ", "work": "ุงูุชุฌุฑุจุฉ ุงูุฏููุงุฑููุฉ", "actor": "ุนุงุฏู ุฅูุงู" },
            { "quote": "ูู ุชุงููู ุงุนุฏุงุฏู ุงู ุชุงูุชู ุงุนุฏุงุฏู ูู ุงูุฑููุฌ ุฏู", "work": "ูุด ุฅุฌุฑุงู", "actor": "ูุญูุฏ ูููุฏู" },
            { "quote": "ููุง ุจูุฎุทู ุจูุงุช ูู ุซุงููู.. ุจุชุนูู ูููู ุงููุ .. ุจูุฑุฌุนูู ุฅุนุฏุงุฏู", "work": "ูุด ุฅุฌุฑุงู", "actor": "ูุญูุฏ ูููุฏู" },
            { "quote": "ุนุงูุฒู ุชุนููู ุฏุนูู ุชูุฒ ุงูููุงุจุฑ", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ููุณู ุนูุฏ" },
            { "quote": "ุงุนูุฐ ุจุงููู ููู ูุง ุจูุชู ูุฏู ุดุฑุจุงุท ุงูู ุงููุฃู ุฏู", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ููุณู ุนูุฏ" },
            { "quote": "ุฌูู ุฒุญููู.. ุจุทุนู ุงููุงุชุดุจ", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ุฃุญูุฏ ุญููู" },
            { "quote": "ุฃูููู ููู ููุง ุชุฒุนูุด", "work": "ุฃุฎุทุฑ ุฑุฌู ูู ุงูุนุงูู", "actor": "ูุคุงุฏ ุงููููุฏุณ" },
            { "quote": "ุขูุณุฉ ุฒูุฒูุ .. ุขูุณุฉ ููููููู", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ุฃุญูุฏ ุญููู" },
            { "quote": "ุฒูุฑูุง ุงูุฏุฑุฏูุฑู ูุฏุฑุณ ุฑูุงุถูุงุช ููุฑูุณุงูู", "work": "ุงููุงุธุฑ", "actor": "ููุณู ุนูุฏ" },
            { "quote": "ููุงูู ููุงูู ูุตูุช ููููุชุฑ .. ููุช ุดููุช ุฑูุญุชู ูุฏุงุจ", "work": "ุงููุงุธุฑ", "actor": "ููุณู ุนูุฏ ู ุญุณู ุญุณูู" },
            { "quote": "ุงุญุท ูุงู โฆ ุญุท ูกู ุ ูจู ู ุนููู ุนูู ุงูุนุฏุงุฏ ู ุฎููู ูุชูุตู", "work": "ุงููุงุธุฑ", "actor": "ููุณู ุนูุฏ ู ุญุณู ุญุณูู" },
            { "quote": "ุงูุบู ุนูุฏู ููุดูู ูุง ูุทูู", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ุญุณู ุญุณูู" },
            { "quote": "ุฃูุง ูุด ุชุจุน ุญุฏ.. ุฃูุง ุฑุฆูุณ ุฌูููุฑูุฉ ููุณู", "work": "ุฒูู ุดุงู", "actor": "ูุญูุฏ ุดุฑู" },
            { "quote": "ุงูู ุงุณู", "work": "ุนุณูุฑ ูู ุงููุนุณูุฑ", "actor": "ุณูููุงู ุนูุฏ" },
            { "quote": "ุงุฏููู ุจูุณู ุนุดุงู ุชุนุจุงู", "work": "ุนุณูุฑ ูู ุงููุนุณูุฑ", "actor": "ูุญูุฏ ุดุฑู" },
            { "quote": "ูุงุฑุจ ุนุฏู ุงูุณุชูู ุณุจุนูู ุณูู ุฏูู ุนูู ุฎูุฑ", "work": "ุชุชุญ", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุนูู ุญุถุฑุชู ุฌู ูุตุญููู ุนุดุงู ุชูููู ุงุนุฑู ุทุจูุ", "work": "ุชุชุญ", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุฃูู ููู ู ูุดุฑุจ ููู .. ุงุญูุง ุดุบุงููู ุนูุฏ ุงูุชุงุจุนู!", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุฑููุฏ ูุฑููุฏ ูุนูู ูุชุฑูุฏ ูู ููุจ ุงูุฌูู", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุงุงุงุงุง ุฅูุง ูุงูููู ุฏู .. ูุงููู ุฏู ุฃูุง ุนุงุฑููุง ูู ุงูุงููุงู ุงูุงุฌูุจูู", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุด ุฃูุง ุงููู ูุชูุงูู ุฅุฐูุจ ุฅูู ุงูุฌุญูู ูุง ุจูุฑ ุจูู", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" }
        ];

        const FIVE_SECOND_QUESTIONS = [
            { "text": "ุงุฐูุฑ 3 ูุทุฑุจูู ุฑุงุจ ูุตุฑููู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงู ูุฃุญูุฏ ุญููู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงุน ูุญุดู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุญุทุงุช ูุชุฑู ูู ุงูุฎุท ุงูุฃูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃูุงูู ููุฎุฑูุฌ ูู ุงูุฒูุงูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงู ุธูุฑ ูููุง ูุญูุฏ ุฑูุถุงู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุญุงุฌุงุช ููุฌูุฏุฉ ูู ุดูุทุฉ ุงูุฌูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃุณูุงุก ูุณูุณูุงุช ูู ุฑูุถุงู ุงููู ูุงุช", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุญุงุฌุงุช ุจุชุชุญุท ุนูู ุงููุดุฑู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุงุนูุจุฉ ุจููุนุจูุง ูู ุงูููุชุฎุจ ุญุงููุงู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงุน ุนุฑุจูุงุช ููุชุดุฑุฉ ูู ูุตุฑ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูููุงุช ูุจูุฑุฉ ูู ุงููุงูุฑุฉ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุญุงูุธุงุช ูู ุงูุตุนูุฏ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงู ููุฌูุฏุฉ ูู ุนูู ูุตุฑ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุญุงุฌุงุช ุจูุนูููุง ุฃูู ููู ุงูุนูุฏ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃุบุงูู ูุนูุฑู ุฏูุงุจ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูููุงุช ููุชููุจ ูุตุฑูุฉ ูุดููุฑุฉ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงุช ุจุชุชุงูู ูู ุดู ุงููุณูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุดุฎุตูุงุช ูู ูุณูุณู ุงููุจูุฑ ุฃูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุงุฑูุงุช ุดูุจุณู ุฃู ุณูุงูุณ", "answersNeeded": 3 }
        ];

        const BUS_CATEGORIES = [
            { name: 'ุญุงุฌุฉ', items: ['ูุชุงุจ', 'ููู', 'ููุจุงูู', 'ุณุงุนุฉ', 'ููุจุงูุฉ', 'ููุชุงุญ', 'ูุธุงุฑุฉ', 'ุดูุทุฉ', 'ูุญูุธุฉ', 'ุจุทุงููุฉ'] },
            { name: 'ุญููุงู', items: ['ุฃุณุฏ', 'ููู', 'ูุทุฉ', 'ููุจ', 'ุญุตุงู', 'ุฌูู', 'ููุฑ', 'ุฏุจ', 'ุฒุฑุงูุฉ', 'ูุฑุฏ'] },
            { name: 'ูููุฉ', items: ['ุฏูุชูุฑ', 'ูููุฏุณ', 'ูุนูู', 'ูุญุงูู', 'ุทูุงุฑ', 'ุดูู', 'ููุงู', 'ูุงุชุจ', 'ุฑูุงุถู', 'ุตุญูู'] },
            { name: 'ุจูุฏ', items: ['ูุตุฑ', 'ุงูุณุนูุฏูุฉ', 'ุงูุฅูุงุฑุงุช', 'ุชุฑููุง', 'ูุฑูุณุง', 'ุฃูุฑููุง', 'ุฅูุทุงููุง', 'ุงููุงุจุงู', 'ุงููุบุฑุจ', 'ุงูุฃุฑุฏู'] },
            { name: 'ุฃููุฉ', items: ['ูุดุฑู', 'ูุจุฏุฉ', 'ูููุฎูุฉ', 'ูุญุดู', 'ููู', 'ุทุนููุฉ', 'ููุชุฉ', 'ุฏุฌุงุฌ', 'ุณูู', 'ููุฑููุฉ'] },
            { name: 'ูุงููุฉ', items: ['ุชูุงุญ', 'ููุฒ', 'ุจุฑุชูุงู', 'ูุงูุฌู', 'ุนูุจ', 'ูุฑุงููุฉ', 'ุฎูุฎ', 'ููุซุฑู', 'ุจุทูุฎ', 'ุดูุงู'] }
        ];

        const LIAR_CARDS = [
            { topic: "ุนูุฑู ุฏูุงุจ", facts: ["ููุจู ุงููุถุจุฉ", "ูุณุจ ุงููููุฒู ุฃููุฑุฏ 7 ูุฑุงุช", "ุนูู ุฏููุชู ูุน ุจูููุณูู"] },
            { topic: "ูุญูุฏ ุตูุงุญ", facts: ["ูุนุจ ูู ุงูููุงูููู ุงูุนุฑุจ", "ูุฏุงู ูููุฑุจูู ุงูุชุงุฑูุฎู", "ูุนุจ ูู ุงููุงุฏู ุงูุฃููู ุณุงุจูุงู"] },
            { topic: "ููุฑ ุงูููู", facts: ["ุฃุทูู ููุฑ ูู ุงูุนุงูู", "ุจููุฑ ุจู 11 ุฏููุฉ ุฃูุฑูููุฉ", "ููุจุนู ุงูุฃุตูู ุจุญูุฑุฉ ูุงุตุฑ"] },
            { topic: "ุนุงุฏู ุฅูุงู", facts: ["ููุจู ุงูุฒุนูู", "ุนูู ูุณุฑุญูุฉ ูุฏุฑุณุฉ ุงููุดุงุบุจูู", "ูุซู ูููู ุงูุฒูุฌุฉ ุงูุซุงููุฉ"] },
            { topic: "ุงูุฃูุฑุงูุงุช", facts: ["ุฎููู ูุฎูุฑุน ููููุฑุน", "ููุฌูุฏุฉ ูู ุงูุฌูุฒุฉ", "ุจูููุง ูุงุฆูุงุช ูุถุงุฆูุฉ"] },
            { topic: "ุญุณู ุดุงููุด", facts: ["ูุบูู ููุฑุฌุงูุงุช", "ุบูู ุจูุช ุงูุฌูุฑุงู", "ูุงู ูุบูู ูู ุงูุฃูุจุฑุง ุฒูุงู"] },
            { topic: "ุงููุดุฑู", facts: ["ููู ุฑุฒ ูููุฑููุฉ ูุนุฏุณ", "ุฃููุฉ ูุตุฑูุฉ ุดุนุจูุฉ", "ุฃุตูู ุฃููุฉ ุฅูุทุงููุฉ"] },
            { topic: "ุจุฑุฌ ุงููุงูุฑุฉ", facts: ["ุงุชุจูู ูู ุนูุฏ ุฌูุงู ุนุจุฏ ุงููุงุตุฑ", "ุดููู ุนูู ููุฆุฉ ุฒูุฑุฉ ุงูููุชุณ", "ุฃุทูู ูู ุจุฑุฌ ุฎูููุฉ"] },
            { topic: "ุงููุฑุงุนูุฉ", facts: ["ุญูุทูุง ุงูููุชู", "ุจููุง ูุนุจุฏ ุงููุฑูู", "ูุงููุง ุจูุงูููุง ุจูุชุฒุง"] }
        ];

        const AUCTION_CATEGORIES = [
            { name: "ุฃุณูุงุก ูุญุทุงุช ูุชุฑู ุงูุฎุท ุงูุฃูู", maxAnswers: 20 },
            { name: "ุฃุณูุงุก ูุงุนุจู ุงููุงุฏู ุงูุฃููู ุงูุญุงูููู", maxAnswers: 20 },
            { name: "ุฃููุงู ุงูุฒุนูู ุนุงุฏู ุฅูุงู", maxAnswers: 20 },
            { name: "ูุญุงูุธุงุช ุฌูููุฑูุฉ ูุตุฑ ุงูุนุฑุจูุฉ", maxAnswers: 20 },
            { name: "ุฃููุงุน ูุงุฑูุงุช ุณูุงุฑุงุช", maxAnswers: 20 },
            { name: "ุฃุณูุงุก ููุงูู", maxAnswers: 20 },
            { name: "ุฏูู ูุงุฑุฉ ุฃูุฑูููุง", maxAnswers: 20 },
            { name: "ุฃุบุงูู ูุนูุฑู ุฏูุงุจ", maxAnswers: 20 },
            { name: "ุฃููุงุช ูุตุฑูุฉ ุดุนุจูุฉ", maxAnswers: 20 }
        ];

        const GIBBERISH_DATA = [
            { "gibberish": "ุณู ุฏู ุชุด ูุจ ุฏุง", "answer": "ุณุงูุฏูุชุด ูุจุฏุฉ" },
            { "gibberish": "ุจุง ุงู ูู ูู ุงู", "answer": "ุจูููู ุฅูู" },
            { "gibberish": "ูุณ ุงุก ุงู ุฎู ูุฑ", "answer": "ูุณุงุก ุงูุฎูุฑ" },
            { "gibberish": "ูุญ ุดู ูุฑ ูุจ", "answer": "ูุญุดู ูุฑูุจ" },
            { "gibberish": "ุญุง ู ู ุจู ูุง", "answer": "ุญูู ุจููุง" },
            { "gibberish": "ูู ุฌุฒ ุงู ุบู ุงุจ ุง", "answer": "ููุฌุฒ ุงูุบูุงุจุฉ" },
            { "gibberish": "ูุง ู ุฑู ูู ู", "answer": "ูุงูุฑููู" },
            { "gibberish": "ูู ุตู ุฑ ุชุดู ูุฑ ูู ูู", "answer": "ููุตูุฑ ุดููุฑูููู" },
            { "gibberish": "ูู ุจุฑ ู ุงู ุชู ุจุฑ", "answer": "ููุจุฑู ุฃูุชูุจุฑ" },
            { "gibberish": "ุณุง ุญู ุด ุฑู ุฑ", "answer": "ุณุงุญู ุดุฑูุฑ" },
            { "gibberish": "ูู ุจุง ูู ุณุงู ุณูู ุฌ", "answer": "ููุจุงูู ุณุงูุณููุฌ" },
            { "gibberish": "ูุง ุฏู ุงู ุฒู ุงู ู", "answer": "ูุงุฏู ุงูุฒูุงูู" },
            { "gibberish": "ูุง ุฏู ุงู ุงู ูู", "answer": "ูุงุฏู ุงูุฃููู" },
            { "gibberish": "ุงู ุจ ุฑ ู ู ุฑู ู", "answer": "ุฃูุจุฑ ููุฑูู" },
            { "gibberish": "ุทู ุจ ุงุช ุฏ ูู ู ุฑู", "answer": "ุทูุจุงุช ุฏูููุฑู" },
            { "gibberish": "ู ุญ ู ุฏ ุต ู ุงุญ", "answer": "ูุญูุฏ ุตูุงุญ" }
        ];

        const HUM_SONGS = [
            { "song": "ุชุณูู ุงูุฃูุงุฏู", "difficulty": "ุณูู" },
            { "song": "ุจุดุฑุฉ ุฎูุฑ", "difficulty": "ุณูู" },
            { "song": "3 ุฏูุงุช", "difficulty": "ุณูู" },
            { "song": "ุฅูุช ุนูุฑู", "difficulty": "ุตุนุจ" },
            { "song": "ุณุทูุงูุฉ", "difficulty": "ุณูู" },
            { "song": "ูุฎุงุตูุงู", "difficulty": "ูุชูุณุท" },
            { "song": "ุงูุบุฒุงูุฉ ุฑุงููุฉ", "difficulty": "ุณูู" },
            { "song": "ุณุชู ุฃูุง", "difficulty": "ุณูู" },
            { "song": "ุฃู ูู ูุนุจุช ูุง ุฒูุฑ", "difficulty": "ูุชูุณุท" },
            { "song": "ุนูุฏ ุงูุจุทู", "difficulty": "ุณูู" },
            { "song": "ุชููู ูุนุงู", "difficulty": "ูุชูุณุท" },
            { "song": "ุญุจูุจู ูุง ููุฑ ุงูุนูู", "difficulty": "ุตุนุจ" },
            { "song": "ุงูุจุฎุช", "difficulty": "ุตุนุจ" },
            { "song": "ุงูุฏููุง ุฑุจูุน", "difficulty": "ูุชูุณุท" },
            { "song": "ุฃูุง ูููุง ูุจุฑุช ุตุบูุฑ", "difficulty": "ูุชูุณุท" },
            { "song": "ุฃูุงู ูู ุงูุนูุฑ", "difficulty": "ุตุนุจ" },
            { "song": "ุฑุงูุญูู ูุณูุฑ", "difficulty": "ุณูู" },
            { "song": "ูุชุนูููุง", "difficulty": "ูุชูุณุท" },
            { "song": "ููู ุชูุงุช", "difficulty": "ูุชูุณุท" },
            { "song": "ููููููุฑ ููููููุฑ", "difficulty": "ุณูู" },
            { "song": "ุฅุฎูุงุชู", "difficulty": "ุณูู" },
            { "song": "ุดููุงุก", "difficulty": "ุณูู" },
            { "song": "ุฃูุช ุงูุญุธ", "difficulty": "ูุชูุณุท" },
            { "song": "ูุงุณููู ููู", "difficulty": "ุตุนุจ" },
            { "song": "ููู ุงูู ูุงูุช ุจุชููููู", "difficulty": "ุณูู" },
            { "song": "ุฃูู ูููุฉ ููููุฉ", "difficulty": "ุตุนุจ" },
            { "song": "ุณูุงุญ", "difficulty": "ุตุนุจ" }
        ];

        const MOST_LIKELY = [
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุชุฎุงูู ุนุดุงู ุงูุญุณุงุจุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุณุงูุฑ ูููุณู ูููู ูุฃูููุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุนูู ุญุงุฏุซุฉ ุจุงูุนุฑุจูุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุณู ุนูุฏ ูููุงุฏ ูุฑุงุชู/ุตุงุญุจุชูุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุญูุฑ ูู ุงููุตุตุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุตุฑู ูุฑุชุจู ูู ูููููุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุงูู ููุจูุชุฎูุดุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุงู ูู ุงูููุงุตูุงุช ููููุชู ุงููุญุทุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูุฏูู ุชูู ุชููุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุตูุชู ุนุงูู ูู ุงูููุงูุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุจุณ ุทูู ุบุฑูุจ ูู ูุฑุญุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุงุฌุฑ ููุณูุจ ุงูุจูุฏ ูุฌุฃุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุญุจ ุงูููุฏ ูุงูุฏุฑุงูุงุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูููุน ุงูููุจุงูู ูููุณุฑ ุงูุดุงุดุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุนูู ูุตุงูุจ ููู ุตุบูุฑุ"
        ];

        const HEADS_UP_DATA = {
            'ูููุชูู': ["ูุญูุฏ ุตูุงุญ", "ุนูุฑู ุฏูุงุจ", "ุงูุฃูุฑุงูุงุช", "ูุดุฑู", "ุงููุชุฑู", "ุงูุณุงุญู ุงูุดูุงูู", "ุฑูุถุงู ุตุจุญู", "ุนุงุฏู ุฅูุงู", "ุฃุญูุฏ ุญููู", "ููู ุฒูู", "ุดูุฑูู", "ุชุงูุฑ ุญุณูู", "ููุฌุฒ", "ูุงูุฑููู", "ุงูุฃููู", "ุงูุฒูุงูู", "ุจุฑุฌ ุงููุงูุฑุฉ", "ููุฑ ุงูููู", "ุชููุชูู", "ูููุฑูุจุงุต", "ูุงููุณ ุฑูุถุงู", "ุดู ุงููุณูู", "ุงูุฌููุฉ", "ูุญูุฏ ุฑูุถุงู", "ุฌุนูุฑ ุงูุนูุฏุฉ", "ุงููุจูุฑ ุฃูู", "ุญุฒูููู", "ุฃุญูุฏ ููู", "ุจูููู ูุคุงุฏ", "ุญุณู ุดุงููุด", "ุญูู ุจููุง", "ูุงุณููู ุตุจุฑู", "ุฑุถูู ุงูุดุฑุจููู", "ุฃุจู ุงูููู", "ุณูุฏูุชุด ูุจุฏุฉ", "ุนุตูุฑ ูุตุจ", "ููู ูุทุนููุฉ"],
            'ุญููุงูุงุช': ["ุฃุณุฏ", "ููู", "ุฒุฑุงูุฉ", "ูุฑุฏ", "ููุจ", "ูุทุฉ", "ููุฑ", "ููุฏ", "ุฏุจ", "ุจุทุฑูู", "ูุนุงูุฉ", "ุชูุณุงุญ", "ุซุนุจุงู", "ูุณุฑ", "ุตูุฑ", "ุจุบุจุบุงู", "ุญูุงุฑ ูุญุดู", "ุญุตุงู", "ุฌูู", "ุจูุฑุฉ", "ุฎุฑูู", "ูุนุฒุฉ", "ุฏูู", "ูุฑุฎุฉ", "ุจุทุฉ", "ูุฒุฉ", "ุฃุฑูุจ", "ุณูุญูุงุฉ", "ุถูุฏุน", "ุณููุฉ", "ูุฑุด", "ุญูุช", "ุฏููููู", "ุฃุฎุทุจูุท", "ุฌูุจุฑู", "ูุงุจูุฑูุง", "ุนููุจูุช", "ูููุฉ", "ูุญูุฉ", "ุฏุจุงูุฉ", "ูุงููุณุฉ", "ุตุฑุตุงุฑ", "ูุงุฑ"],
            'ุฃููุงุช': ["ุจูุชุฒุง", "ุจุฑุฌุฑ", "ุดุงูุฑูุง", "ูุดุฑู", "ูุญุดู", "ูููุฎูุฉ", "ูุชุฉ", "ูุจุงุจ ูููุชุฉ", "ุญูุงูุดู", "ููุจุงุฑ", "ูุจุฏุฉ", "ุณุฌู", "ููู", "ุทุนููุฉ", "ุจุตุงุฑุฉ", "ูุณูุนุฉ", "ุจุงููุฉ", "ุณุจุงูุฎ", "ูููุงุณ", "ุนุฏุณ", "ููุฑููุฉ ุจุดุงููู", "ูุฌุฑุณูู", "ุฑูุงู", "ุฌูุงุด", "ุณูุจูุณู", "ุณูุดู", "ุฅูุฏููู", "ุจุทุงุทุณ ูุญูุฑุฉ", "ุดูุจุณู", "ุจูุจุณู", "ุฃูุณ ูุฑูู", "ุดููููุงุชุฉ", "ููุงูุฉ", "ุจุณุจูุณุฉ", "ูุทุงูู", "ุฒูุงุจูุฉ", "ุจูุญ ุงูุดุงู", "ุฃุฑุฒ ุจูุจู", "ุฃู ุนูู"],
            'ุฃูุนุงู': ["ุจูุฌุฑู", "ุจูุงูู", "ุจูุดุฑุจ", "ุจูุนูุท", "ุจูุถุญู", "ูุงูู", "ุจูุฐุงูุฑ", "ุจูุทุจุฎ", "ุจูุณูู", "ุจูุบูู", "ุจูุฑูุต", "ุจูุตูู", "ุจูุณุชุญูู", "ุจูุณุฑุญ ุดุนุฑู", "ุจูุบุณู ุณูุงูู", "ุจูุชูุฑุฌ ุน ุงูุชูููุฒููู", "ุจููุนุจ ููุฑุฉ", "ุจูุณุจุญ", "ุจูุทูุฑ", "ุจููุน", "ุจููุชุจ", "ุจููุฑุฃ", "ุจูุชููู ูู ุงูุชููููู", "ุจูุตูุฑ ุณูููู", "ุจูุดุฑุจ ุดูุดุฉ", "ุจููุนุจ ุถุบุท", "ุจููุท ุงูุญุจู", "ุจูุชูุดู", "ุจูุฒุนู", "ุจูููุณ", "ุจูุบูุฒ", "ุจูุตูู", "ุจูุดุงูุฑ", "ุจูุญูู", "ุจููููู", "ุจููุดุฑ ุงูุบุณูู"]
        };

        const EMOJI_QUIZ_DATA = {
            'ุฃููุงู ุนุฑุจู': [
                { emojis: "๐๐ป", answer: "ุงูุจูุช ุจูุชู" },
                { emojis: "๐๐ฆ", answer: "ุงูููู ุงูุฃุฒุฑู" },
                { emojis: "๐ฏ๐ค", answer: "ุนุณู ุฃุณูุฏ" },
                { emojis: "๐จโ๐ซ๐", answer: "ุงููุงุธุฑ" },
                { emojis: "๐๏ธ๐งฟ", answer: "ุฎูุณุฉ ูุฎููุณุฉ" },
                { emojis: "๐ฐ๐ฌ", answer: "ุชูุชุฉ ุฑููุจุฉ" },
                { emojis: "๐๏ธ๐", answer: "ุงูุณุงุญู ุงูุดุฑูุฑ" },
                { emojis: "๐งโโ๏ธโฐ๏ธ", answer: "ูุง ูุฑุงุก ุงูุทุจูุนุฉ" },
                { emojis: "๐ข๐งฑ", answer: "ุจู 100 ูุด" },
                { emojis: "๐จโ๐ฉโ๐งโ๐ฆ๐๐", answer: "ููุถูุน ุนุงุฆูู" },
                { emojis: "๐ฆ๐ฎโโ๏ธ", answer: "ุงูุงุฎุชูุงุฑ" }
            ],
            'ุฃููุงู ุฃุฌูุจู': [
                { emojis: "๐ซ๐ญ", answer: "ูููู ูููุง / ูุตูุน ุงูุดููููุงุชุฉ" },
                { emojis: "๐ฆ๐", answer: "ุงูุฃุณุฏ ุงูููู (Lion King)" },
                { emojis: "๐๐", answer: "ูููู (Finding Nemo)" },
                { emojis: "โก๐", answer: "ูุงุฑู ุจูุชุฑ" },
                { emojis: "๐ข๐ง", answer: "ุชูุชุงููู" },
                { emojis: "๐๐๐", answer: "ููุฑุฏ ุฃูู ุฐุง ุฑููุฌุฒ" },
                { emojis: "๐ดโโ๏ธ๐ฆ", answer: "ูุฑุงุตูุฉ ุงููุงุฑูุจู" },
                { emojis: "๐๐จ๐ก", answer: "Fast & Furious" },
                { emojis: "๐ธ๏ธ๐ท๏ธ", answer: "ุณุจุงูุฏุฑ ูุงู" },
                { emojis: "๐ฆ๐จ", answer: "ุจุงุชูุงู" },
                { emojis: "๐คก๐", answer: "IT" },
                { emojis: "๐ฝ๐ฒ๐", answer: "E.T." },
                { emojis: "๐งธ๐ค๐", answer: "Toy Story" },
                { emojis: "๐ผ๐ฅ", answer: "Kung Fu Panda" },
                { emojis: "๐น๐๐", answer: "The Devil Wears Prada" },
                { emojis: "๐๐๐ฉ", answer: "Lady and the Tramp" },
                { emojis: "๐๐จโ๐ณ", answer: "Ratatouille (ุงููุงุฑ ุงูุทุจุงุฎ)" }
            ],
            'ูุณูุณูุงุช': [
                { emojis: "๐ฅ๐ง", answer: "ูุงุฑ ูุชูุฌ (Game of Thrones)" },
                { emojis: "๐งโโ๏ธ๐งโโ๏ธ", answer: "The Walking Dead" },
                { emojis: "๐ฐ๐ฆ๐ญ", answer: "La Casa De Papel" },
                { emojis: "๐ฆ๐ฎ", answer: "Squid Game" },
                { emojis: "โ๏ธ๐๐ฉ", answer: "Queen's Gambit" },
                { emojis: "๐งชโ๏ธ๐", answer: "Breaking Bad" },
                { emojis: "๐๐ธโ๏ธ", answer: "Game of Thrones" }
            ]
        };

        const LYRICS_DATA = [
            { part: "ุชููู ูุนุงู... ููู ุญุชู ุจุนูุฏ ุนูู ูู ููุจู...", answer: "ููุงู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฃูุช ุงูุญุธ... ุฏู ุฃูุง ุงููู ุชุณุงุจู...", answer: "ุงูุฃูุงู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ูุง ููุนูุน... ูุง ููุนูุน... ูุง...", answer: "ูุฏูุน", singer: "ูุตุทูู ุญุฌุงุฌ" },
            { part: "ุณูุฑ ูุญูู ูุญุทูุท ุนูู...", answer: "ูุฑููุฉ", singer: "ุญุณู ุดุงููุด" },
            { part: "ุงูุบุฒุงูุฉ...", answer: "ุฑุงููุฉ", singer: "ูุฑูู ูุญููุฏ ุนุจุฏ ุงูุนุฒูุฒ" },
            { part: "ุณุทูุงูุฉ... ุณุทูุงูุฉ... ุณุทูุงูุฉ...", answer: "ุณุทูุงูุฉ", singer: "ุนุจุฏ ุงูุจุงุณุท ุญููุฏุฉ" },
            { part: "ูุฎุงุตูุงู... ูุงุจุนุฏ ุนูู ุฃูุง...", answer: "ูุด ุทููุงู", singer: "ููุงู" },
            { part: "ุงูุจุฎุช... ุณุฃูุชูุง ูุฏูุฑุช ูู...", answer: "ููุจู", singer: "ููุฌุฒ" },
            { part: "ูููู ูุฏู... ูููู ููุง... ูุงููู ุฃูููู...", answer: "ุฃูุดูู", singer: "ููุฌุฒ" },
            { part: "ุฃู ูู ูุนุจุช ูุง...", answer: "ุฒูุฑ", singer: "ุฃุญูุฏ ุดูุจุฉ" },
            { part: "ููููููุฑ ููููููุฑ... ุจูุฑุฉ ูุจูู...", answer: "ููููููุฑ", singer: "ุงููุฏูุนุฌูุฉ" },
            { part: "ุนูุฏ ุงูุจุทู...", answer: "ููููู", singer: "ุญุณู ุดุงููุด" },
            { part: "ุจูุช ุงูุฌูุฑุงู ุดุบูุงูู ุฃูุง...", answer: "ุนููุง", singer: "ุญุณู ุดุงููุด" },
            { part: "ุฃูุง ูููุง ูุจุฑุช...", answer: "ุตุบูุฑ", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฑุงุฌุนูู ูุง ููู... ุฑุงุฌุนูู ูุง...", answer: "ููู", singer: "ููุฑูุฒ" },
            { part: "ูุณู ุนูููุง...", answer: "ุงูููู", singer: "ููุฑูุฒ" },
            { part: "ุฃูู ูููุฉ ููููุฉ... ูุตุฉ ูู...", answer: "ูููุฉ", singer: "ุฃู ููุซูู" },
            { part: "ุฃูุช ุนูุฑู... ุงููู ุงุจุชุฏู ุจููุฑู...", answer: "ุตุจุงุญู", singer: "ุฃู ููุซูู" },
            { part: "ุณูุงุญ... ููุงุดู ูู ุงูุจูุงุฏ...", answer: "ุณูุงุญ", singer: "ุนุจุฏ ุงูุญููู" },
            { part: "ูุง ุทูุจ ุงูููุจ ูููู...", answer: "ุญุฑุงู", singer: "ุนุจุฏ ุงููุฌูุฏ ุนุจุฏ ุงููู" },
            { part: "ููู ุชูุงุช... ุชูุงุช ุจูุงุช...", answer: "ูุจูููู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฏู ูู ุงุชุณุงุจ... ูุง ุฏู ุฃูุง...", answer: "ุฃุชุนุจ", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ูุง ูุงุณููู ููู... ุจููุจู...", answer: "ูุงุณู", singer: "ุชุงูุฑ ุญุณูู" },
            { part: "ููู ุงูู ูุงูุช...", answer: "ุจุชููููู", singer: "ุจูุงุก ุณูุทุงู" },
            { part: "ุงููุงุฏ ููุจู ุจููุฌุนู... ูุนุงูุฒ ุญุฏ...", answer: "ูุฏูุนู", singer: "ุจูุงุก ุณูุทุงู" },
            { part: "ุฃูุง ูุด ูุจููุงูู... ุฃูุง ูุงูู ุนูู...", answer: "ุฅูู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุญุจูุจู ูุง ููุฑ ุงูุนูู... ูุง ุณุงูู...", answer: "ุฎูุงูู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ููุฑูู... ููุฑูู... ุฏูู ููุง...", answer: "ุนูููู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฃูุง ูุตูู... ูุด ูุงุดู ูุจู ูุง...", answer: "ุชุชููู", singer: "ุจูุงุก ุณูุทุงู" },
            { part: "ูุง ุฃูุง ูุง ูุฃ... ูุญุฏุด ุชุงูู...", answer: "ูุง ุฃูุง", singer: "ุนูุฑู ุฏูุงุจ" }
        ];

        const STORY_DATA = [
            { start: "ุฏุฎูุช ุงูุณูุจุฑ ูุงุฑูุช ูููุช...", end: "ุดุจุดุจ" },
            { start: "ููู ูุฑุญู ุงูุชุดูุช ุฅู...", end: "ุจุงุชูุงู" },
            { start: "ูุชุญุช ุงูุชูุงุฌุฉ ูููุช...", end: "ุฌูุงุฑุจ" },
            { start: "ููุช ุณุงูู ุงูุนุฑุจูุฉ ููุฌุฃุฉ...", end: "ุฏููุงุตูุฑ" },
            { start: "ุงูุฏูุชูุฑ ูุงูู ูุงุฒู...", end: "ุฃุฑูุต" },
            { start: "ุตุญููุง ูู ุงูููู ููููุง...", end: "ุงููุฑูุฎ" },
            { start: "ุณุฑูุช ุงูุจูู ุนุดุงู...", end: "ุณุงูุฏูุชุด" },
            { start: "ุฑูุจุช ุงููููุฑูุจุงุต ูุฌูุจู...", end: "ูุถุงุฆู" },
            { start: "ูุฏูุฑู ูู ุงูุดุบู ุทูุจ ููู...", end: "ุฃุบูู" },
            { start: "ูู ุฃูู ููู ุฌุงูุนุฉ...", end: "ุจูุฌุงูุฉ" }
        ];

        const MORPH_DATA = ["ู ู ู", "ุด ู ุณ", "ุจ ุญ ุฑ", "ู ุช ุง ุจ", "ู ุฑ ุณ", "ุฌ ู ู", "ุน ู ู", "ู ุฑ ุฏ", "ุจ ู ุช", "ู ู ุฑ", "ุณ ู ู", "ู ู ุฑ", "ุฑ ู ู", "ุฒ ู ุฑ"];

        const ARTIST_DATA = ["ุนุฌูุฉ", "ูุธุงุฑุฉ", "ุดุฌุฑุฉ", "ุจุทูุฎุฉ", "ูุฑู", "ุดูููุฑ", "ูุฑูุญุฉ", "ูุฑุฎุฉ", "ุบุณุงูุฉ", "ุนุตููุฑุฉ", "ูุฑูุจ", "ุตุงุฑูุฎ", "ุณุงุนุฉ", "ูุฑุณู", "ููุจุงูู", "ุจูุชุฒุง", "ุดูุณูุฉ", "ุณููุฉ", "ุชูุงุญุฉ", "ุณุญุงุจุฉ"];

        const WHISPER_DATA = ["ุฃุฑูุจูุง ูู ูููุฑ ุฃููุฑ", "ุฎูุท ุญุฑูุฑ ุนูู ุญูุท ุฎููู", "ุดูุฑุทูู ุฃููู ุทูุฑุดูู", "ุตูุญุฉ ุณุจุนุฉ ุตุนุจุฉ", "ุฎุดุจุฉ ุงูุญุจุณ ุฎูุณ ุฎุดุจุงุช", "ููู ุฑุตุงุต ููุญุงูุฉ", "ุณูู ูููู ูุฑุฒ ุตูุงุฏูุฉ", "ููุฑููุฉ ุจุงูุจุดุงููู", "ุงูุฌู ุงูููุงุฏุฑุฉ ุญุฑ ุฌุฏุงู", "ุนุงูุฒ ุฃุดุฑุจ ุนุตูุฑ ูุตุจ", "ููุชุงุญ ุงูุนุฑุจูุฉ ุถุงุน ููู", "ุจูุฑู ุงูุดุบู ุจุฏุฑู", "ุงููุงุฌุจ ูุงู ุตุนุจ ุฃูู", "ุนูุฏ ูููุงุฏ ุณุนูุฏ ูุง ุฌููู", "ุฑูุถุงู ูุฑูู ููู ุณูุฉ ูุงูุชู ุทูุจูู", "ุจุทุฉ ุจุทุชูู ุจุทุช ุจุทู ุจุทุชูุง", "ุณุช ุจุณุจูุณุฉ ุจูุงูุณูู ูุงูุณูุฑ", "ูุฑุฎุฉ ูุดููุฉ ุนูู ุงููุญู", "ูุง ูุงุฎุฏ ุงููุฑุฏ ุนูู ูุงูู", "ุงููู ุจูุชู ูู ุฒุฌุงุฌ", "ูู ุทูุจ ุงูุนูุง ุณูุฑ ุงูููุงูู"];

        const NEVER_DATA = ["ุฃูุง ุนูุฑู ูุง ุฒูุบุช ูู ุงููุฏุฑุณุฉ", "ุฃูุง ุนูุฑู ูุง ุณุฑูุช ุฃูู ูู ุงูุชูุงุฌุฉ ุจุงูููู", "ุฃูุง ุนูุฑู ูุง ุนููุช ุญุณุงุจ ููุณุจูู ูููู", "ุฃูุง ุนูุฑู ูุง ูุณูุช ุนูุฏ ูููุงุฏ ุญุฏ ูุฑูุจ ููู", "ุฃูุง ุนูุฑู ูุง ุจุนุช ุฑุณุงูุฉ ููุฑูู ุงูุบูุท ูุงุชูุถุญ", "ุฃูุง ุนูุฑู ูุง ุบุดูุช ูู ุงูุชุญุงู", "ุฃูุง ุนูุฑู ูุง ูุฏุจุช ูุฏุจุฉ ูุจูุฑุฉ ูุตุฏูููุง", "ุฃูุง ุนูุฑู ูุง ููุช ูู ุงูููุงุตูุงุช ููุงุชุชูู ุงููุญุทุฉ", "ุฃูุง ุนูุฑู ูุง ูููุช ูุญุฏ ุจุญุจู ูุฃูุง ูุด ูุตุฏู", "ุฃูุง ุนูุฑู ูุง ูุจุณุช ุดุฑุงุจ ููุทูุน", "ุฃูุง ุนูุฑู ูุง ุนููุช ุจููู ูุญุฏ ูุฑุฌุนุช ูููุชู", "ุฃูุง ุนูุฑู ูุง ููุนุช ููุจุงููู ูู ุงูููู", "ุฃูุง ุนูุฑู ูุง ุญุฑูุช ุฃูู ูุฃูุง ุจุทุจุฎ", "ุฃูุง ุนูุฑู ูุง ูุตูุช ุดุนุฑู ููุฏูุช", "ุฃูุง ุนูุฑู ูุง ุงุดุชุฑูุช ุญุงุฌุฉ ุบุงููุฉ ููุณุชุนููุชูุงุด", "ุฃูุง ุนูุฑู ูุง ุงุชุฎุงููุช ุนุดุงู ุงูุญุณุงุจ ูู ูุงููู"];

        const DEBATE_DATA = ["ุงูููุฑููุฉ ุจุงูุจุดุงููู ุชุชุงูู ุณุฎูุฉ ุจุณ", "ุงูุตูู ุฃุญูู ูู ุงูุดุชุง", "ุงูุฅูุฏููู ุฃูู ุญูููู ูุด ุณูุงู", "ุงููููุณ ุจุชุดุชุฑู ุงูุณุนุงุฏุฉ", "ุงูุฃูู ุงูุจูุชู ุฃุญูู ูู ุงููุทุงุนู", "ุงูุนูู ุงูุญุฑ (Freelance) ุฃุญุณู ูู ุงููุธููุฉ ุงูุซุงุจุชุฉ", "ุงูุฌูุงุฒ ุนู ุญุจ ุฃุญุณู ูู ุตุงูููุงุช", "ุชุตุญู ุจุฏุฑู ุฃุญุณู ูู ุงูุณูุฑ", "ุงูููุงุจ ุฃุญูู ูู ุงููุทุท", "ุงููููุฉ ุชุชุดุฑุจ ุงูุตุจุญ ุจุณ", "ููุณุจูู ุฃุญุณู ูู ุชูู ุชูู", "ุงูุฃุบุงูู ุงููุฏููุฉ ุฃุญูู ูู ุงูููุฑุฌุงูุงุช", "ุงูุจุญุฑ ุฃุญูู ูู ุงูุจุณูู", "ุงูุณูุฑ ุจุฑู ูุตุฑ ุฃุญุณู ูู ุฌูู ูุตุฑ", "ุงูุจูุจุณู ุฃุญูู ูู ุงููููุง"];

        const LAWYER_DATA = [
            { disaster: "ูุฏูุฑู ููุดู ูุงูู ุชุญุช ุงูููุชุจ", words: ["ุจุทุฑูู", "ูุฎูู", "ูููุจ ุฒุญู"] },
            { disaster: "ูุณูุช ุชูุจุณ ุจูุทูููู ูุฃูุช ุฑุงูุญ ุงูุดุบู", words: ["ูููุงุฉ", "ุซูุจ ุฃุณูุฏ", "ุณูุดู"] },
            { disaster: "ุญุฑูุช ูุณุชุงู ูุฑุญ ูุฑุงุชู", words: ["ุชููู", "ูุงุชุดุจ", "ุฃุณุชููุฉ"] },
            { disaster: "ุงูุดุฑุทุฉ ูููุช ูุนุงู ููุจูุฉ ูุฏููุฉ", words: ["ุจุฎูุฑ", "ุนูุฏ ูููุงุฏ", "ุฎุงูุชู"] },
            { disaster: "ุฏุฎูุช ุงูุญูุงู ุงูุบูุท ูู ุงููุทุงุฑ", words: ["ูุธุงุฑุฉ ูุธุฑ", "ุจูุตูุฉ", "ูุถุงุฆููู"] },
            { disaster: "ูุณุฑุช ููุจุงูู ุตุงุญุจู ุงูุบุงูู", words: ["ูููุฉ", "ูุบูุงุทูุณ", "ุฒูุฒุงู"] },
            { disaster: "ุงุชุงุฎุฑุช ุนูู ุงุฌุชูุงุน ููู ุณุงุนุชูู", words: ["ุณุญููุงุฉ", "ุฃุณุงูุณูุฑ", "ูุงุจุชู ูุงุฌุฏ"] },
            { disaster: "ูุฑุงุชู ุดุงูุช ุฑุณุงูุฉ 'ุจุญุจู' ุนูู ููุจุงููู", words: ["ุดุฑูุฉ ุงูุงุชุตุงูุงุช", "ูุณุงุจูุฉ", "ุนูุงุฑูุช"] }
        ];

        const BOMB_DATA = ["ุฃุณูุงุก ูุงุนุจู ูุฑุฉ ูุฏู", "ุฃุณูุงุก ููุงูู", "ูุงุฑูุงุช ุณูุงุฑุงุช", "ุฃุบุงูู ูุนูุฑู ุฏูุงุจ", "ุญุงุฌุงุช ููุฌูุฏุฉ ูู ุงููุทุจุฎ", "ุฏูู ุฃูุฑูููุฉ", "ุฃุณูุงุก ุจูุงุช ุจุญุฑู ุงูููู", "ุฃููุงู ูุนุงุฏู ุฅูุงู", "ุฃููุงุน ุญููุงูุงุช", "ุฃููุงู", "ุญุงุฌุงุช ุจูุนูููุง ูู ุงูุญูุงู", "ุฃุณูุงุก ูุฏู ูุตุฑูุฉ", "ุฃููุงุน ุฎุถุงุฑ", "ูุงุฑูุงุช ููุจุงููุงุช", "ุตูุงุช ุจุญุฑู ุงูุณูู"];

        const SCRAMBLE_DATA = [
            { category: "ุญููุงู", word: "ุฒุฑุงูุฉ" },
            { category: "ุญููุงู", word: "ููู" },
            { category: "ุญููุงู", word: "ุฃุณุฏ" },
            { category: "ุญููุงู", word: "ููุฑ" },
            { category: "ุญููุงู", word: "ุฏุจ" },
            { category: "ุฌูุงุฏ", word: "ููู" },
            { category: "ุฌูุงุฏ", word: "ูุชุงุจ" },
            { category: "ุฌูุงุฏ", word: "ุณุงุนุฉ" },
            { category: "ุฌูุงุฏ", word: "ูุธุงุฑุฉ" },
            { category: "ุฌูุงุฏ", word: "ููุชุงุญ" },
            { category: "ุฃููุฉ", word: "ูุดุฑู" },
            { category: "ุฃููุฉ", word: "ููุฑููุฉ" },
            { category: "ุฃููุฉ", word: "ูุจุฏุฉ" },
            { category: "ุฃููุฉ", word: "ูุญุดู" },
            { category: "ุฃููุฉ", word: "ููู" },
            { category: "ูุงููุฉ", word: "ุชูุงุญ" },
            { category: "ูุงููุฉ", word: "ููุฒ" },
            { category: "ูุงููุฉ", word: "ุจุฑุชูุงู" },
            { category: "ูุงููุฉ", word: "ูุงูุฌู" },
            { category: "ูุงููุฉ", word: "ุนูุจ" },
            { category: "ูุฏููุฉ", word: "ุงููุงูุฑุฉ" },
            { category: "ูุฏููุฉ", word: "ุงูุฅุณููุฏุฑูุฉ" },
            { category: "ูุฏููุฉ", word: "ุงูุฌูุฒุฉ" },
            { category: "ูุฏููุฉ", word: "ุงูููุตูุฑุฉ" },
            { category: "ูุฏููุฉ", word: "ุทูุทุง" }
        ];

        const TABOO_DATA = [
            { word: "ุฃูุฑุงูุงุช", taboo: ["ุฃุจู ุงูููู", "ุฌูุฒุฉ", "ูุฑุงุนูุฉ"] },
            { word: "ูุฑุฉ ูุฏู", taboo: ["ุฌูู", "ููุนุจ", "ุญูู"] },
            { word: "ููุณุจูู", taboo: ["ูุงุฑู", "ุฃุฒุฑู", "ูููุน"] },
            { word: "ุจุญุฑ", taboo: ["ุณูู", "ูุงููู", "ุนูู"] },
            { word: "ูุฏุฑุณุฉ", taboo: ["ูุฏุฑุณ", "ูุตู", "ุทุงูุจ"] },
            { word: "ุนุฑุจูุฉ", taboo: ["ุนุฌู", "ุจูุฒูู", "ุฏุฑููุณููู"] },
            { word: "ุดุงู", taboo: ["ุณูุฑ", "ุดุฑุจ", "ูุนูุงุน"] },
            { word: "ุฑูุถุงู", taboo: ["ุตูุงู", "ูุงููุณ", "ูุฏูุน"] },
            { word: "ุชูููุฒููู", taboo: ["ุฑูููุช", "ุดุงุดุฉ", "ููุงุฉ"] },
            { word: "ุจุทูุฎ", taboo: ["ุฃุญูุฑ", "ุจุฐุฑ", "ูุงููุฉ"] },
            { word: "ูุชุฑู", taboo: ["ุฃููุงู", "ูุญุทุฉ", "ุชุฐูุฑุฉ"] },
            { word: "ุฏูุชูุฑ", taboo: ["ุนูุงุฏุฉ", "ูุฑูุถ", "ุณูุงุนุฉ"] }
        ];

        // ===== AUDIO =====
        function playSound(type) {
            if (state.isMuted) return;
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) return;
            const ctx = new AudioContext();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            const now = ctx.currentTime;
            
            if (type === 'tick') { osc.frequency.setValueAtTime(800, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1); osc.start(now); osc.stop(now + 0.1); }
            else if (type === 'fail') { osc.type = 'sawtooth'; osc.frequency.setValueAtTime(150, now); gain.gain.linearRampToValueAtTime(0.01, now + 0.5); osc.start(now); osc.stop(now + 0.5); }
            else if (type === 'click') { osc.frequency.setValueAtTime(1200, now); gain.gain.setValueAtTime(0.05, now); osc.start(now); osc.stop(now + 0.03); }
            else if (type === 'success') { osc.type = 'triangle'; osc.frequency.setValueAtTime(440, now); osc.frequency.exponentialRampToValueAtTime(880, now + 0.1); osc.start(now); osc.stop(now + 0.3); }
            else if (type === 'bomb_tick') { osc.frequency.setValueAtTime(600, now); gain.gain.setValueAtTime(0.3, now); osc.start(now); osc.stop(now + 0.05); }
            else if (type === 'explode') { osc.type = 'sawtooth'; osc.frequency.setValueAtTime(50, now); osc.frequency.linearRampToValueAtTime(10, now + 1); gain.gain.setValueAtTime(1, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 1); osc.start(now); osc.stop(now + 1); }
        }

        // ===== HELPERS =====
        function toggleMute() {
            state.isMuted = !state.isMuted;
            document.getElementById('muteBtn').innerHTML = state.isMuted ? '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><line x1="1" y1="1" x2="19" y2="19"></line></svg>' : '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>';
            playSound('click');
        }
        function goHome() { 
            playSound('click'); 
            if (gameInterval) clearInterval(gameInterval);
            state.screen = 'home'; 
            state.currentGame = null; 
            render(); 
        }
        function navigate(screen) { playSound('click'); state.screen = screen; render(); }
        function updateScore(id, isTeam, points = 1) {
            if (isTeam) {
                const team = state.teams.find(t => t.id === id);
                if (team) {
                    state.teams = state.teams.map(t => t.id === id ? {...t, score: t.score + points} : t);
                    playSound('success');
                }
            } else {
                const player = state.players.find(p => p.id === id);
                if (player) {
                    state.players = state.players.map(p => p.id === id ? {...p, score: p.score + points} : p);
                    playSound('success');
                }
            }
        }
        function showDare() {
            const dare = DARES_LIST[Math.floor(Math.random() * DARES_LIST.length)];
            playSound('fail');
            const modal = `<div class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in"><div class="bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl text-center border-4 border-red-500"><h2 class="text-2xl font-black text-red-600 mb-2">ุนูููููุงุจ!</h2><p class="text-xl font-bold text-slate-800 mb-6">"${dare}"</p><button onclick="this.closest('.fixed').remove()" class="w-full py-3 bg-slate-800 text-white rounded-xl font-bold">ููุฐุช ุฎูุงุต</button></div></div>`;
            document.body.insertAdjacentHTML('beforeend', modal);
        }
        function getTimer(time) {
            if (time >= 60) { const mins = Math.floor(time / 60); const secs = time % 60; return `${mins}:${secs < 10 ? '0' : ''}${secs}`; }
            return time;
        }
        function header(title, backTo) {
            return `<div class="flex items-center gap-4 py-2 mb-2"><button onclick="navigate('${backTo}')" class="p-2 bg-slate-100 rounded-full hover:bg-slate-200 text-slate-700"><svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></button><h1 class="text-xl font-bold text-slate-800">${title}</h1></div>`;
        }

        // --- NEW: Fair Turn Logic ---
        function getFairPlayer() {
            if (state.players.length === 0) return { id: 0, name: 'ูุงุนุจ' }; // Safety
            
            // Initialize or refill queue if empty
            if (state.turnQueue.length === 0) {
                // Create a copy and shuffle it
                let newQueue = [...state.players];
                // Fisher-Yates shuffle
                for (let i = newQueue.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newQueue[i], newQueue[j]] = [newQueue[j], newQueue[i]];
                }
                state.turnQueue = newQueue;
            }
            
            return state.turnQueue.pop();
        }

        // --- NEW: Unified Game Start Screen ---
        function renderGameStartScreen(title, description, emoji, buttonText, startAction, colorClass) {
            return `
                <div class="p-6 h-screen flex flex-col ${colorClass} bg-opacity-10">
                    ${header(title, 'home')}
                    <div class="flex-1 flex flex-col justify-center items-center text-center">
                        <div class="text-6xl mb-6">${emoji}</div>
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">${title}</h2>
                        <p class="text-slate-600 max-w-sm mb-8 font-medium leading-relaxed">${description}</p>
                        <button onclick="${startAction}" class="w-full py-4 ${colorClass.replace('bg-opacity-10', '')} text-white rounded-xl font-bold text-xl shadow-lg transition transform active:scale-95 hover:brightness-110">
                            ${buttonText}
                        </button>
                    </div>
                </div>
            `;
        }

        // ===== RENDER =====
        function render() {
            const container = document.getElementById('screen-container');
            if (state.screen === 'home') container.innerHTML = renderHome();
            else if (state.screen === 'players') container.innerHTML = renderPlayers();
            else if (state.screen === 'scores') container.innerHTML = renderScores();
            else if (state.screen === 'teams_setup') container.innerHTML = renderTeamsSetup();
            // Games Setup
            else if (state.screen === 'lawyer_setup') container.innerHTML = renderLawyerSetup();
            else if (state.screen === 'bomb_setup') container.innerHTML = renderBombSetup();
            else if (state.screen === 'taboo_setup') container.innerHTML = renderTabooSetup();
            else if (state.screen === 'story_setup') container.innerHTML = renderStorySetup();
            else if (state.screen === 'morph_setup') container.innerHTML = renderMorphSetup();
            else if (state.screen === 'artist_setup') container.innerHTML = renderArtistSetup();
            else if (state.screen === 'whisper_setup') container.innerHTML = renderWhisperSetup();
            else if (state.screen === 'never_setup') container.innerHTML = renderNeverSetup();
            else if (state.screen === 'debate_setup') container.innerHTML = renderDebateSetup();
            else if (state.screen === 'heads_up_setup') container.innerHTML = renderHeadsUpSetup();
            else if (state.screen === 'emoji_setup') container.innerHTML = renderEmojiSetup();
            else if (state.screen === 'lyrics_setup') container.innerHTML = renderLyricsSetup();
            else if (state.screen === 'spy_setup') container.innerHTML = renderSpySetup();
            else if (state.screen === 'charades_setup') container.innerHTML = renderCharadesSetup();
            else if (state.screen === 'quotes_setup') container.innerHTML = renderQuotesSetup();
            else if (state.screen === 'five_second_setup') container.innerHTML = renderFiveSecondSetup();
            else if (state.screen === 'bus_setup') container.innerHTML = renderBusSetup();
            else if (state.screen === 'liar_setup') container.innerHTML = renderLiarSetup();
            else if (state.screen === 'auction_setup') container.innerHTML = renderAuctionSetup();
            else if (state.screen === 'gibberish_setup') container.innerHTML = renderGibberishSetup();
            else if (state.screen === 'hum_setup') container.innerHTML = renderHumSetup();
            else if (state.screen === 'likely_setup') container.innerHTML = renderLikelySetup();
        }

        function renderHome() {
            return `
                <div class="flex flex-col h-screen p-4">
                    <div class="text-center pt-8 pb-4"><h1 class="text-4xl font-black text-slate-800 mb-1">ูุนุจุฉ ุงููุนุฏุฉ</h1><p class="text-slate-500 font-medium">ุงูููุฉ ูุชุญูุงุด ุบูุฑ ุจููุง</p></div>
                    <div class="w-full grid grid-cols-2 gap-3 flex-1 overflow-y-auto pb-2 content-start min-h-0">
                        <!-- SET 3 -->
                        ${menuButton('lawyer_setup', '๐จโโ๏ธ', 'ุงููุญุงูู ุงููุตูุญ', 'ุจุฑุฑ ุงููุตูุจุฉ', 'bg-slate-700')}
                        ${menuButton('bomb_setup', '๐ฃ', 'ุงูููุจูุฉ', 'ุจุงุตู ุจุณุฑุนุฉ', 'bg-red-700')}
                        ${menuButton('taboo_setup', '๐ซ', 'ุฃูุนู ุชููููุง', 'ููููุนุงุช ูุชูุฑ', 'bg-rose-900')}
                        <!-- SET 2 -->
                        ${menuButton('story_setup', '๐', 'ุญูุงูุฉ ูู ูููุชูู', 'ุฃูููุง ูุตุฉ', 'bg-amber-600')}
                        ${menuButton('artist_setup', '๐จ', 'ุงูุฑุณุงู ุงูุฃุนูู', 'ุงุฑุณู ูุฎูู', 'bg-fuchsia-600')}
                        ${menuButton('morph_setup', '๐ค', 'ุงููููุฉ ุงููุชุญููุฉ', 'ุบูุฑ ุญุฑู', 'bg-cyan-700')}
                        <!-- SET 1 -->
                        ${menuButton('whisper_setup', '๐ง', 'ุฅูุฑุฃ ุดูุงููู', 'ุนูู ุงูุตูุช', 'bg-pink-500')}
                        ${menuButton('debate_setup', 'โ๏ธ', 'ูุญููุฉ', 'ุฅููุงุน ูุฌุฏุงู', 'bg-amber-700')}
                        ${menuButton('never_setup', 'โ', 'ุฃูุง ุนูุฑู ูุง', 'ููู ุนููุ', 'bg-rose-800')}
                        <!-- CLASSICS -->
                        ${menuButton('heads_up_setup', '๐คฏ', 'ุนูู ุฑุงุณู', 'ุญุท ููุจุงููู', 'bg-blue-600')}
                        ${menuButton('emoji_setup', '๐งฉ', 'ูู ุงูุฅูููุฌู', 'ุงุณู ุงูููููุ', 'bg-yellow-500')}
                        ${menuButton('lyrics_setup', '๐ค', 'ููู ุงูุฃุบููุฉ', 'ุญุงูุธุ', 'bg-purple-500')}
                        ${menuButton('unscramble_setup', '๐', 'ุฑุชุจูุง ุตุญ', 'ูููุฉ ูุชูุฎุจุทุฉ', 'bg-green-600')}
                        ${menuButton('five_second_setup', 'โฑ๏ธ', 'ุฎูุณุฉ ุนููู', '3 ุญุงุฌุงุช', 'bg-teal-600')}
                        ${menuButton('spy_setup', '๐ต๏ธ', 'ุงูุฌุงุณูุณ', 'ููู ุงูุบุฑูุจุ', 'bg-indigo-600')}
                        ${menuButton('charades_setup', '๐ญ', 'ุจุฏูู ููุงู', 'ุชูุซูู', 'bg-rose-600')}
                        ${menuButton('quotes_setup', '๐ฌ', 'ุงูุงูููุงุช', 'ุณููุน', 'bg-emerald-600')}
                        ${menuButton('bus_setup', '๐', 'ุฃูุชูุจูุณ', 'ุญุฑู ููุฆุฉ', 'bg-purple-600')}
                        ${menuButton('liar_setup', '๐', 'ุงููุฏุงุจ', 'ุงูุณู ุงููุฐุจุฉ', 'bg-orange-600')}
                        ${menuButton('auction_setup', '๐จ', 'ุงููุฒุงุฏ', 'ููู ูุฒูุฏ', 'bg-cyan-600')}
                        ${menuButton('gibberish_setup', '๐ฃ๏ธ', 'ูู ุงูุดูุฑุฉ', 'ููุงู ุบุฑูุจ', 'bg-pink-600')}
                        ${menuButton('hum_setup', '๐ต', 'ุทุฑุจูู', 'ููููุฉ', 'bg-yellow-600')}
                        ${menuButton('likely_setup', '๐', 'ููู ุงููุงุฑุซุฉ', 'ุชููุนุงุช', 'bg-red-600')}
                    </div>
                    
                    <!-- Footer Buttons (Icons Fixed) -->
                    <div class="flex gap-3 w-full mt-2">
                        <button onclick="navigate('players')" class="flex-1 p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-600 flex items-center justify-center gap-2">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            ุงููุงุนุจูู
                        </button>
                        <button onclick="navigate('scores')" class="flex-1 p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-600 flex items-center justify-center gap-2">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
                            ุงููุชุงุฆุฌ
                        </button>
                    </div>
                </div>`;
        }

        function menuButton(screen, emoji, title, subtitle, color) { return `<button onclick="navigate('${screen}')" class="w-full aspect-square p-3 rounded-2xl shadow-lg text-white flex flex-col items-center justify-center text-center transition transform active:scale-95 hover:scale-[1.02] ${color}"><div class="text-5xl mb-2">${emoji}</div><div><span class="text-lg font-bold block leading-tight">${title}</span><span class="text-xs opacity-90 block mt-1 leading-tight">${subtitle}</span></div></button>`; }
        function renderPlayers() {
            return `
                <div class="p-6 h-screen flex flex-col">
                    ${header('ุงููุงุนุจูู', 'home')}
                    
                    <!-- Team Setup Row -->
                    <div class="mb-4 flex justify-between items-center">
                        <button onclick="navigate('teams_setup')" class="px-4 py-2 bg-slate-100 rounded-xl font-bold text-slate-700 text-sm hover:bg-slate-200 transition">
                            ุฅุนุฏุงุฏ ุงููุฑู
                        </button>
                        ${state.teamMode ? `
                            <button onclick="deactivateTeamMode()" class="flex items-center gap-2 px-4 py-2 bg-white rounded-xl font-bold text-red-500 text-sm border border-red-200 hover:bg-red-50 transition">
                                <span>ูุฑู</span>
                                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        ` : ''}
                    </div>
                    
                    <!-- Player Input Section -->
                    <form onsubmit="addPlayer(event)" class="flex gap-2 mb-6">
                        <button type="submit" class="bg-amber-500 text-white p-3 rounded-lg font-bold w-12 h-12 flex items-center justify-center">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        <input type="text" id="newPlayerName" placeholder="ุงุณู..." class="flex-1 p-3 border-2 border-slate-200 rounded-lg text-lg">
                    </form>
                    
                    <!-- Players List -->
                    <div class="flex-1 overflow-y-auto space-y-3">
                        ${state.players.map(p => `
                            <div class="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                                <span class="font-bold text-lg text-slate-700">${p.name}</span>
                                <button onclick="removePlayer(${p.id})" class="text-red-400 hover:text-red-600 transition">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
        function renderTeamsSetup() {
            const teamA = state.teams[0];
            const teamB = state.teams[1];
            const activeTab = state.teamsSetupTab || 'A';
            
            return `
                <div class="p-6 h-screen flex flex-col bg-slate-50">
                    ${header('ุงููุฑู', 'players')}
                    
                    <!-- Team Name Inputs -->
                    <div class="mb-4 space-y-3">
                        <div class="flex gap-2">
                            <input type="text" id="teamAName" value="${teamA.name}" placeholder="ุงุณู ูุฑูู ุฃ" class="flex-1 p-3 border-2 border-rose-200 rounded-lg text-lg bg-white" onchange="updateTeamName('A', this.value)">
                            <input type="text" id="teamBName" value="${teamB.name}" placeholder="ุงุณู ูุฑูู ุจ" class="flex-1 p-3 border-2 border-indigo-200 rounded-lg text-lg bg-white" onchange="updateTeamName('B', this.value)">
                        </div>
                    </div>
                    
                    <!-- Team Selection Tabs -->
                    <div class="flex gap-2 mb-4">
                        <button onclick="state.teamsSetupTab='A'; render()" class="flex-1 py-3 rounded-xl font-bold text-lg transition ${activeTab === 'A' ? 'bg-rose-500 text-white border-2 border-rose-600' : 'bg-white border-2 border-rose-200 text-rose-600'}">
                            ${teamA.name}
                        </button>
                        <button onclick="state.teamsSetupTab='B'; render()" class="flex-1 py-3 rounded-xl font-bold text-lg transition ${activeTab === 'B' ? 'bg-indigo-500 text-white border-2 border-indigo-600' : 'bg-white border-2 border-indigo-200 text-indigo-600'}">
                            ${teamB.name}
                        </button>
                    </div>
                    
                    <!-- Players List -->
                    <div class="flex-1 overflow-y-auto space-y-3">
                        ${state.players.map(p => {
                            const isInTeamA = teamA.members.some(m => m.id === p.id);
                            const isInTeamB = teamB.members.some(m => m.id === p.id);
                            
                            return `
                                <div class="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                                    <span class="font-bold text-lg text-slate-700">${p.name}</span>
                                    <div class="flex gap-2">
                                        <button onclick="assignPlayerToTeam('A', ${p.id})" class="px-4 py-2 rounded-lg font-bold text-sm transition ${isInTeamA ? 'bg-red-500 text-white' : 'bg-slate-100 text-slate-600'}">
                                            ุฃ
                                        </button>
                                        <button onclick="assignPlayerToTeam('B', ${p.id})" class="px-4 py-2 rounded-lg font-bold text-sm transition ${isInTeamB ? 'bg-blue-500 text-white' : 'bg-slate-100 text-slate-600'}">
                                            ุจ
                                        </button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="mt-4 space-y-2">
                        <button onclick="activateTeamMode()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-lg shadow-lg">
                            ุชูุนูู ูุถุน ุงููุฑู
                        </button>
                        <button onclick="deactivateTeamMode()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">
                            ุฅูุบุงุก ูุถุน ุงููุฑู
                        </button>
                    </div>
                </div>
            `;
        }
        function renderScores() {
            if (state.teamMode) {
                const sortedTeams = [...state.teams].sort((a, b) => b.score - a.score);
                return `
                    <div class="p-6 h-screen flex flex-col">
                        ${header('ููุญุฉ ุงูุดุฑู - ุงููุฑู', 'home')}
                        <div class="flex-1 overflow-y-auto space-y-4">
                            ${sortedTeams.map((t, i) => `
                                <div class="flex items-center p-4 rounded-xl shadow-sm border border-slate-100 bg-white">
                                    <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ml-4 ${i === 0 ? 'bg-yellow-400 text-white' : 'bg-slate-200 text-slate-600'}">${i + 1}</div>
                                    <div class="flex-1">
                                        <div class="font-bold text-lg text-slate-800">${t.name}</div>
                                        <div class="text-sm text-slate-500 mt-1">${(t.members && t.members.length > 0) ? t.members.map(m => m.name).join(', ') : 'ูุง ููุฌุฏ ุฃุนุถุงุก'}</div>
                                    </div>
                                    <div class="font-black text-2xl ${t.id === 'A' ? 'text-rose-600' : 'text-indigo-600'}">${t.score}</div>
                                </div>
                            `).join('')}
                        </div>
                        <button onclick="resetScores()" class="mt-4 w-full py-4 bg-slate-800 text-white rounded-xl font-bold">ุชุตููุฑ ุงูุนุฏุงุฏ</button>
                    </div>
                `;
            } else {
                const sortedPlayers = [...state.players].sort((a, b) => b.score - a.score);
                return `
                    <div class="p-6 h-screen flex flex-col">
                        ${header('ููุญุฉ ุงูุดุฑู', 'home')}
                        <div class="flex-1 overflow-y-auto space-y-4">
                            ${sortedPlayers.map((p, i) => `
                                <div class="flex items-center p-4 rounded-xl shadow-sm border border-slate-100 bg-white">
                                    <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ml-4 ${i === 0 ? 'bg-yellow-400 text-white' : 'bg-slate-200 text-slate-600'}">${i + 1}</div>
                                    <div class="flex-1 font-bold text-lg text-slate-800">${p.name}</div>
                                    <div class="font-black text-2xl text-indigo-600">${p.score}</div>
                                </div>
                            `).join('')}
                        </div>
                        <button onclick="resetScores()" class="mt-4 w-full py-4 bg-slate-800 text-white rounded-xl font-bold">ุชุตููุฑ ุงูุนุฏุงุฏ</button>
                    </div>
                `;
            }
        }
        function addPlayer(e) { e.preventDefault(); const input = document.getElementById('newPlayerName'); if(input.value.trim()){ state.players.push({id: Date.now(), name: input.value.trim(), score: 0}); render(); } }
        function removePlayer(id) { 
            state.players = state.players.filter(p => p.id !== id);
            // Remove from teams as well
            state.teams.forEach(team => {
                team.members = team.members.filter(m => m.id !== id);
            });
            render(); 
        }
        function resetScores() { 
            state.players = state.players.map(p => ({...p, score: 0}));
            state.teams = state.teams.map(t => ({...t, score: 0}));
            render(); 
        }
        function updateTeamName(teamId, newName) {
            const team = state.teams.find(t => t.id === teamId);
            if (team && newName.trim()) {
                team.name = newName.trim();
                playSound('click');
            }
        }
        function assignPlayerToTeam(teamId, playerId) {
            const team = state.teams.find(t => t.id === teamId);
            const otherTeam = state.teams.find(t => t.id !== teamId);
            const player = state.players.find(p => p.id === playerId);
            
            if (!team || !player) return;
            
            // Remove from other team first
            otherTeam.members = otherTeam.members.filter(m => m.id !== playerId);
            
            // Check if already in this team
            const alreadyInTeam = team.members.some(m => m.id === playerId);
            if (!alreadyInTeam) {
                team.members.push(player);
            } else {
                // If already in team, remove them (toggle)
                team.members = team.members.filter(m => m.id !== playerId);
            }
            
            playSound('click');
            render();
        }
        function activateTeamMode() {
            const teamA = state.teams[0];
            const teamB = state.teams[1];
            
            if (teamA.members.length === 0 || teamB.members.length === 0) {
                alert('ูุฌุจ ุฃู ูููู ููู ูุฑูู ูุงุนุจ ูุงุญุฏ ุนูู ุงูุฃูู!');
                return;
            }
            
            state.teamMode = true;
            playSound('success');
            render();
        }
        function deactivateTeamMode() {
            state.teamMode = false;
            playSound('click');
            render();
        }

        // ============================================
        // =========== ALL GAME LOGIC =================
        // ============================================

        // --- LAWYER ---
        function startLawyerGame() {
            const data = LAWYER_DATA[Math.floor(Math.random() * LAWYER_DATA.length)];
            const player = getFairPlayer(); // Utilizes fair distribution
            state.currentGame = { type: 'lawyer', phase: 'prepare', data, player, revealed: false, timeLeft: 30 };
            playSound('click');
            render();
        }
        function startLawyerRound() {
            state.currentGame.phase = 'playing';
            state.currentGame.revealed = true;
            playSound('click');
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                // DOM update for no flickering
                const timerEl = document.getElementById('game-timer');
                if (timerEl) timerEl.innerText = getTimer(state.currentGame.timeLeft);
                
                if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); render(); }
                else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
        }
        function lawyerSuccess() { updateScore(state.currentGame.player.id, false, 1); startLawyerGame(); }
        function renderLawyerSetup() {
            if (!state.currentGame || state.currentGame.type !== 'lawyer') return renderGameStartScreen('ุงููุญุงูู ุงููุตูุญ', 'ูุตูุจุฉ ูุชุญุตููุ ููุงุฒู ุชุจุฑุฑูุง ูุชุฎุฑุฌ ูููุง ูุชุณุชุฎุฏู 3 ูููุงุช ููููุด ุนูุงูุฉ ุจุงูููุถูุน ุนุดุงู ุชููุน ุงููุญููุฉ!', '๐จโโ๏ธ', 'ูุฑุทูู!', 'startLawyerGame()', 'bg-slate-700');
            const game = state.currentGame;
            if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-slate-700 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-slate-800 z-10 flex items-center justify-center cursor-pointer hover:bg-slate-900 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงููุตูุจุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ุงููุตูุจุฉ:</p><h2 class="text-2xl font-bold text-yellow-300 leading-relaxed mb-4">${game.data.disaster}</h2><div class="border-t border-white/20 pt-4"><p class="text-sm mb-2 opacity-75">ูููุงุช ุฅุฌุจุงุฑูุฉ:</p><div class="flex flex-wrap gap-2 justify-center">${game.data.words.map(w=>`<span class="bg-slate-600 px-3 py-1 rounded-lg">${w}</span>`).join('')}</div></div></div><button onclick="startLawyerRound()" class="w-full py-4 bg-white text-slate-800 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุงุจุฏุฃ ุงููุฑุงูุนุฉ</button></div>`;
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-4 mb-4"><h2 class="text-slate-500">ุงููุชูู: <span class="font-bold text-slate-800">${game.player.name}</span></h2></div><div class="bg-slate-50 p-4 rounded-xl border border-slate-200 mb-6 text-center"><h3 class="font-bold text-lg mb-2">${game.data.disaster}</h3><div class="flex flex-wrap gap-2 justify-center">${game.data.words.map(w=>`<span class="bg-slate-200 px-2 py-1 rounded text-sm font-bold text-slate-700">${w}</span>`).join('')}</div></div><div class="flex-1 flex justify-center items-center"><div class="text-8xl font-black text-slate-800" id="game-timer">${getTimer(game.timeLeft)}</div></div><div class="space-y-3"><button onclick="lawyerSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุจุฑุงุกุฉ (ุฃููุนูุง)</button><button onclick="state.currentGame.phase='result'; render()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ุฅุนุฏุงู (ูุดู)</button></div></div>`;
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-slate-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฑูุนุช ุงูุฌูุณุฉ!</h2><button onclick="startLawyerGame()" class="w-full py-4 bg-slate-600 rounded-xl font-bold text-xl mb-3">ูุถูุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- BOMB ---
        function startBombGame() {
            const category = BOMB_DATA[Math.floor(Math.random() * BOMB_DATA.length)];
            const count = Math.floor(Math.random() * 3) + 3; // ุนุฏุฏ ุนุดูุงุฆู ูู 3 ูู 5
            const time = Math.floor(Math.random() * (60 - 10 + 1) + 10);
            const player = getFairPlayer();
            state.currentGame = { type: 'bomb', phase: 'playing', category, count, player, timeLeft: time, exploded: false };
            playSound('click');
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                playSound('bomb_tick');
                if (state.currentGame.timeLeft <= 0) {
                    clearInterval(gameInterval);
                    state.currentGame.exploded = true;
                    state.currentGame.phase = 'result';
                    // Deduct point from current player
                    updateScore(state.currentGame.player.id, false, -1);
                    playSound('explode');
                    render();
                }
            }, 1000);
        }
        function passBomb() { 
            if(state.currentGame && state.currentGame.phase === 'playing') {
                // Stop current timer
                if (gameInterval) clearInterval(gameInterval);
                
                // Change category and player
                const newCategory = BOMB_DATA[Math.floor(Math.random() * BOMB_DATA.length)];
                const newCount = Math.floor(Math.random() * 3) + 3; // ุนุฏุฏ ุนุดูุงุฆู ูู 3 ูู 5
                const newPlayer = getFairPlayer();
                const newTime = Math.floor(Math.random() * (60 - 10 + 1) + 10);
                
                state.currentGame.category = newCategory;
                state.currentGame.count = newCount;
                state.currentGame.player = newPlayer;
                state.currentGame.timeLeft = newTime;
                
                playSound('click');
                render();
                
                // Start new timer
                gameInterval = setInterval(() => {
                    state.currentGame.timeLeft--;
                    playSound('bomb_tick');
                    if (state.currentGame.timeLeft <= 0) {
                        clearInterval(gameInterval);
                        state.currentGame.exploded = true;
                        state.currentGame.phase = 'result';
                        updateScore(state.currentGame.player.id, false, -1);
                        playSound('explode');
                        render();
                    }
                }, 1000);
            }
        }
        function renderBombSetup() {
            if (!state.currentGame || state.currentGame.type !== 'bomb') return renderGameStartScreen('ุงูููุจูุฉ', 'ุณุคุงู ููุธูุฑุ ุฌุงูุจ ูุจุงุตู ุงูููุจุงูู ุจุณุฑุนุฉ ููู ุฌูุจู. ุงูููุจูุฉ ูุชูุฑูุน ูู ููุช ุนุดูุงุฆูุ ุงููู ูู ุฅูุฏู ุจูุฎุณุฑ!', '๐ฃ', 'ุดุบู ุงููุชูู', 'startBombGame()', 'bg-red-700');
            const game = state.currentGame;
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-red-600 text-white animate-in"><div class="text-center mt-4 mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="text-center mt-4"><p class="text-white/80 font-bold mb-4">ุงููุฆุฉ ุงููุทููุจุฉ:</p><h1 class="text-4xl font-black mb-12">${game.count} ${game.category}</h1></div><div class="flex-1 flex items-center justify-center"><div class="text-9xl mb-8 bomb-pulse">๐ฃ</div></div><p class="text-center mb-8 font-bold text-lg">ุฌุงูุจ ูุจุงุตู ุจุณุฑุนุฉ!</p><button onclick="passBomb()" class="w-full py-6 bg-white text-red-700 rounded-2xl font-black text-2xl shadow-xl active:scale-95 transition">ุจุงุตู ุงูููุจูุฉ! ๐จ</button></div>`;
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-black text-white text-center animate-in"><div class="text-9xl mb-6">๐ฅ</div><h2 class="text-4xl font-black text-red-500 mb-4">ุจููููู!</h2><p class="text-xl mb-2">ุงููุงุนุจ: <span class="font-bold text-yellow-300">${game.player.name}</span></p><p class="text-lg mb-8 opacity-80">ุชู ุฎุตู ููุทุฉ (-1)</p><button onclick="startBombGame()" class="w-full py-4 bg-red-700 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- TABOO ---
        function startTabooGame() {
            const card = TABOO_DATA[Math.floor(Math.random() * TABOO_DATA.length)];
            const player = getFairPlayer();
            state.currentGame = { type: 'taboo', phase: 'prepare', card, player, revealed: false, timeLeft: 60, score: 0 };
            playSound('click');
            render();
        }
        function startTabooRound() {
            state.currentGame.phase = 'playing';
            state.currentGame.revealed = true;
            playSound('click');
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                const timerEl = document.getElementById('game-timer');
                if (timerEl) timerEl.innerText = getTimer(state.currentGame.timeLeft);
                if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); render(); }
                else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
        }
        function tabooCorrect() { state.currentGame.score++; playSound('success'); nextTabooCard(); }
        function tabooSkip() { playSound('click'); nextTabooCard(); }
        function tabooFail() { state.currentGame.score--; playSound('fail'); nextTabooCard(); }
        function nextTabooCard() { 
            state.currentGame.card = TABOO_DATA[Math.floor(Math.random() * TABOO_DATA.length)]; 
            // Don't re-render whole layout, just content ideally, but render() is fast enough now
            render(); 
        }
        function renderTabooSetup() {
            if (!state.currentGame || state.currentGame.type !== 'taboo') return renderGameStartScreen('ุฃูุนู ุชููููุง', 'ุงุดุฑุญ ุงููููุฉ ุงููู ููู ูู ุบูุฑ ูุง ุชููู ุฃู ูููุฉ ูู ุงูููููุนุงุช ุงููู ุชุญุชูุง!', '๐ซ', 'ุงุจุฏุฃ ุงูุชุญุฏู', 'startTabooGame()', 'bg-rose-900');
            const game = state.currentGame;
            if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-900 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-rose-950 z-10 flex items-center justify-center cursor-pointer hover:bg-rose-900 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงููููุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ุงููููุฉ ุงููุทููุจุฉ:</p><h2 class="text-3xl font-bold text-yellow-300">${game.card.word}</h2></div><button onclick="startTabooRound()" class="w-full py-4 bg-white text-rose-900 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุฌุงูุฒ! ุงุจุฏุฃ</button></div>`;
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mb-4"><h2 class="text-slate-500">ุงูุฏูุฑ ุนูู: <span class="font-bold text-rose-600 text-lg">${game.player.name}</span></h2></div><div class="text-center flex justify-between items-center mb-6"><div class="text-xl font-bold text-rose-900">ุงูููุงุท: ${game.score}</div><div class="text-3xl font-black text-rose-600" id="game-timer">${getTimer(game.timeLeft)}</div></div><div class="flex-1 flex flex-col items-center"><div class="w-full bg-rose-50 border-2 border-rose-200 rounded-2xl p-6 text-center mb-4"><h1 class="text-4xl font-black text-rose-900 mb-6">${game.card.word}</h1><div class="bg-white rounded-xl p-4 shadow-inner"><p class="text-sm text-red-500 font-bold mb-3">๐ซ ููููุน ุชููู:</p>${game.card.taboo.map(t => `<div class="text-lg font-bold text-slate-700 border-b border-slate-100 last:border-0 py-1">${t}</div>`).join('')}</div></div></div><div class="grid grid-cols-3 gap-2 h-20"><button onclick="tabooFail()" class="bg-red-600 text-white rounded-xl font-bold text-lg">ุบูุทุฉ</button><button onclick="tabooSkip()" class="bg-slate-500 text-white rounded-xl font-bold text-lg">ุชุฎุทู</button><button onclick="tabooCorrect()" class="bg-green-600 text-white rounded-xl font-bold text-lg">ุตุญ</button></div></div>`;
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฎูุต ุงูููุช!</h2><div class="text-6xl font-black text-yellow-300 mb-4">${game.score}</div><p class="text-xl mb-8">ููุทุฉ</p><button onclick="startTabooGame()" class="w-full py-4 bg-rose-700 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- STORY ---
        function startStoryGame() { 
            const story = STORY_DATA[Math.floor(Math.random() * STORY_DATA.length)]; 
            const currentPlayer = getFairPlayer();
            state.currentGame = { type: 'story', phase: 'ready', story, revealed: false, timeLeft: 60, currentPlayer, playerIndex: 0 }; 
            playSound('click'); 
            render(); 
        }
        function startStoryRound() { 
            state.currentGame.phase = 'playing'; 
            state.currentGame.revealed = true; 
            playSound('click'); 
            render(); 
            if (gameInterval) clearInterval(gameInterval); 
            gameInterval = setInterval(() => { 
                state.currentGame.timeLeft--; 
                const t = document.getElementById('game-timer'); 
                if(t) t.innerText = state.currentGame.timeLeft; 
                if (state.currentGame.timeLeft <= 0) { 
                    clearInterval(gameInterval); 
                    state.currentGame.phase = 'result'; 
                    playSound('fail'); 
                    render(); 
                } else if (state.currentGame.timeLeft <= 10) playSound('tick'); 
            }, 1000); 
        }
        function storyNextPlayer() {
            // ุงูุชูู ููุงุนุจ ุงูุชุงูู
            state.currentGame.playerIndex = (state.currentGame.playerIndex + 1) % state.players.length;
            state.currentGame.currentPlayer = state.players[state.currentGame.playerIndex];
            render();
        }
        function storySuccess() { 
            // ุงูููุทุฉ ููุงุนุจ ุงูุญุงูู
            if(state.currentGame.currentPlayer) updateScore(state.currentGame.currentPlayer.id, false, 1); 
            startStoryGame(); 
        }
        function storyFail() { 
            if (state.daresEnabled) showDare(); 
            startStoryGame(); 
        }
        function renderStorySetup() { 
            if (!state.currentGame || state.currentGame.type !== 'story') return renderGameStartScreen('ุญูุงูุฉ ูู ูููุชูู', 'ุจุฏุงูุฉ ูุตุฉ ูููุงูุฉ ุฅุฌุจุงุฑูุฉ. ูู ูุงุญุฏ ูููู ูููุฉ ูุงุญุฏุฉ ุจุณ ุนุดุงู ุชูุตููุง ููููุงูุฉ ุฏู ูู ุฎูุงู 60 ุซุงููุฉ!', '๐', 'ุงูุชุญ ุงููุชุงุจ', 'startStoryGame()', 'bg-amber-600'); 
            const game = state.currentGame; 
            if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-700 text-white text-center animate-in"><div class="text-6xl mb-6">๐</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒูู ููุชุฃูููุ</h2><div onclick="startStoryRound()" class="w-full py-8 bg-white text-amber-900 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-amber-50 transition border-4 border-amber-200">ุฏูุณ ูุงูุดู ุงููุตุฉ</div></div>`; 
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mb-4"><h2 class="text-slate-500">ุงูุฏูุฑ ุนูู: <span class="font-bold text-amber-600 text-lg">${game.currentPlayer ? game.currentPlayer.name : 'ูุงุนุจ'}</span></h2></div><div class="flex-1 flex flex-col justify-center space-y-6"><div class="bg-amber-50 p-6 rounded-2xl border-l-4 border-amber-500"><p class="text-sm text-amber-600 font-bold mb-2">ุงูุจุฏุงูุฉ:</p><h1 class="text-2xl font-bold text-slate-800 leading-relaxed">"${game.story.start}"</h1></div><div class="bg-amber-50 p-6 rounded-2xl border-l-4 border-red-500"><p class="text-sm text-red-600 font-bold mb-2">ุงูููุงูุฉ ุงูุฅุฌุจุงุฑูุฉ:</p><h1 class="text-2xl font-black text-slate-800">"${game.story.end}"</h1></div><div class="text-center mt-4"><div class="text-6xl font-black text-amber-600" id="game-timer">${game.timeLeft}</div></div></div><div class="space-y-3 mt-auto"><button onclick="storySuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ูุตูุชูุง ููููุงูุฉ!</button><button onclick="storyNextPlayer()" class="w-full py-3 bg-blue-500 text-white rounded-xl font-bold">ุงูุชุงูู (ุฏูุฑ ุฌุฏูุฏ)</button><button onclick="storyFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ุงูููุช ุฎูุต (ุนูุงุจ)</button></div></div>`; 
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุงูุชูุช ุงููุตุฉ!</h2><button onclick="startStoryGame()" class="w-full py-4 bg-amber-600 rounded-xl font-bold text-xl mb-3">ูุตุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
        }

        // --- MORPH ---
        function startMorphGame() { 
            const word = MORPH_DATA[Math.floor(Math.random() * MORPH_DATA.length)]; 
            const startingPlayer = getFairPlayer(); // ูุงุนุจ ุนุดูุงุฆู ููุจุฏุงูุฉ
            state.currentGame = { type: 'morph', phase: 'ready', word, timeLeft: 45, startingPlayer, losers: [] }; 
            playSound('click'); 
            render(); 
        }
        function startMorphRound() { 
            state.currentGame.phase = 'playing'; 
            playSound('click'); 
            render(); 
            if (gameInterval) clearInterval(gameInterval); 
            gameInterval = setInterval(() => { 
                state.currentGame.timeLeft--; 
                const t = document.getElementById('game-timer'); 
                if(t) t.innerText = state.currentGame.timeLeft; 
                if (state.currentGame.timeLeft <= 0) { 
                    clearInterval(gameInterval); 
                    state.currentGame.phase = 'result'; 
                    playSound('fail'); 
                    render(); 
                } else if (state.currentGame.timeLeft <= 10) playSound('tick'); 
            }, 1000); 
        }
        function toggleMorphLoser(playerId) {
            if (!state.currentGame.losers) state.currentGame.losers = [];
            const index = state.currentGame.losers.indexOf(playerId);
            if (index > -1) {
                state.currentGame.losers.splice(index, 1);
            } else {
                state.currentGame.losers.push(playerId);
            }
            render();
        }
        function morphConfirmResult() {
            // ูู ุฎุงุณุฑ ูุชุฎุตู ููู (-1)
            state.currentGame.losers.forEach(loserId => {
                updateScore(loserId, false, -1);
            });
            // ุงููุงุนุจ ุงููุญูุฏ ุงููู ูุชูุด ุงุฎุชูุงุฑู ูุฎุงุณุฑ ูุงุฎุฏ (+2)
            const allPlayerIds = state.players.map(p => p.id);
            const winners = allPlayerIds.filter(id => !state.currentGame.losers.includes(id));
            if (winners.length === 1) {
                updateScore(winners[0], false, 2);
            }
            startMorphGame();
        }
        function renderMorphSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'morph') return renderGameStartScreen('ุงููููุฉ ุงููุชุญููุฉ', 'ูููุฉ ูุชุธูุฑ. ูู ูุงุนุจ ูุบูุฑ ุญุฑู ูุงุญุฏ ุจุณ ุนุดุงู ูุนูู ูููุฉ ุฌุฏูุฏุฉ ูููุง ูุนูู. ูู ุญุฏ ููู ุฃู ุงูููุช ุฎูุต ุจูุฎุณุฑ!', '๐ค', 'ูุงุช ุงููููุฉ', 'startMorphGame()', 'bg-cyan-700'); 
            const game = state.currentGame; 
            if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-700 text-white text-center animate-in"><div class="text-6xl mb-6">๐ฒ</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒูู ููุชุบููุฑุ</h2><div class="mb-4"><p class="text-lg opacity-80 mb-2">ุงูุฏูุฑ ุนูู:</p><h3 class="text-2xl font-bold text-yellow-300">${game.startingPlayer ? game.startingPlayer.name : 'ูุงุนุจ'}</h3></div><div onclick="startMorphRound()" class="w-full py-8 bg-white text-cyan-900 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-cyan-50 transition border-4 border-cyan-200">ุฏูุณ ูุงูุดู ุงููููุฉ</div></div>`; 
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mb-4"><h2 class="text-slate-500">ุงูุฏูุฑ ุนูู: <span class="font-bold text-cyan-600 text-lg">${game.startingPlayer ? game.startingPlayer.name : 'ูุงุนุจ'}</span></h2></div><div class="flex-1 flex flex-col justify-center items-center text-center"><p class="text-lg text-slate-500 mb-4">ูููุฉ ุงูุจุฏุงูุฉ:</p><div class="bg-cyan-100 p-8 rounded-3xl w-full mb-8 shadow-inner"><h1 class="text-5xl font-black text-cyan-800 tracking-widest">${game.word}</h1></div><div class="text-8xl font-black text-cyan-600" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3 mt-auto"><button onclick="morphSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ูุฌุญ (+1 ููุทุฉ)</button><button onclick="morphFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ูุดู</button></div></div>`; 
            if (game.phase === 'result') {
                if (!game.losers) game.losers = [];
                return `<div class="h-screen flex flex-col p-6 bg-cyan-900 text-white"><h2 class="text-3xl font-bold mb-6 text-center">ุงูุฌููุฉ ุฎูุตุช!</h2><p class="text-lg mb-4 text-center opacity-80">ููู ุงููู ุฎุณุฑูุงุ (ุงุฎุชุฑ ูู ุงูุฎุงุณุฑูู)</p><div class="flex-1 overflow-y-auto mb-4">${state.players.map(p => `<label class="flex items-center p-4 bg-white/10 rounded-xl mb-2 cursor-pointer hover:bg-white/20 transition"><input type="checkbox" ${game.losers.includes(p.id) ? 'checked' : ''} onchange="toggleMorphLoser(${p.id})" class="w-6 h-6 mr-3"><span class="text-xl font-bold">${p.name}</span></label>`).join('')}</div><button onclick="morphConfirmResult()" class="w-full py-4 bg-cyan-600 rounded-xl font-bold text-xl mb-3">ุชุฃููุฏ ุงููุชูุฌุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
            }
        }

        // --- ARTIST ---
        function startArtistGame() { if (state.players.length < 2) { alert("ูุญุชุงุฌูู ูุงุนุจูู ุนูู ุงูุฃูู!"); return; } const word = ARTIST_DATA[Math.floor(Math.random() * ARTIST_DATA.length)]; const artist = getFairPlayer(); let guesser = state.players[Math.floor(Math.random() * state.players.length)]; while (guesser.id === artist.id) guesser = state.players[Math.floor(Math.random() * state.players.length)]; state.currentGame = { type: 'artist', phase: 'setup', word, artist, guesser, timeLeft: 60, revealed: false }; playSound('click'); render(); }
        function revealArtistWord() { state.currentGame.revealed = true; playSound('click'); render(); }
        function startArtistDrawing() { state.currentGame.phase = 'drawing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); render(); } else if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function artistSuccess() { updateScore(state.currentGame.guesser.id, false, 1); updateScore(state.currentGame.artist.id, false, 1); startArtistGame(); }
        function renderArtistSetup() { if (!state.currentGame || state.currentGame.type !== 'artist') return renderGameStartScreen('ุงูุฑุณุงู ุงูุฃุนูู', 'ุงูุฑุณุงู ูุดูู ุงููููุฉ. ุงููุงุนุจ ุงูุชุงูู ูุญุท ุงูููุจุงูู ุนูู ุฑุงุณู ุฃู ููุจุตุด. ุงูุฑุณุงู ูุฑุณูุ ูุงูุชุงูู ูุฎูู ูู ูุตู ุงููุงุณ ููุฑุณูุฉ!', '๐จ', 'ุงุจุฏุฃ ุงููู', 'startArtistGame()', 'bg-fuchsia-600'); const game = state.currentGame; if (game.phase === 'setup') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-fuchsia-800 text-white text-center animate-in"><h2 class="text-2xl font-bold mb-4">ูุง <span class="text-yellow-300">${game.artist.name}</span></h2><p class="mb-8">ุฎุฏ ุงูููุจุงูู ููุณูู ูููุณ!</p><div class="bg-white/20 p-8 rounded-3xl mb-8 border border-white/30 relative overflow-hidden">${!game.revealed ? `<div onclick="revealArtistWord()" class="absolute inset-0 bg-fuchsia-900 z-10 flex items-center justify-center cursor-pointer hover:bg-fuchsia-800 transition"><span class="text-xl font-bold animate-pulse">ุงุถุบุท ูููุดู</span></div>` : ''}<p class="text-sm opacity-75 mb-2">ูุทููุจ ุชุฑุณู:</p><h1 class="text-4xl font-black">${game.revealed ? game.word : 'ุุุ'}</h1></div><p class="mb-4 text-sm opacity-80">ุฏูููุชู ุฎุจู ุงููููุฉ ูุงุฏู ุงูููุจุงูู ูู ${game.guesser.name}</p><button onclick="startArtistDrawing()" class="w-full py-4 bg-white text-fuchsia-900 rounded-xl font-bold text-xl shadow-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ููุง ูุฑุณู!</button></div>`; if (game.phase === 'drawing') return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mt-4 mb-4"><h2 class="text-slate-500">ุงูุฑุณุงู: <span class="font-bold text-fuchsia-600">${game.artist.name}</span></h2><h2 class="text-slate-500">ุจูุฎูู: <span class="font-bold text-fuchsia-600">${game.guesser.name}</span></h2></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-9xl font-black text-fuchsia-600 mb-8" id="game-timer">${game.timeLeft}</div><p class="text-center text-slate-600 px-4">ุงูุฑุณุงู ุจูุฑุณู ุฏูููุช.. ูุงููุงุณ ุจุชูุตู ุงูุฑุณูุฉ (ูู ุบูุฑ ูุง ูููููุง ุงููููุฉ!)</p></div><div class="space-y-3 mt-auto"><button onclick="artistSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุนุฑููุง!</button><button onclick="state.currentGame.phase='result'; render()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ูุนุฑูุด</button></div></div>`; if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-fuchsia-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฎูุต ุงูููุช!</h2><p class="mb-4 text-xl">ุงููููุฉ ูุงูุช: <span class="text-yellow-300 font-bold">${game.word}</span></p><button onclick="startArtistGame()" class="w-full py-4 bg-fuchsia-600 rounded-xl font-bold text-xl mb-3">ุฑุณูุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; }

        // --- WHISPER ---
        function startWhisperGame() { if (state.players.length < 2) { alert("ูุญุชุงุฌูู ูุงุนุจูู ุนูู ุงูุฃูู!"); return; } const phrase = WHISPER_DATA[Math.floor(Math.random() * WHISPER_DATA.length)]; const listener = getFairPlayer(); let speakerIndex = Math.floor(Math.random() * state.players.length); while (state.players[speakerIndex].id === listener.id) speakerIndex = Math.floor(Math.random() * state.players.length); state.currentGame = { type: 'whisper', phase: 'setup', phrase: phrase, listener, speaker: state.players[speakerIndex], timeLeft: 60, revealed: false }; playSound('click'); render(); }
        function startWhisperRound() { state.currentGame.phase = 'playing'; state.currentGame.revealed = true; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); render(); } else if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function whisperSuccess() { updateScore(state.currentGame.listener.id, false, 1); startWhisperGame(); }
        function whisperFail() { if (state.daresEnabled) showDare(); startWhisperGame(); }
        function renderWhisperSetup() { if (!state.currentGame || state.currentGame.type !== 'whisper') return renderGameStartScreen('ุฅูุฑุฃ ุดูุงููู', 'ูุงุญุฏ ููุจุณ ุณูุงุนุฉ ูููุง ุฃุบููุฉ ุจุตูุช ุนุงููุ ูุงูุชุงูู ููุฑุฃ ุฌููุฉ ุนุดูุงุฆูุฉ. ุญุงูู ุชุฎูู ุงูุฌููุฉ ูู ุญุฑูุฉ ุงูุดูุงูู!', '๐ง', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startWhisperGame()', 'bg-pink-500'); const game = state.currentGame; if (game.phase === 'setup') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-600 text-white text-center animate-in"><div class="mb-8"><p class="text-lg opacity-80">ููุจุณ ุงูุณูุงุนุฉ:</p><h1 class="text-4xl font-black text-yellow-300 mb-4">${game.listener.name}</h1><div class="w-full h-1 bg-white/20 rounded-full mb-4"></div><p class="text-lg opacity-80">ููุฑุฃ ุงูุฌููุฉ:</p><h1 class="text-3xl font-bold">${game.speaker.name}</h1></div><div class="bg-white/10 p-6 rounded-2xl border border-white/20 mb-8"><p class="text-sm">ูุง ${game.listener.name}ุ ุนูู ุงูุตูุช ุนุงูุงุฎุฑ! ๐ต</p></div><button onclick="startWhisperRound()" class="w-full py-4 bg-white text-pink-700 rounded-xl font-bold text-xl shadow-xl">ุฌุงูุฒูู! ุงูุดู ุงูุฌููุฉ</button></div>`; } if (game.phase === 'playing') { return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mt-4 mb-8"><h2 class="text-slate-500 text-sm">ุงููุชุญุฏุซ: <span class="font-bold text-pink-600 text-lg">${game.speaker.name}</span></h2></div><div class="flex-1 flex flex-col items-center justify-center"><div class="text-9xl font-black text-pink-600 mb-8" id="game-timer">${game.timeLeft}</div><div class="bg-pink-50 p-6 rounded-2xl border-2 border-pink-100 w-full text-center"><p class="text-sm text-pink-400 mb-2">ุงูุฌููุฉ ูู:</p><h1 class="text-2xl font-bold text-slate-800 leading-relaxed">${game.phrase}</h1></div></div><div class="space-y-3 mt-auto"><button onclick="whisperSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุนุฑููุง! (+ููุทุฉ)</button><button onclick="whisperFail()" class="w-full py-3 bg-slate-200 text-slate-600 rounded-xl font-bold">ูุนุฑูุด (ุชุฎุทู)</button></div></div>`; } if (game.phase === 'result') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฎูุต ุงูููุช!</h2><p class="text-xl mb-8">ุงูุฌููุฉ ูุงูุช: <br><span class="text-yellow-300 font-bold">${game.phrase}</span></p><button onclick="startWhisperGame()" class="w-full py-4 bg-pink-600 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; } }

        // --- NEVER ---
        function startNeverGame() { const statement = NEVER_DATA[Math.floor(Math.random() * NEVER_DATA.length)]; state.currentGame = { type: 'never', phase: 'ready', statement: statement, revealed: false }; playSound('click'); render(); }
        function revealNeverCard() { state.currentGame.phase = 'playing'; state.currentGame.revealed = true; playSound('click'); render(); }
        function neverScoreSelect() { state.currentGame.phase = 'scoring'; render(); }
        function renderNeverSetup() { if (!state.currentGame || state.currentGame.type !== 'never') return renderGameStartScreen('ุฃูุง ุนูุฑู ูุง', 'ุงุฑูุนูุง 5 ุฃุตุงุจุน. ุฌููุฉ ูุชุธูุฑุ ูู ุนููุช ุงูุญุงุฌุฉ ุฏู ูุจู ูุฏูุ ูุฒู ุตุจุงุน. ุขุฎุฑ ูุงุญุฏ ููุถู ุฑุงูุน ุตุจุงุนู ูู ุงููุณุจุงู!', 'โ', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startNeverGame()', 'bg-rose-800'); const game = state.currentGame; if (game.phase === 'ready') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-800 text-white text-center animate-in"><div class="text-6xl mb-6">โ</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒููุ</h2><p class="text-lg opacity-80 mb-8">ุงุฑูุนูุง ุฅูุฏููู (5 ุฃุตุงุจุน) ุฏูููุชู!</p><div onclick="revealNeverCard()" class="w-full py-8 bg-white text-rose-900 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-rose-50 transition border-4 border-rose-200">ุฏูุณ ูุงูุดู ุงููุงุฑุช</div></div>`; } if (game.phase === 'playing') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-800 text-white text-center animate-in"><p class="text-xl font-bold opacity-75 mb-4">ุฃูุง ุนูุฑู ูุง...</p><div class="bg-white text-slate-900 p-8 rounded-3xl w-full mb-8 shadow-2xl"><h1 class="text-3xl font-black leading-relaxed">${game.statement}</h1></div><div class="w-full space-y-3"><button onclick="startNeverGame()" class="w-full py-4 bg-yellow-500 text-rose-900 rounded-xl font-bold text-xl shadow-lg">ุงููุงุฑุช ุงููู ุจุนุฏู</button><button onclick="neverScoreSelect()" class="w-full py-3 bg-rose-900/50 text-white border border-rose-400 rounded-xl font-bold">ุชูุฒูุน ููุงุท (ุงุฎุชูุงุฑู)</button><button onclick="goHome()" class="w-full py-3 bg-transparent text-rose-200 font-bold">ุฎุฑูุฌ</button></div></div>`; } if (game.phase === 'scoring') { return `<div class="h-screen flex flex-col p-6 bg-rose-900 text-white text-center"><h2 class="text-2xl font-bold mb-6">ููู ูุณุชุญู ุงูููุทุฉุ</h2><div class="grid grid-cols-2 gap-3 w-full mb-8 flex-1 overflow-y-auto content-start">${state.players.map(p => `<button onclick="updateScore(${p.id}, false, 1); startNeverGame()" class="p-4 bg-white/10 border border-white/20 rounded-xl font-bold hover:bg-white/20">${p.name}</button>`).join('')}</div><button onclick="startNeverGame()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุชุฎุทู (ุจุฏูู ููุงุท)</button></div>`; } }

        // --- DEBATE ---
        function startDebateGame() { if (state.players.length < 2) { alert("ูุญุชุงุฌูู ูุงุนุจูู ุนูู ุงูุฃูู!"); return; } const topic = DEBATE_DATA[Math.floor(Math.random() * DEBATE_DATA.length)]; const p1 = getFairPlayer(); let p2 = state.players[Math.floor(Math.random() * state.players.length)]; while (p2.id === p1.id) p2 = state.players[Math.floor(Math.random() * state.players.length)]; state.currentGame = { type: 'debate', phase: 'assign', topic, p1, p2, timeLeft: 60, revealed: false }; playSound('click'); render(); }
        function startDebateRound() { state.currentGame.phase = 'playing'; state.currentGame.revealed = true; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'voting'; playSound('fail'); render(); } else if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function endDebateEarly() { if (gameInterval) clearInterval(gameInterval); state.currentGame.phase = 'voting'; playSound('fail'); render(); }
        function debateVote(winnerId) { updateScore(winnerId, false, 1); state.currentGame.phase = 'result'; render(); }
        function renderDebateSetup() { if (!state.currentGame || state.currentGame.type !== 'debate') return renderGameStartScreen('ูุญููุฉ', 'ููุถูุน ุฌุฏูู ุชุงูู ููุทูุน. ุงููุนุจุฉ ูุชุฎุชุงุฑ "ูุญุงูู" ู "ููุงุจุฉ". ูู ูุงุญุฏ ูุนุงู ุฏูููุฉ ูููุน ุงููุนุฏุฉ ุจูุฌูุฉ ูุธุฑู!', 'โ๏ธ', 'ุงุจุฏุฃ ุงูุฌูุณุฉ', 'startDebateGame()', 'bg-amber-700'); const game = state.currentGame; if (game.phase === 'assign') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-800 text-white text-center animate-in"><h2 class="text-3xl font-bold mb-8">ุฃุทุฑุงู ุงููุถูุฉ</h2><div class="w-full bg-white/10 p-4 rounded-xl mb-4 border-r-4 border-green-400"><p class="text-sm opacity-75">ูุน ุงูููุถูุน (ุฏูุงุน)</p><h1 class="text-2xl font-black">${game.p1.name}</h1></div><div class="text-2xl font-bold mb-4">VS</div><div class="w-full bg-white/10 p-4 rounded-xl mb-8 border-r-4 border-red-400"><p class="text-sm opacity-75">ุถุฏ ุงูููุถูุน (ููุงุจุฉ)</p><h1 class="text-2xl font-black">${game.p2.name}</h1></div><button onclick="startDebateRound()" class="w-full py-4 bg-white text-amber-900 rounded-xl font-bold text-xl shadow-xl">ุงูุดู ุงููุถูุฉ ูุงุจุฏุฃ</button></div>`; } if (game.phase === 'playing') { return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mt-4 mb-4"><h2 class="text-slate-500 font-bold">ุงููุถูุฉ ุฑูู #99</h2></div><div class="bg-amber-50 p-6 rounded-2xl border-2 border-amber-100 w-full text-center mb-6 shadow-sm"><h1 class="text-2xl font-black text-slate-800 leading-relaxed">${game.topic}</h1></div><div class="flex-1 flex justify-center items-center"><div class="text-9xl font-black text-amber-600" id="game-timer">${game.timeLeft}</div></div><div class="flex justify-between gap-4 mt-auto mb-4"><div class="text-center w-1/2"><div class="font-bold text-green-600 mb-1">ูุน</div><div class="p-2 bg-green-50 rounded-lg font-bold text-sm">${game.p1.name}</div></div><div class="text-center w-1/2"><div class="font-bold text-red-600 mb-1">ุถุฏ</div><div class="p-2 bg-red-50 rounded-lg font-bold text-sm">${game.p2.name}</div></div></div><button onclick="endDebateEarly()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold text-lg shadow-lg">ุฅููุงุก ุงูุฌูุณุฉ ููุฑุงู</button></div>`; } if (game.phase === 'voting') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-900 text-white text-center animate-in"><div class="text-6xl mb-6">๐จโโ๏ธ</div><h2 class="text-3xl font-bold mb-8">ุญูู ุงููุญููุฉ!</h2><p class="text-lg opacity-80 mb-6">ููู ุฃููุนูู ุฃูุชุฑุ</p><div class="w-full space-y-4"><button onclick="debateVote(${game.p1.id})" class="w-full py-4 bg-green-600 text-white rounded-xl font-bold text-xl shadow-lg hover:bg-green-700">${game.p1.name} (ูุน)</button><button onclick="debateVote(${game.p2.id})" class="w-full py-4 bg-red-600 text-white rounded-xl font-bold text-xl shadow-lg hover:bg-red-700">${game.p2.name} (ุถุฏ)</button></div></div>`; } if (game.phase === 'result') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุชู ุงูุญูู!</h2><p class="mb-8">ุชู ุฅุถุงูุฉ ุงูููุทุฉ ูููุงุฆุฒ.</p><button onclick="startDebateGame()" class="w-full py-4 bg-amber-600 rounded-xl font-bold text-xl mb-3">ูุถูุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; } }

        // --- HEADS UP (FIXED) ---
        function startHeadsUpGame(category) {
            const words = HEADS_UP_DATA[category];
            const player = getFairPlayer();
            state.currentGame = {
                type: 'heads_up',
                phase: 'ready_check',
                category: category,
                pool: [...words],
                currentWord: null,
                score: 0,
                timeLeft: 60,
                skipped: 0,
                currentPlayer: player,
                wordHidden: true
            };
            playSound('click');
            render();
        }

        function headsUpReady() {
            const words = state.currentGame.pool;
            state.currentGame.currentWord = words[Math.floor(Math.random() * words.length)];
            state.currentGame.phase = 'playing';
            state.currentGame.wordHidden = true;
            playSound('click');
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                const t = document.getElementById('hu-timer');
                if(t) t.innerText = state.currentGame.timeLeft;
                if (state.currentGame.timeLeft <= 0) {
                    clearInterval(gameInterval);
                    updateScore(state.currentGame.currentPlayer.id, false, state.currentGame.score);
                    state.currentGame.phase = 'result';
                    playSound('fail');
                    render();
                } else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
        }

        function revealHeadsUpWord() {
            state.currentGame.wordHidden = false;
            playSound('click');
            render();
        }

        function headsUpCorrect() {
            state.currentGame.score++;
            playSound('success');
            // ุณุฌู ุงูููุทุฉ ููุงุนุจ ุงูุญุงูู
            updateScore(state.currentGame.currentPlayer.id, false, 1);
            // ุงูุชูู ููุงุนุจ ุงูุชุงูู
            const nextPlayer = getFairPlayer();
            state.currentGame.currentPlayer = nextPlayer;
            state.currentGame.score = 0; // ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุท ููุงุนุจ ุงูุฌุฏูุฏ
            state.currentGame.skipped = 0;
            headsUpNextWord();
        }

        function headsUpPass() {
            state.currentGame.skipped++;
            playSound('fail');
            // ุงูุชูู ููุงุนุจ ุงูุชุงูู
            const nextPlayer = getFairPlayer();
            state.currentGame.currentPlayer = nextPlayer;
            state.currentGame.score = 0; // ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุท ููุงุนุจ ุงูุฌุฏูุฏ
            state.currentGame.skipped = 0;
            headsUpNextWord();
        }

        function headsUpNextWord() {
            const words = state.currentGame.pool;
            state.currentGame.currentWord = words[Math.floor(Math.random() * words.length)];
            state.currentGame.wordHidden = true;
            // ุฅุนุงุฏุฉ ุชุนููู ุงูููุช ููุงุนุจ ุงูุฌุฏูุฏ
            state.currentGame.timeLeft = 60;
            // ุฅุนุงุฏุฉ ุชุดุบูู ุงููุคูุช
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                const t = document.getElementById('hu-timer');
                if(t) t.innerText = state.currentGame.timeLeft;
                if (state.currentGame.timeLeft <= 0) {
                    clearInterval(gameInterval);
                    updateScore(state.currentGame.currentPlayer.id, false, state.currentGame.score);
                    state.currentGame.phase = 'result';
                    playSound('fail');
                    render();
                } else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
            render();
        }

        function renderHeadsUpSetup() {
            if (!state.currentGame || state.currentGame.type !== 'heads_up') {
                const categories = Object.keys(HEADS_UP_DATA);
                return `
                    <div class="p-6 h-screen flex flex-col bg-blue-50">
                        ${header('๐คฏ ุนูู ุฑุงุณู', 'home')}
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">๐คฏ</div>
                            <h3 class="font-bold text-blue-800 mb-2">ุงุฎุชุงุฑ ุงููุณู:</h3>
                        </div>
                        <div class="grid grid-cols-2 gap-3 flex-1 overflow-y-auto content-start">
                            ${categories.map(cat => `
                                <button onclick="startHeadsUpGame('${cat}')" class="p-4 rounded-xl font-bold bg-white border-2 border-blue-100 text-blue-600 hover:bg-blue-600 hover:text-white transition shadow-sm">
                                    ${cat}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            const game = state.currentGame;

            if (game.phase === 'ready_check') {
                return `
                    <div class="h-screen flex flex-col items-center justify-center p-6 bg-blue-600 text-white text-center animate-in">
                        <p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p>
                        <h1 class="text-5xl font-black mb-10 text-yellow-300">${game.currentPlayer.name}</h1>
                        <div class="bg-white/10 p-6 rounded-2xl mb-8 border border-white/20">
                            <p class="text-lg">ุญุท ุงูููุจุงูู ุนูู ุฌุจูุชู ๐ฒ</p>
                            <p class="text-sm opacity-75 mt-2">ุฎูู ุงูุดุงุดุฉ ูุงุญูุฉ ุตุญุงุจู</p>
                        </div>
                        <button onclick="headsUpReady()" class="w-full py-4 bg-white text-blue-700 rounded-xl font-bold text-2xl shadow-xl">
                            ุฌุงูุฒ! ุงุจุฏุฃ
                        </button>
                    </div>
                `;
            }

            if (game.phase === 'playing') {
                return `
                    <div class="h-screen flex flex-col p-4 bg-blue-600">
                        <!-- Header -->
                        <div class="flex justify-between items-center mb-4 text-white">
                            <div class="font-bold text-lg">${game.currentPlayer.name}</div>
                            <div class="text-4xl font-black text-yellow-300" id="hu-timer">${game.timeLeft}</div>
                            <button onclick="goHome()" class="bg-red-500/80 px-4 py-1 rounded-lg text-sm">ุฅููุงุก</button>
                        </div>

                        <!-- Main Card Area -->
                        <div class="flex-1 flex items-center justify-center relative mb-4">
                            <div onclick="revealHeadsUpWord()" class="w-full h-full bg-white rounded-3xl shadow-2xl flex items-center justify-center cursor-pointer relative overflow-hidden">
                                ${game.wordHidden ? `
                                    <div class="text-center animate-pulse">
                                        <div class="text-8xl text-blue-200 font-black mb-4">?</div>
                                        <p class="text-blue-500 font-bold text-xl">ุฏูุณ ุนุดุงู ุชุธูุฑ ุงููููุฉ</p>
                                    </div>
                                ` : `
                                    <!-- Rotated Text Container -->
                                    <div class="rotate-90-text text-center w-[200vh]">
                                        <h1 class="text-6xl md:text-8xl font-black text-slate-800 leading-tight">
                                            ${game.currentWord}
                                        </h1>
                                    </div>
                                `}
                            </div>
                        </div>

                        <!-- Controls (Standard Buttons) -->
                        <div class="grid grid-cols-2 gap-4 h-24">
                            <button onclick="headsUpPass()" class="bg-red-500 hover:bg-red-600 text-white rounded-2xl text-xl font-bold flex flex-col items-center justify-center shadow-lg active:scale-95 transition">
                                <span>โ</span>
                                <span>ุชุฎุทู</span>
                            </button>
                            <button onclick="headsUpCorrect()" class="bg-green-500 hover:bg-green-600 text-white rounded-2xl text-xl font-bold flex flex-col items-center justify-center shadow-lg active:scale-95 transition">
                                <span>โ</span>
                                <span>ุนุฑููุง</span>
                            </button>
                        </div>
                    </div>
                `;
            }

            if (game.phase === 'result') {
                return `
                    <div class="h-screen flex flex-col items-center justify-center p-6 bg-blue-900 text-white text-center animate-in">
                        <h2 class="text-3xl font-bold mb-2">ุฎูุต ุงูููุช!</h2>
                        <h1 class="text-4xl font-black text-yellow-300 mb-6">${game.currentPlayer.name}</h1>
                        
                        <div class="grid grid-cols-2 gap-4 w-full mb-8">
                            <div class="bg-green-500/20 p-4 rounded-xl border border-green-500/50">
                                <div class="text-4xl font-black text-green-400">${game.score}</div>
                                <div class="text-sm opacity-80">ุฅุฌุงุจุฉ ุตุญ</div>
                            </div>
                            <div class="bg-red-500/20 p-4 rounded-xl border border-red-500/50">
                                <div class="text-4xl font-black text-red-400">${game.skipped}</div>
                                <div class="text-sm opacity-80">ุชุฎุทู</div>
                            </div>
                        </div>

                        <button onclick="navigate('home')" class="w-full py-4 bg-yellow-500 text-blue-900 rounded-xl font-bold text-xl shadow-lg mb-3">
                            ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
                        </button>
                        
                        <button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุฎุฑูุฌ</button>
                    </div>
                `;
            }
        }

        // ================== OTHER GAMES ==================
        function startEmojiGame(category) {
            const categoryData = EMOJI_QUIZ_DATA[category] || EMOJI_QUIZ_DATA['ุฃููุงู ุนุฑุจู'];
            const roundData = categoryData[Math.floor(Math.random() * categoryData.length)];
            state.currentGame = { type: 'emoji', phase: 'playing', category, data: roundData, revealed: false }; 
            playSound('click'); 
            render(); 
        }
        function revealEmojiAnswer() { state.currentGame.revealed = true; playSound('click'); render(); }
        function emojiPlayerWins(playerId) { 
            updateScore(playerId, false, 1); 
            startEmojiGame(state.currentGame.category); 
        }
        function emojiSkip() { 
            startEmojiGame(state.currentGame.category); 
        }
        function renderEmojiSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'emoji') {
                const categories = Object.keys(EMOJI_QUIZ_DATA);
                return `
                    <div class="p-6 h-screen flex flex-col bg-yellow-50">
                        ${header('๐งฉ ูู ุงูุฅูููุฌู', 'home')}
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">๐งฉ</div>
                            <h3 class="font-bold text-yellow-800 mb-2">ุงุฎุชุงุฑ ุงููุฆุฉ:</h3>
                        </div>
                        <div class="grid grid-cols-1 gap-3 flex-1 overflow-y-auto content-start">
                            ${categories.map(cat => `
                                <button onclick="startEmojiGame('${cat}')" class="p-4 rounded-xl font-bold bg-white border-2 border-yellow-100 text-yellow-600 hover:bg-yellow-600 hover:text-white transition shadow-sm">
                                    ${cat}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            const game = state.currentGame; 
            return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-yellow-500 text-white text-center animate-in"><div class="bg-white p-8 rounded-3xl shadow-xl w-full mb-8"><div class="text-6xl mb-4 leading-relaxed">${game.data.emojis}</div></div>${!game.revealed ? `<button onclick="revealEmojiAnswer()" class="w-full py-4 bg-slate-800 text-white rounded-xl font-bold text-xl shadow-lg">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button>` : `<div class="mb-8 animate-in w-full"><p class="text-lg text-yellow-900 opacity-80 mb-2">ุงูุฅุฌุงุจุฉ:</p><h2 class="text-4xl font-black text-yellow-900">${game.data.answer}</h2></div><p class="text-lg text-yellow-900 font-bold mb-4">ููู ุงููู ุนุฑู ุงูุญูุ</p><div class="grid grid-cols-2 gap-3 w-full mb-4">${state.players.map(p => `<button onclick="emojiPlayerWins(${p.id})" class="py-3 bg-white text-yellow-600 rounded-xl font-bold text-lg shadow-lg hover:bg-yellow-50">${p.name}</button>`).join('')}</div><button onclick="emojiSkip()" class="w-full py-3 bg-slate-500 text-white rounded-xl font-bold mb-3">ูุญุฏุด ุนุฑู (ุชุฎุทู)</button><button onclick="goHome()" class="w-full py-3 bg-yellow-700 text-white rounded-xl font-bold">ุฎุฑูุฌ</button>`}</div>`; 
        }
        function startLyricsGame() { 
            const roundData = LYRICS_DATA[Math.floor(Math.random() * LYRICS_DATA.length)]; 
            const player = getFairPlayer(); 
            state.currentGame = { type: 'lyrics', phase: 'playing', data: roundData, player, lyricsRevealed: false, answerRevealed: false }; 
            playSound('click'); 
            render(); 
        }
        function revealLyricsText() { 
            state.currentGame.lyricsRevealed = true; 
            playSound('click'); 
            render(); 
        }
        function revealLyricsAnswer() { 
            state.currentGame.answerRevealed = true; 
            playSound('click'); 
            render(); 
        }
        function lyricsPlayerWins(playerId) { 
            updateScore(playerId, false, 1); 
            startLyricsGame(); 
        }
        function lyricsSkip() { 
            startLyricsGame(); 
        }
        function renderLyricsSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'lyrics') return renderGameStartScreen('ููู ุงูุฃุบููุฉ', 'ููุธูุฑ ููุทุน ูู ุฃุบููุฉ ูููู ูููุฉ ูุงูุตุฉ. ููููุง ูุบูููุง ุตุญ!', '๐ค', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startLyricsGame()', 'bg-purple-500'); 
            const game = state.currentGame; 
            if (!game.lyricsRevealed) {
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><p class="mb-4 opacity-80 font-bold">${game.data.singer}</p><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30 relative overflow-hidden"><div class="absolute inset-0 bg-purple-800 blur-md flex items-center justify-center"><span class="text-4xl font-black opacity-50">๐ต</span></div><h2 class="text-2xl font-bold leading-relaxed mb-2 relative z-10" style="filter: blur(8px); user-select: none;">"${game.data.part}"</h2><div class="inline-block px-6 py-2 bg-black/20 rounded-lg mt-2 text-yellow-300 font-black text-2xl relative z-10" style="filter: blur(8px);">${game.data.answer}</div></div><button onclick="revealLyricsText()" class="w-full py-4 bg-white text-purple-700 rounded-xl font-bold text-xl shadow-lg">ูุดู ุงููููุงุช</button></div>`;
            }
            if (!game.answerRevealed) {
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><p class="mb-4 opacity-80 font-bold">${game.data.singer}</p><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h2 class="text-2xl font-bold leading-relaxed mb-2">"${game.data.part}"</h2><div class="inline-block px-6 py-2 bg-black/20 rounded-lg mt-2 text-yellow-300 font-black text-2xl">ุุุุุ</div></div><button onclick="revealLyricsAnswer()" class="w-full py-4 bg-white text-purple-700 rounded-xl font-bold text-xl shadow-lg">ูุดู ุงููููุฉ</button></div>`;
            }
            return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><p class="mb-4 opacity-80 font-bold">${game.data.singer}</p><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h2 class="text-2xl font-bold leading-relaxed mb-2">"${game.data.part}"</h2><div class="inline-block px-6 py-2 bg-black/20 rounded-lg mt-2 text-yellow-300 font-black text-2xl">${game.data.answer}</div></div><p class="text-lg text-purple-100 font-bold mb-4">ููู ุงููู ุนุฑู ุงูุญูุ</p><div class="grid grid-cols-2 gap-3 w-full mb-4">${state.players.map(p => `<button onclick="lyricsPlayerWins(${p.id})" class="py-3 bg-white text-purple-700 rounded-xl font-bold text-lg shadow-lg hover:bg-purple-50">${p.name}</button>`).join('')}</div><button onclick="lyricsSkip()" class="w-full py-3 bg-slate-500 text-white rounded-xl font-bold mb-3">ูุญุฏุด ุนุฑู (ุชุฎุทู)</button><button onclick="goHome()" class="w-full py-3 bg-purple-800 text-white rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
        }

        // --- UNSCRAMBLE ---
        function scrambleWord(word) {
            const letters = word.split('');
            // Fisher-Yates shuffle
            for (let i = letters.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]];
            }
            return letters.join('');
        }
        function startUnscrambleGame() {
            const item = SCRAMBLE_DATA[Math.floor(Math.random() * SCRAMBLE_DATA.length)];
            const scrambled = scrambleWord(item.word);
            const player = getFairPlayer();
            state.currentGame = { type: 'unscramble', phase: 'playing', category: item.category, word: item.word, scrambled, player, revealed: false };
            playSound('click');
            render();
        }
        function revealUnscrambleAnswer() {
            state.currentGame.revealed = true;
            playSound('click');
            render();
        }
        function unscramblePlayerWins(playerId) {
            updateScore(playerId, false, 1);
            startUnscrambleGame();
        }
        function unscrambleSkip() {
            startUnscrambleGame();
        }
        function renderUnscrambleSetup() {
            if (!state.currentGame || state.currentGame.type !== 'unscramble') return renderGameStartScreen('ุฑุชุจูุง ุตุญ', 'ูููุฉ ุญุฑูููุง ูุชูุฎุจุทุฉ ุจูุงุกู ุนูู ูุฆุฉ ูุนููุฉ. ุญุงูู ุชุนุฑู ุงููููุฉ ูุชุฑุชุจูุง ุตุญ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startUnscrambleGame()', 'bg-green-600');
            const game = state.currentGame;
            if (!game.revealed) {
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-green-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="bg-white/20 p-6 rounded-2xl mb-6 w-full"><p class="text-sm opacity-75 mb-2">ุงููุฆุฉ:</p><h3 class="text-2xl font-bold text-yellow-300">${game.category}</h3></div><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h1 class="text-5xl font-black text-yellow-300 tracking-widest">${game.scrambled}</h1></div><button onclick="revealUnscrambleAnswer()" class="w-full py-4 bg-white text-green-700 rounded-xl font-bold text-xl shadow-lg">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button></div>`;
            }
            return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-green-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="bg-white/20 p-6 rounded-2xl mb-6 w-full"><p class="text-sm opacity-75 mb-2">ุงููุฆุฉ:</p><h3 class="text-2xl font-bold text-yellow-300">${game.category}</h3></div><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h1 class="text-5xl font-black text-yellow-300 tracking-widest mb-4">${game.scrambled}</h1><div class="border-t border-white/30 pt-4"><p class="text-sm opacity-75 mb-2">ุงูุฅุฌุงุจุฉ:</p><h2 class="text-4xl font-black text-green-200">${game.word}</h2></div></div><p class="text-lg text-green-100 font-bold mb-4">ููู ุงููู ุนุฑู ุงูุญูุ</p><div class="grid grid-cols-2 gap-3 w-full mb-4">${state.players.map(p => `<button onclick="unscramblePlayerWins(${p.id})" class="py-3 bg-white text-green-700 rounded-xl font-bold text-lg shadow-lg hover:bg-green-50">${p.name}</button>`).join('')}</div><button onclick="unscrambleSkip()" class="w-full py-3 bg-slate-500 text-white rounded-xl font-bold mb-3">ูุญุฏุด ุนุฑู (ุชุฎุทู)</button><button onclick="goHome()" class="w-full py-3 bg-green-800 text-white rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- SPY ---
        function startSpyGame(cat) { const words = SPY_CATEGORIES[cat] || SPY_CATEGORIES['ุฃูุงูู ุฎุฑูุฌ']; const word = words[Math.floor(Math.random() * words.length)]; const spyIndex = Math.floor(Math.random() * state.players.length); state.currentGame = { type: 'spy', phase: 'reveal', category: cat, word, spyIndex, currentPlayerIndex: 0, revealed: false, timeLeft: 120, votes: {}, votingPlayerIndex: 0 }; render(); }
        function revealSpyWord() { state.currentGame.revealed = true; render(); }
        function nextSpyPlayer() { if(!state.currentGame.revealed) state.currentGame.revealed = true; else if(state.currentGame.currentPlayerIndex < state.players.length - 1) { state.currentGame.currentPlayerIndex++; state.currentGame.revealed = false; } else { state.currentGame.phase = 'discuss'; startSpyTimer(); } render(); }
        function startSpyTimer() { if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); startSpyVoting(); } if (state.currentGame.timeLeft <= 10) playSound('tick'); render(); }, 1000); }
        function startSpyVoting() {
            if (gameInterval) clearInterval(gameInterval);
            state.currentGame.phase = 'voting';
            state.currentGame.votingPlayerIndex = 0;
            playSound('fail');
            render();
        }
        function voteForSpy(suspectedPlayerId) {
            const voter = state.players[state.currentGame.votingPlayerIndex];
            state.currentGame.votes[voter.id] = suspectedPlayerId;
            if (state.currentGame.votingPlayerIndex < state.players.length - 1) {
                state.currentGame.votingPlayerIndex++;
                playSound('click');
                render();
            } else {
                // Calculate results
                const spyId = state.players[state.currentGame.spyIndex].id;
                const voteCounts = {};
                Object.values(state.currentGame.votes).forEach(votedId => {
                    voteCounts[votedId] = (voteCounts[votedId] || 0) + 1;
                });
                
                let spyFound = false;
                if (Object.keys(voteCounts).length > 0) {
                    const maxVotes = Math.max(...Object.values(voteCounts));
                    const mostVoted = Object.keys(voteCounts).find(id => voteCounts[id] === maxVotes);
                    if (mostVoted) {
                        spyFound = parseInt(mostVoted) === spyId;
                    }
                }
                
                if (spyFound) {
                    // All players except spy get +1
                    state.players.forEach(p => {
                        if (p.id !== spyId) updateScore(p.id, false, 1);
                    });
                } else {
                    // Spy gets +2
                    updateScore(spyId, false, 2);
                }
                
                state.currentGame.spyFound = spyFound;
                state.currentGame.phase = 'result';
                playSound(spyFound ? 'success' : 'fail');
                render();
            }
        }
        function restartSpyGame() { startSpyGame(state.currentGame.category); }
        function renderSpySetup() { 
            if(!state.currentGame || state.currentGame.type !== 'spy') return `<div class="p-6 h-screen flex flex-col">${header('๐ต๏ธ ุงูุฌุงุณูุณ', 'home')}<div class="grid grid-cols-2 gap-3 max-h-[70vh] overflow-y-auto pb-4">${Object.keys(SPY_CATEGORIES).map(c => `<button onclick="startSpyGame('${c}')" class="p-3 bg-white rounded shadow font-bold text-indigo-700 hover:bg-indigo-50">${c}</button>`).join('')}</div></div>`; 
            const game = state.currentGame;
            if(game.phase === 'reveal') { 
                const p = state.players[game.currentPlayerIndex]; 
                return `<div class="h-screen flex flex-col items-center justify-center bg-indigo-900 text-white p-6"><h1 class="text-3xl mb-8">${p.name}</h1><button onclick="revealSpyWord()" class="bg-indigo-700 p-8 rounded-xl mb-4 w-full h-48 flex items-center justify-center text-2xl font-bold border-4 border-indigo-500 shadow-2xl">${game.revealed ? (game.spyIndex === game.currentPlayerIndex ? '<div class="text-center"><div class="text-4xl mb-2">๐ต๏ธ</div><div>ุฃูุช ุงูุฌุงุณูุณ</div></div>' : `<div class="text-center"><div class="text-2xl mb-2">${game.word}</div></div>`) : 'ุฏูุณ ูููุดู'}</button><button onclick="nextSpyPlayer()" class="w-full bg-yellow-500 text-black py-4 rounded-xl font-bold">ุงูุชุงูู</button></div>`; 
            } 
            if(game.phase === 'discuss') {
                return `<div class="h-screen flex flex-col p-6 bg-white"><h1 class="text-2xl font-bold text-center mt-10">ูุงูุดูุง ูุงุนุฑููุง ุงูุฌุงุณูุณ!</h1><div class="text-6xl text-center mt-8 font-black text-indigo-600">${getTimer(game.timeLeft)}</div><button onclick="startSpyVoting()" class="mt-auto bg-red-600 text-white py-4 rounded-xl font-bold">ุงุจุฏุฃ ุงูุชุตููุช</button></div>`;
            } 
            if(game.phase === 'voting') {
                const voter = state.players[game.votingPlayerIndex];
                return `<div class="h-screen flex flex-col items-center justify-center bg-indigo-900 text-white p-6"><h1 class="text-3xl mb-4">${voter.name}</h1><p class="text-xl opacity-80 mb-8">ููู ุงูุฌุงุณูุณ ูู ุฑุฃููุ</p><div class="grid grid-cols-2 gap-3 w-full max-h-[60vh] overflow-y-auto">${state.players.map(p => `<button onclick="voteForSpy(${p.id})" class="py-4 bg-indigo-700 rounded-xl font-bold text-lg hover:bg-indigo-600 transition border-2 border-indigo-500">${p.name}</button>`).join('')}</div></div>`;
            }
            return `<div class="h-screen flex flex-col items-center justify-center bg-slate-900 text-white p-6 text-center"><div class="text-6xl mb-6">${game.spyFound ? '๐' : '๐ต๏ธ'}</div><h1 class="text-4xl mb-4 font-bold ${game.spyFound ? 'text-green-400' : 'text-red-400'}">${game.spyFound ? 'ุนุฑููุง ุงูุฌุงุณูุณ!' : 'ุงูุฌุงุณูุณ ููุช!'}</h1><div class="bg-white/10 p-6 rounded-2xl mb-6 w-full"><p class="text-xl mb-2">ุงูุฌุงุณูุณ ูุงู:</p><h2 class="text-3xl font-black text-yellow-300">${state.players[game.spyIndex].name}</h2><p class="text-lg mt-4 opacity-80">ุงููููุฉ: ${game.word}</p></div><div class="mb-6"><p class="text-lg opacity-80">${game.spyFound ? 'ูู ุงููุงุนุจูู (ูุงุนุฏุง ุงูุฌุงุณูุณ) ุฃุฎุฐูุง +1 ููุทุฉ' : 'ุงูุฌุงุณูุณ ุฃุฎุฐ +2 ููุทุฉ'}</p></div><button onclick="restartSpyGame()" class="w-full py-4 bg-indigo-600 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
        }

        // --- CHARADES ---
        function startCharadesGame(cat) { const words = CHARADES_DATA[cat]; const word = words[Math.floor(Math.random() * words.length)]; const actor = getFairPlayer(); state.currentGame = { type: 'charades', phase: 'prepare', category: cat, word, actor, revealed: false, timeLeft: 60 }; playSound('click'); render(); }
        function startCharadesRound() { state.currentGame.phase = 'acting'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = getTimer(state.currentGame.timeLeft); if(state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); charadesFail(); return; } if(state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function charadesSuccess() { updateScore(state.currentGame.actor.id, false, 1); startCharadesGame(state.currentGame.category); }
        function charadesFail() { if(state.daresEnabled) showDare(); startCharadesGame(state.currentGame.category); }
        function renderCharadesSetup() { if (!state.currentGame || state.currentGame.type !== 'charades') { const categories = Object.keys(CHARADES_DATA); return `<div class="p-6 h-screen flex flex-col">${header('๐ญ ุจุฏูู ููุงู', 'home')}<div class="space-y-4 mb-4"><h3 class="font-bold text-slate-800">ุงุฎุชุงุฑ ุงููุฆุฉ:</h3><div class="flex flex-wrap gap-2">${categories.map(cat => `<button onclick="startCharadesGame('${cat}')" class="px-4 py-2 rounded-full border-2 font-bold transition bg-white border-slate-200 text-slate-600 hover:bg-rose-100 hover:border-rose-500">${cat}</button>`).join('')}</div></div></div>`; } const game = state.currentGame; if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.actor.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-rose-800 z-10 flex items-center justify-center cursor-pointer hover:bg-rose-700 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงููููุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ูุทููุจ ุชูุซูู:</p><h2 class="text-3xl font-bold text-yellow-300">${game.word}</h2></div><button onclick="startCharadesRound()" class="w-full py-4 bg-white text-rose-700 rounded-xl font-bold text-xl">ุฌุงูุฒ! ุงุจุฏุฃ ุงููุคูุช</button></div>`; if (game.phase === 'acting') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-4 mb-8"><h2 class="text-slate-500">ุงูููุซู: <span class="font-bold text-rose-600">${game.actor.name}</span></h2><h1 class="text-4xl font-black text-slate-800 mt-2">${game.word}</h1></div><div class="flex-1 flex justify-center items-center"><div class="text-8xl font-black text-rose-600" id="game-timer">${getTimer(game.timeLeft)}</div></div><div class="space-y-3"><button onclick="charadesSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุนุฑูููุง!</button><button onclick="charadesFail()" class="w-full py-3 bg-slate-200 text-slate-600 rounded-xl font-bold">ูุนุฑููุด (ุชุฎุทู)</button></div></div>`; }

        // --- QUOTES ---
        function startQuotesGame() { const quote = QUOTES_DATA[Math.floor(Math.random() * QUOTES_DATA.length)]; const reader = getFairPlayer(); state.currentGame = { type: 'quotes', phase: 'play', quote, reader, revealed: false }; playSound('click'); render(); }
        function revealQuoteAnswer() { state.currentGame.phase = 'answer'; playSound('click'); render(); }
        function quotePlayerWins(pid) { updateScore(pid, false, 1); startQuotesGame(); }
        function nextQuoteRound() { startQuotesGame(); }
        function renderQuotesSetup() { if (!state.currentGame || state.currentGame.type !== 'quotes') return renderGameStartScreen('ุงูุงูููุงุช', 'ูุงุญุฏ ูููุฑุฃ ุงูุงูููุ ูุงูุจุงูู ูุงุฒู ูุฎูู ุงุณู ุงููููู/ุงููุณุฑุญูุฉ ูุงูููุซู.', '๐ฌ', 'ุงุจุฏุฃ ุงููุนุจ', 'startQuotesGame()', 'bg-emerald-600'); const game = state.currentGame; if (game.phase === 'play') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-emerald-700 text-white text-center animate-in"><p class="text-emerald-200 mb-2">ุงูุฏูุฑ ุนูู: <span class="font-bold text-white text-lg">${game.reader.name}</span></p><div class="text-sm bg-black/20 px-3 py-1 rounded-full mb-8">ุงูุฑุฃ ุงูุงููู ุจุตูุช ุนุงูู</div><div class="relative mb-10 w-full">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-emerald-800 z-10 rounded-xl flex items-center justify-center cursor-pointer hover:bg-emerald-900 transition h-32"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงูุงููู</span></div>` : `<div class="text-6xl absolute -top-8 -right-4 text-emerald-400 opacity-50">"</div><h2 class="text-3xl font-black leading-relaxed px-4">${game.quote.quote}</h2><div class="text-6xl absolute -bottom-12 -left-4 text-emerald-400 opacity-50">"</div>`}</div>${game.revealed ? `<button onclick="revealQuoteAnswer()" class="w-full py-4 bg-white text-emerald-800 rounded-xl font-bold text-xl shadow-lg mt-8">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button>` : ''}</div>`; if (game.phase === 'answer') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-8 mb-8 border-b-2 border-slate-100 pb-8"><h2 class="text-slate-500 mb-2">ุงูุงููู ูุงู:</h2><p class="text-xl font-bold text-slate-800 mb-6">"${game.quote.quote}"</p><div class="space-y-2"><div class="inline-block px-4 py-2 bg-emerald-100 text-emerald-800 rounded-lg font-bold mx-1">๐ฌ ${game.quote.work}</div><div class="inline-block px-4 py-2 bg-amber-100 text-amber-800 rounded-lg font-bold mx-1">๐ค ${game.quote.actor}</div></div></div><h3 class="text-center font-bold text-slate-700 mb-4">ููู ุนุฑููุงุ</h3><div class="grid grid-cols-2 gap-3 flex-1 overflow-y-auto pb-4">${state.players.map(p => `<button onclick="quotePlayerWins(${p.id})" class="p-3 bg-slate-50 border border-slate-200 rounded-lg font-semibold text-slate-700 hover:bg-emerald-50 ${p.id === game.reader.id ? 'opacity-75' : ''}">${p.name}${p.id === game.reader.id ? ' (ุงููุงุฑุฆ)' : ''}</button>`).join('')}</div><div class="mt-4 space-y-2"><button onclick="nextQuoteRound()" class="w-full py-3 bg-slate-800 text-white rounded-xl font-bold">ูุญุฏุด ุนุฑู (ุงูุชุงูู)</button></div></div>`; }

        // --- FIVE SECOND ---
        function startFiveSecondGame() { const question = FIVE_SECOND_QUESTIONS[Math.floor(Math.random() * FIVE_SECOND_QUESTIONS.length)]; const player = getFairPlayer(); state.currentGame = { type: 'fivesecond', phase: 'prepare', question, player, revealed: false, timeLeft: 5 }; playSound('click'); render(); }
        function startFiveSecondRound() { state.currentGame.phase = 'playing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); fiveSecondFail(); return; } if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function fiveSecondSuccess() { updateScore(state.currentGame.player.id, false, 1); startFiveSecondGame(); }
        function fiveSecondFail() { if(state.daresEnabled) showDare(); startFiveSecondGame(); }
        function renderFiveSecondSetup() { if (!state.currentGame || state.currentGame.type !== 'fivesecond') return renderGameStartScreen('ุฎูุณุฉ ุนููู', 'ุงุฐูุฑ ูฃ ุฃุดูุงุก ูู ูฅ ุซูุงูู. ูู ูุฌุญุช ุชุงุฎุฏ ููุทุฉุ ูู ูุดูุช.. ูุง ูููู!', 'โฑ๏ธ', 'ุงุจุฏุฃ ุฃูู ุฌููุฉ', 'startFiveSecondGame()', 'bg-teal-600'); const game = state.currentGame; if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-teal-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-teal-800 z-10 flex items-center justify-center cursor-pointer hover:bg-teal-700 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงูุณุคุงู</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ูุทููุจ ุงูุฅุฌุงุจุฉ ุนูู:</p><h2 class="text-3xl font-bold text-yellow-300">${game.question.text}</h2></div><button onclick="startFiveSecondRound()" class="w-full py-4 bg-white text-teal-700 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุฌุงูุฒ! ุงุจุฏุฃ ุงูุฌููุฉ</button></div>`; if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-4 mb-8"><h2 class="text-slate-500">ุงููุงุนุจ: <span class="font-bold text-teal-600">${game.player.name}</span></h2><h1 class="text-3xl font-black text-slate-800 mt-2">${game.question.text}</h1></div><div class="flex-1 flex justify-center items-center"><div class="text-9xl font-black ${game.timeLeft <= 2 ? 'text-red-600 animate-pulse' : 'text-teal-600'}" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3"><button onclick="fiveSecondSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุฃุญุณูุช! (ุฃุฌุงุจ ุตุญ)</button><button onclick="fiveSecondFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold shadow-lg">๐ ูุดู! (ุนููุจุฉ)</button></div></div>`; }

        // --- BUS ---
        function startBusGame() { 
            const arabicLetters = ['ุฃ', 'ุจ', 'ุช', 'ุซ', 'ุฌ', 'ุญ', 'ุฎ', 'ุฏ', 'ุฐ', 'ุฑ', 'ุฒ', 'ุณ', 'ุด', 'ุต', 'ุถ', 'ุท', 'ุน', 'ุบ', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู']; 
            const category = BUS_CATEGORIES[Math.floor(Math.random() * BUS_CATEGORIES.length)];
            const letter = arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
            
            state.currentGame = { type: 'bus', phase: 'ready', category, letter, playerIndex: 0, results: [], timeLeft: 10, lastCategory: category.name, lastLetter: letter }; 
            playSound('click'); 
            render(); 
        }
        function startBusTimerNow() { state.currentGame.phase = 'playing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); busPlayerFail(); return; } if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function generateNewBusRound() {
            const arabicLetters = ['ุฃ', 'ุจ', 'ุช', 'ุซ', 'ุฌ', 'ุญ', 'ุฎ', 'ุฏ', 'ุฐ', 'ุฑ', 'ุฒ', 'ุณ', 'ุด', 'ุต', 'ุถ', 'ุท', 'ุน', 'ุบ', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู'];
            const lastCategory = state.currentGame.lastCategory;
            const lastLetter = state.currentGame.lastLetter;
            const currentPlayer = state.players[state.currentGame.playerIndex];
            
            let category, letter;
            // If not first player and same player as last, avoid same category and letter
            if (state.currentGame.playerIndex > 0 && lastCategory && lastLetter) {
                const lastPlayer = state.players[state.currentGame.playerIndex - 1];
                if (currentPlayer.id === lastPlayer.id) {
                    let availableCategories = BUS_CATEGORIES.filter(c => c.name !== lastCategory);
                    let availableLetters = arabicLetters.filter(l => l !== lastLetter);
                    category = availableCategories.length > 0 ? availableCategories[Math.floor(Math.random() * availableCategories.length)] : BUS_CATEGORIES[Math.floor(Math.random() * BUS_CATEGORIES.length)];
                    letter = availableLetters.length > 0 ? availableLetters[Math.floor(Math.random() * availableLetters.length)] : arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
                } else {
                    category = BUS_CATEGORIES[Math.floor(Math.random() * BUS_CATEGORIES.length)];
                    letter = arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
                }
            } else {
                category = BUS_CATEGORIES[Math.floor(Math.random() * BUS_CATEGORIES.length)];
                letter = arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
            }
            
            state.currentGame.category = category;
            state.currentGame.letter = letter;
            state.currentGame.lastCategory = category.name;
            state.currentGame.lastLetter = letter;
        }
        function busPlayerSuccess() { const player = state.players[state.currentGame.playerIndex]; state.currentGame.results.push({ player, success: true }); updateScore(player.id, false, 1); if (state.currentGame.playerIndex < state.players.length - 1) { state.currentGame.playerIndex++; generateNewBusRound(); state.currentGame.timeLeft = 10; state.currentGame.phase = 'ready'; playSound('success'); render(); } else { state.currentGame.phase = 'result'; playSound('success'); render(); } }
        function busPlayerFail() { const player = state.players[state.currentGame.playerIndex]; state.currentGame.results.push({ player, success: false }); if (state.currentGame.playerIndex < state.players.length - 1) { state.currentGame.playerIndex++; generateNewBusRound(); state.currentGame.timeLeft = 10; state.currentGame.phase = 'ready'; playSound('fail'); render(); } else { state.currentGame.phase = 'result'; playSound('fail'); render(); } }
        function nextBusRound() { startBusGame(); }
        function renderBusSetup() { if (!state.currentGame || state.currentGame.type !== 'bus') return renderGameStartScreen('ุฃูุชูุจูุณ ูููุจููุช', 'ูู ุฌููุฉ ุชุธูุฑ ูุฆุฉ ูุงูุญุฑู ุงูุฃูู. ูู ูกู ุซูุงูู ูู ูุงุนุจ ูููู ูููุฉ ุชุจุฏุฃ ุจุงูุญุฑู. ูู ูุฌุญุชูุง ูููู +ูก ููู ูุงุฌุญ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startBusGame()', 'bg-purple-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-2xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู:</div><div class="text-5xl font-bold mb-10">${state.players[game.playerIndex].name}</div><div onclick="startBusTimerNow()" class="w-40 h-40 bg-purple-500 rounded-full flex items-center justify-center cursor-pointer shadow-lg animate-pulse hover:scale-105 transition border-4 border-white/20"><span class="text-2xl font-bold">ุฏูุณ<br>ุนุดุงู ุชุจุฏุฃ</span></div></div>`; if (game.phase === 'playing') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center"><div class="bg-white/20 p-6 rounded-3xl mb-8 w-full"><div class="text-sm opacity-80 mb-2">ุงููุฆุฉ</div><div class="text-4xl font-black mb-4">${game.category.name}</div><div class="text-sm opacity-80 mb-2">ุงูุญุฑู</div><div class="text-6xl font-black text-yellow-300">${game.letter}</div></div><div class="mb-6"><div class="text-lg opacity-90 mb-2">ุงูุฏูุฑ ุนูู:</div><div class="text-3xl font-bold">${state.players[game.playerIndex].name}</div></div><div class="text-7xl font-black mb-8" id="game-timer">${game.timeLeft}</div><div class="grid grid-cols-2 gap-3 w-full"><button onclick="busPlayerSuccess()" class="py-3 bg-green-500 rounded-xl font-bold">โ ูุฌุญ</button><button onclick="busPlayerFail()" class="py-3 bg-red-500 rounded-xl font-bold">โ ูุดู</button></div></div>`; if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-900 text-white text-center"><h2 class="text-3xl font-bold mb-6">ูุชูุฌุฉ ุงูุฌููุฉ!</h2><div class="bg-white/10 p-6 rounded-2xl w-full mb-8">${game.results.map(r => `<div class="flex justify-between items-center py-2 border-b border-white/20"><span>${r.player.name}</span><span class="text-2xl">${r.success ? 'โ' : 'โ'}</span></div>`).join('')}</div><button onclick="nextBusRound()" class="w-full py-4 bg-purple-500 rounded-xl font-bold text-xl">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold mt-3">ุฎุฑูุฌ</button></div>`; }

        // --- LIAR ---
        function startLiarGame() { const card = LIAR_CARDS[Math.floor(Math.random() * LIAR_CARDS.length)]; const player = getFairPlayer(); state.currentGame = { type: 'liar', phase: 'ready', card, player, selectedFact: null, timeLeft: 15 }; playSound('click'); render(); }
        function startLiarTimerNow() { state.currentGame.phase = 'reading'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); if (state.currentGame.selectedFact !== null) revealLiarCard(); } if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function selectLiarFact(index) { state.currentGame.selectedFact = index; playSound('click'); render(); }
        function revealLiarCard() { state.currentGame.phase = 'result'; playSound('click'); render(); }
        function liarGameAddPoint() { const p = getFairPlayer(); updateScore(p.id, false, 1); nextLiarRound(); }
        function nextLiarRound() { startLiarGame(); }
        function renderLiarSetup() { if (!state.currentGame || state.currentGame.type !== 'liar') return renderGameStartScreen('ุงููุงุฑุช ุงููุฏุงุจ', 'ูู ูุงุฑุช ููู ูฃ ุญูุงุฆูุ ููู ูุงุญุฏุฉ ูุฐุจุฉ. ุงูุณู ุงููุฐุจุฉ ูู ูกูฅ ุซุงููุฉ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startLiarGame()', 'bg-orange-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-orange-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-6">${game.player.name}</h1><div class="text-6xl mb-6">๐</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒ ูุง ุจุทูุ</h2><p class="text-xl opacity-90 mb-10">ูุฏูู ุงูููุจุงูู.. ุงูุฑุฃ ุงูู 3 ุญูุงุฆู ุจุณุฑุนุฉ!</p><div onclick="startLiarTimerNow()" class="w-full py-6 bg-white text-orange-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-orange-50 transition">ุฏูุณ ุนุดุงู ุชุดูู ุงููุงุฑุช<br><span class="text-sm font-normal text-slate-500">(ุงูุนุฏุงุฏ ููุจุฏุฃ ููุฑุงู!)</span></div></div>`; if (game.phase === 'reading') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-orange-600 text-white text-center"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><h2 class="text-3xl font-bold mb-6">${game.card.topic}</h2><div class="bg-white/20 p-6 rounded-2xl w-full mb-8 space-y-4">${game.card.facts.map((fact, i) => `<button onclick="selectLiarFact(${i})" class="w-full p-4 bg-white/10 hover:bg-white/30 rounded-xl text-right ${game.selectedFact === i ? 'ring-4 ring-yellow-300' : ''}"><span class="font-bold">${i + 1}.</span> ${fact}</button>`).join('')}</div><div class="text-5xl font-black mb-6" id="game-timer">${game.timeLeft}</div><button onclick="revealLiarCard()" class="w-full py-4 bg-white text-orange-700 rounded-xl font-bold text-xl" ${game.selectedFact === null ? 'disabled opacity-50' : ''}>ูุดู ุงูุฅุฌุงุจุฉ</button></div>`; if (game.phase === 'result') { const lieIndex = 2; const isCorrect = game.selectedFact === lieIndex; return `<div class="h-screen flex flex-col items-center justify-center p-6 ${isCorrect ? 'bg-green-600' : 'bg-red-600'} text-white text-center animate-in"><div class="text-6xl mb-6">${isCorrect ? 'โ' : 'โ'}</div><h2 class="text-3xl font-bold mb-4">${isCorrect ? 'ุตุญ! ุฃุญุณูุช!' : 'ุบูุท!'}</h2><p class="text-xl mb-8">ุงููุฐุจุฉ ูุงูุช: "${game.card.facts[lieIndex]}"</p>${isCorrect ? `<button onclick="updateScore(${game.player.id}, false, 1); nextLiarRound()" class="w-full py-3 bg-white/20 rounded-xl font-bold mb-3">+ูก ููุทุฉ</button>` : state.daresEnabled ? `<button onclick="showDare()" class="w-full py-3 bg-white/20 rounded-xl font-bold mb-3">๐ ุนูุงุจ</button>` : ''}<button onclick="nextLiarRound()" class="w-full py-4 bg-white text-orange-700 rounded-xl font-bold">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold mt-3">ุฎุฑูุฌ</button></div>`; } }

        // --- AUCTION ---
        function startAuctionGame() { const category = AUCTION_CATEGORIES[Math.floor(Math.random() * AUCTION_CATEGORIES.length)]; state.currentGame = { type: 'auction', phase: 'bidding', category, currentBid: 1, timeLeft: 30 }; playSound('click'); render(); }
        function raiseBid() { state.currentGame.currentBid++; playSound('click'); render(); }
        function auctionPass() { state.currentGame.phase = 'select_winner'; state.currentGame.finalBid = state.currentGame.currentBid; playSound('click'); render(); }
        function selectAuctionWinner(playerId) { state.currentGame.winnerId = playerId; state.currentGame.phase = 'answering_ready'; state.currentGame.timeLeft = 30; playSound('click'); render(); }
        function startAuctionTimerNow() { state.currentGame.phase = 'answering'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); auctionFail(); return; } if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function auctionSuccess() { updateScore(state.currentGame.winnerId, false, state.currentGame.finalBid); startAuctionGame(); }
        function auctionFail() { if (state.daresEnabled) showDare(); startAuctionGame(); }
        function renderAuctionSetup() { if (!state.currentGame || state.currentGame.type !== 'auction') return renderGameStartScreen('ุงููุฒุงุฏ', 'ุงููุฑูู ูุฑุงูู ุนูู ุนุฏุฏ ุงูุฅุฌุงุจุงุช ุงููู ููุฏุฑ ูููููุง. ุงููุฒุงุฏ ููุฃุนููุ ูุงููุฑูู ุงููุงูุฒ ูุงุฒู ูููุฐ!', '๐จ', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startAuctionGame()', 'bg-cyan-600'); const game = state.currentGame; if (game.phase === 'bidding') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-600 text-white text-center"><div class="bg-white/20 p-6 rounded-2xl mb-8 w-full"><div class="text-sm opacity-80 mb-2">ุงููุฆุฉ:</div><h2 class="text-3xl font-bold">${game.category.name}</h2></div><div class="text-lg opacity-90 mb-4">ุฃุนูู ุฑูู ูุฒุงุฏ:</div><div class="text-8xl font-black text-yellow-300 mb-8">${game.currentBid}</div><div class="grid grid-cols-2 gap-3 w-full"><button onclick="raiseBid()" class="py-4 bg-white/20 rounded-xl font-bold text-xl">+ูก ุนูู</button><button onclick="auctionPass()" class="py-4 bg-red-500 rounded-xl font-bold text-xl">ุจุงุณ!</button></div></div>`; if (game.phase === 'select_winner') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-600 text-white text-center animate-in"><div class="text-6xl mb-6">๐จ</div><h2 class="text-3xl font-bold mb-4">ุงููุฒุงุฏ ุฎูุต!</h2><p class="text-xl opacity-90 mb-2">ูุทููุจ <span class="font-black text-yellow-300 text-2xl">${game.finalBid}</span> ุฅุฌุงุจุฉ</p><p class="text-lg mb-6 mt-6">ููู ุฑุณู ุนููู ุงููุฒุงุฏุ</p><div class="grid grid-cols-2 gap-3 w-full max-h-[50vh] overflow-y-auto">${state.players.map(p => `<button onclick="selectAuctionWinner(${p.id})" class="py-4 bg-white/20 rounded-xl font-bold text-lg hover:bg-white/30 transition">${p.name}</button>`).join('')}</div></div>`; if (game.phase === 'answering_ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-600 text-white text-center animate-in"><div class="text-6xl mb-6">๐จ</div><h2 class="text-3xl font-bold mb-4">ุฌุงูุฒููุ</h2><p class="text-xl opacity-90 mb-2">ุงููุงุฆุฒ: <span class="font-black text-yellow-300">${state.players.find(p => p.id === game.winnerId)?.name}</span></p><p class="text-lg opacity-80 mb-4">ูุทููุจ <span class="font-black text-yellow-300 text-2xl">${game.finalBid}</span> ุฅุฌุงุจุฉ</p><div onclick="startAuctionTimerNow()" class="w-full py-6 mt-8 bg-white text-cyan-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-cyan-50 transition">ุฏูุณ ุนุดุงู ุชุจุฏุฃ ุงูุนุฏุงุฏ</div></div>`; if (game.phase === 'answering') return `<div class="h-screen flex flex-col p-6 bg-cyan-50"><div class="text-center mt-8 mb-8"><h2 class="text-cyan-700 text-lg">ุงููุฆุฉ: <span class="font-bold">${game.category.name}</span></h2><div class="text-5xl font-black text-cyan-600 mt-4">ูุงุฒู ${game.finalBid} ุฅุฌุงุจุฉ!</div></div><div class="flex-1 flex justify-center items-center"><div class="text-8xl font-black text-cyan-600" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3"><button onclick="auctionSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl">โ ูุฌุญ!</button><button onclick="auctionFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ูุดู!</button></div></div>`; }

        // --- GIBBERISH ---
        function startGibberishGame() { 
            const phrase = GIBBERISH_DATA[Math.floor(Math.random() * GIBBERISH_DATA.length)];
            const player = getFairPlayer(); // Use turnQueue for fair distribution
            state.currentGame = { type: 'gibberish', phase: 'ready', phrase, player, timeLeft: 30 }; 
            playSound('click'); 
            render(); 
        }
        function startGibberishTimerNow() { state.currentGame.phase = 'playing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); revealGibberishAnswer(); } if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function revealGibberishAnswer() { state.currentGame.phase = 'answer'; playSound('click'); render(); }
        function nextGibberishRound() { startGibberishGame(); }
        function renderGibberishSetup() { if (!state.currentGame || state.currentGame.type !== 'gibberish') return renderGameStartScreen('ูู ุงูุดูุฑุฉ', 'ุฌูู ุบุฑูุจุฉ! ุงูุฑุฃูุง ุจุตูุช ุนุงูู ูุฐุง ูุฑุฉ ูุญุฏ ูุง ุชููู ุงููุนูู ุงูุญูููู!', '๐ฃ๏ธ', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startGibberishGame()', 'bg-pink-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="text-6xl mb-6">๐ฃ๏ธ</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒ ุชูู ุงูุดูุฑุฉุ</h2><div onclick="startGibberishTimerNow()" class="w-full py-6 bg-white text-pink-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-pink-50 transition">ุฏูุณ ุนุดุงู ุชุจุฏุฃ<br><span class="text-sm font-normal text-slate-500">(ุงูุนุฏุงุฏ ููุจุฏุฃ ููุฑุงู!)</span></div></div>`; if (game.phase === 'playing') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-600 text-white text-center"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="text-sm opacity-80 mb-4">ุงูุฑุฃูุง ุจุตูุช ุนุงูู!</div><div class="bg-white/20 p-8 rounded-3xl mb-8"><h1 class="text-4xl font-black">${game.phrase.gibberish}</h1></div><div class="text-6xl font-black mb-8" id="game-timer">${game.timeLeft}</div><button onclick="revealGibberishAnswer()" class="w-full py-4 bg-white text-pink-700 rounded-xl font-bold text-xl">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button></div>`; if (game.phase === 'answer') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-900 text-white text-center"><div class="bg-white/10 p-6 rounded-2xl mb-8"><div class="text-sm opacity-80 mb-2">ูุงูุช:</div><div class="text-2xl font-bold mb-4">${game.phrase.gibberish}</div><div class="text-sm opacity-80 mb-2">ุงูุฅุฌุงุจุฉ:</div><div class="text-3xl font-black text-yellow-300">${game.phrase.answer}</div></div><button onclick="nextGibberishRound()" class="w-full py-4 bg-pink-500 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; }

        // --- HUM ---
        function startHumGame() { const song = HUM_SONGS[Math.floor(Math.random() * HUM_SONGS.length)]; const player = getFairPlayer(); state.currentGame = { type: 'hum', phase: 'prepare', song, player, revealed: false, timeLeft: 45 }; playSound('click'); render(); }
        function startHumRound() { state.currentGame.phase = 'humming'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); humFail(); return; } if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function humSuccess() { updateScore(state.currentGame.player.id, false, 1); startHumGame(); }
        function humFail() { if (state.daresEnabled) showDare(); startHumGame(); }
        function renderHumSetup() { if (!state.currentGame || state.currentGame.type !== 'hum') return renderGameStartScreen('ุทุฑุจูู ุดูุฑุงู', 'ูููู ุงููุญู ุจุณ! ููููุน ุงููููุงุช. "ุชู ุชู ุฑู ุชู" ููุท!', '๐ต', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startHumGame()', 'bg-yellow-600'); const game = state.currentGame; if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-yellow-600 text-white text-center"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-yellow-700 z-10 flex items-center justify-center cursor-pointer hover:bg-yellow-800 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงูุฃุบููุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ุงูุฃุบููุฉ:</p><h2 class="text-3xl font-bold text-yellow-300">${game.song.song}</h2><p class="text-sm mt-2 opacity-75">ุงูุตุนูุจุฉ: ${game.song.difficulty}</p></div><button onclick="startHumRound()" class="w-full py-4 bg-white text-yellow-700 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุงุจุฏุฃ ุงูููููุฉ!</button></div>`; if (game.phase === 'humming') return `<div class="h-screen flex flex-col p-6 bg-yellow-50"><div class="text-center mt-8 mb-8"><h2 class="text-slate-500">ุงูููููู: <span class="font-bold text-yellow-700">${game.player.name}</span></h2><h1 class="text-3xl font-black text-slate-800 mt-2">${game.song.song}</h1></div><div class="flex-1 flex justify-center items-center"><div class="text-8xl font-black text-yellow-600" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3"><button onclick="humSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl">โ ุนุฑูููุง!</button><button onclick="humFail()" class="w-full py-3 bg-slate-200 text-slate-600 rounded-xl font-bold">ูุนุฑููุด</button></div></div>`; }

        // --- LIKELY ---
        function startLikelyGame() { const question = MOST_LIKELY[Math.floor(Math.random() * MOST_LIKELY.length)]; state.currentGame = { type: 'likely', phase: 'ready', question, timeLeft: 5 }; playSound('click'); render(); }
        function startLikelyTimerNow() { state.currentGame.phase = 'showing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); render(); } else if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function likelySelectPlayer(playerId) { if (state.daresEnabled) showDare(); nextLikelyRound(); }
        function nextLikelyRound() { startLikelyGame(); }
        function renderLikelySetup() { if (!state.currentGame || state.currentGame.type !== 'likely') return renderGameStartScreen('ููู ุงููุงุฑุซุฉุ', 'ุณุคุงู ูุธูุฑ. ูู ูฅ ุซูุงูู ูููู ุชุดุงูุฑูุง ุนูู ููุณ ุงูุดุฎุต. ุงููู ุงููู ุดุงูุฑ ุนููู.. ุนูุงุจ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startLikelyGame()', 'bg-red-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-red-600 text-white text-center animate-in"><div class="text-6xl mb-6">๐</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒููุ</h2><div onclick="startLikelyTimerNow()" class="w-full py-6 bg-white text-red-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-red-50 transition">ุฏูุณ ุนุดุงู ุชุดูู ุงูุณุคุงู<br><span class="text-sm font-normal text-slate-500">(5 ุซูุงูู ุจุณ!)</span></div></div>`; if (game.phase === 'showing') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-red-600 text-white text-center"><div class="bg-white/20 p-8 rounded-3xl mb-8 w-full"><h1 class="text-3xl font-black leading-relaxed">${game.question}</h1></div><div class="text-8xl font-black mb-8" id="game-timer">${game.timeLeft}</div><p class="text-xl opacity-90">ุดุงูุฑูุง ุฏูููุชู! ๐</p></div>`; if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-red-900 text-white text-center"><div class="bg-white/10 p-6 rounded-2xl mb-6 w-full"><h3 class="text-sm opacity-75 mb-2">ุงูุณุคุงู ูุงู:</h3><h1 class="text-2xl font-black leading-relaxed">${game.question}</h1></div><h2 class="text-3xl font-bold mb-8">ุงุชูููุง ุนูู ูููุ</h2><div class="grid grid-cols-2 gap-3 w-full mb-8">${state.players.map(p => `<button onclick="likelySelectPlayer(${p.id})" class="p-4 bg-white/20 rounded-xl font-bold hover:bg-white/30">${p.name}</button>`).join('')}</div><button onclick="nextLikelyRound()" class="w-full py-3 bg-red-500 rounded-xl font-bold">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold mt-3">ุฎุฑูุฌ</button></div>`; }

        // ===== INIT =====
        render();
    </script>
</body>
</html>