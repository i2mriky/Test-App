<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ูุนุจุฉ ุงููุนุฏุฉ - ุงููุณุฎุฉ ุงูุฃุตููุฉ</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ุงููุนุฏุฉ">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐ฒ</text></svg>">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#f43f5e">
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { font-family: 'Cairo', sans-serif; touch-action: manipulation; -webkit-tap-highlight-color: transparent; }
        body {
            background-color: #f8f9fa;
            background-image: radial-gradient(#cbd5e1 1.5px, transparent 1.5px), radial-gradient(#cbd5e1 1.5px, #f8f9fa 1.5px);
            background-size: 24px 24px;
            background-position: 0 0, 12px 12px;
            overscroll-behavior: none;
            user-select: none;
        }
        
        /* Page Transitions - Snappy Entry Animation */
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(10px) scale(0.98); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        .animate-enter {
            animation: slideIn 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
        
        /* Legacy Animation Support */
        .animate-in { animation: slideIn 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .animate-pulse { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .rotate-90-text { transform: rotate(90deg); white-space: nowrap; }
        .bomb-pulse { animation: bomb 0.5s infinite; }
        @keyframes bomb { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        
        /* Floating Point Animation */
        .floating-point {
            position: fixed;
            font-size: 2.5rem;
            font-weight: 900;
            color: #10b981;
            text-shadow: 0 2px 8px rgba(16, 185, 129, 0.5);
            pointer-events: none;
            z-index: 9999;
            animation: floatUp 1.5s ease-out forwards;
        }
        @keyframes floatUp {
            0% { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
            50% {
                transform: translateY(-40px) scale(1.2);
            }
            100% { 
                opacity: 0; 
                transform: translateY(-100px) scale(0.8);
            }
        }
        
        /* Confetti Particle */
        .confetti-particle {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 9998;
            animation: confettiFall 2s ease-out forwards;
        }
        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* Surprise Me Button Gradient */
        .surprise-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body>
    <div id="app" class="min-h-screen">
        <div class="max-w-md mx-auto min-h-screen shadow-2xl bg-white/95 backdrop-blur-sm relative overflow-hidden border-x-2 border-slate-100 flex flex-col">
            <div class="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-rose-500 via-amber-400 to-indigo-500 z-50"></div>
            
            <!-- Global Controls -->
            <div class="absolute top-4 left-4 z-50 flex flex-col gap-2">
                <button onclick="toggleMute()" id="muteBtn" class="p-2 bg-white rounded-full shadow-md text-slate-600 hover:bg-slate-50 transition">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
                </button>
                <button onclick="goHome()" class="p-2 bg-white rounded-full shadow-md text-slate-600 hover:bg-slate-50 transition">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                </button>
            </div>

            <div id="screen-container" class="flex-1 flex flex-col h-full overflow-hidden"></div>
        </div>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let gameInterval = null; 

        // ===== STATE =====
        let state = {
            screen: 'home',
            isMuted: false,
            daresEnabled: false,
            teamMode: false, // ูุถุน ุงููุฑู
            teamsSetupTab: 'A', // ุงูุชุจููุจ ุงููุดุท ูู ุฅุนุฏุงุฏ ุงููุฑู
            players: [
                { id: 1, name: 'ุงููุงุนุจ ูก', score: 0 },
                { id: 2, name: 'ุงููุงุนุจ ูข', score: 0 },
                { id: 3, name: 'ุงููุงุนุจ ูฃ', score: 0 }
            ],
            teams: [
                { id: 'A', name: 'ูุฑูู ุฃ', score: 0, color: 'text-rose-600', members: [] },
                { id: 'B', name: 'ูุฑูู ุจ', score: 0, color: 'text-indigo-600', members: [] }
            ],
            turnQueue: [], // For fair distribution
            usedItems: {}, // Track used content per category (No-Repeat System)
            currentGame: null
        };

        // ===== LOCAL STORAGE FUNCTIONS =====
        function saveState() {
            try {
                localStorage.setItem('party_game_v1', JSON.stringify(state));
            } catch (e) {
                console.error('Save failed:', e);
            }
        }

        function loadState() {
            try {
                const saved = localStorage.getItem('party_game_v1');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    // Merge saved state with defaults to ensure all fields exist
                    state = { ...state, ...parsed };
                    
                    // โ๏ธ ALWAYS START AT HOME SCREEN
                    // We want to keep scores/players/teams but always land on the main menu
                    state.screen = 'home';
                    
                    // Ensure queues are properly restored
                    if (!state.turnQueue) state.turnQueue = [];
                    if (!state.usedItems) state.usedItems = {};
                }
            } catch (e) {
                console.error('Load failed:', e);
            }
        }

        // ===== DATA LIBRARIES =====
        const DARES_LIST = ["ุงุฑูุต ุจูุฏู 30 ุซุงููุฉ", "ุงุนูู 10 ุถุบุท", "ุงุชููู ุฎููุฌู ููุฏูุฑ ุงูุฌุงู", "ุงูุชุจ ุจูุณุช ูุญุฑุฌ", "ุงุนุฒู ุงููู ุนูู ุญุงุฌุฉ", "ุบูู ูุนูุฑู ุฏูุงุจ ุนุงูู", "ููู ููุชุฉ ุจุงูุฎุฉ", "ุงูุดู ูุดูุฉ ุงูุจุทุฑูู", "ุงุนูู ุตูุช ูุฑุฎุฉ", "ุณูุจ ุชูููููู ููุชูุญ ุฏูููุชูู ูุน ุงููู ุฌูุจู"];

        const SPY_CATEGORIES = {
            'ุฃูุงูู ุฎุฑูุฌ': ["ุณูุชู ุณุชุงุฑุฒ", "ููู ุงูุนุฑุจ", "ูุงูุฑู ููุณุชููุงู", "ููุดู ุฃูู ูุตุฑ", "ุญุฏููุฉ ุงูุฃุฒูุฑ", "ุจุฑุฌ ุงููุงูุฑุฉ", "ุงูุฃูุฑุงูุงุช", "ุงูุญุณูู", "ุงููุนุฒ", "ูุณุท ุงูุจูุฏ", "ุฏุฑูู ุจุงุฑู", "ุฒูุฏ ุจุงุฑู", "ุงูุณุงุญู ุงูุดุฑูุฑ", "ุฏูุจ", "ุงูุฌููุฉ", "ุงูููุทู"],
            'ุฃููุงุช': ["ูุดุฑู", "ูุงูุฏููุงูุฏุฒ", "ููุชุงูู", "ุจุงุฒููุง", "ุญุถุฑููุช", "ุตุจุญู ูุงุจุฑ", "ุงูุจุฑูุณ", "ุงููุงููู", "ุงูุนุจุฏ", "ุฅูุชูุงู", "ุจูุจุณู", "ุดูุจุณู", "ุฅูุฏููู", "ุดุงูุฑูุง", "ุญูุงูุดู", "ูุณูุฎ", "ุณูุดู", "ุณููุงุจูู", "ูุงูู"],
            'ุชูููููุฌูุง': ["ููุณุจูู", "ูุงุชุณุงุจ", "ุงูุณุชุฌุฑุงู", "ุชูู ุชูู", "ุชููุชุฑ", "ููุชููุจ", "ุทูุจุงุช", "ุฃูุจุฑ", "ุฅู ุฏุฑุงูู", "ุงูุณุชุงุจุงู", "ุฒููู", "ุจุจุฌู", "ูุงูุฏู ูุฑุงุด"],
            'ููุงุตูุงุช': ["ุงููุชุฑู", "ุงููููุฑูุจุงุต", "ุงูุชููุชูู", "ุงูุชุงูุณู", "ุฃูุจุฑ", "ุงูุทุฑูุงู", "ุงููุทุฑ", "ุงูุทูุงุฑุฉ", "ุงูุนุจุงุฑุฉ", "ุงูุณููุชุฑ", "ุงูุนุฌูุฉ", "ุงูููููุฑูู"],
            'ููู': ["ููุชููุจุฑ", "ุงูููููุณุฑ", "ููุชูุฌุฑุงูุฑ", "ุฏูููุฑู", "ููู ุณูุชุฑ", "ุจุฑูุฌุฑุงูุฑ", "ูุงุจุชู ุฃูุจุฑ", "ููุฏูู", "ูููุจ ุฃุฑุชูุณุช", "ุฌููุฑ", "ุจููุฌุฑ"]
        };

        const CHARADES_DATA = {
            'ุฃููุงู ููููุฏู': ["ุงูููุจู", "ุนุณู ุฃุณูุฏ", "ุฅูุณ ูุงุฑุฌ", "ุบุจู ููู ููู", "ููู ุงูุตูู ุงูุนุธูู", "ุทูุฑ ุฅูุช", "ูุง ุชุฑุงุฌุน ููุง ุงุณุชุณูุงู", "ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงูุซุฉ", "ุจูู ุงูุญุธ", "ูุด ุฅุฌุฑุงู", "ูุฏู ุฑุถุง", "ูุทุจ ุตูุงุนู", "ุธุฑู ุทุงุฑู", "ุจูุจู ุญูุฑุงู", "ุณููุฑ ูุดููุฑ ูุจููุฑ", "ุงููุงุธุฑ", "ุฌุงุกูุง ุงูุจูุงู ุงูุชุงูู", "ุฃุจู ุนูู", "ุฒูู ุดุงู", "ุจูุดูุงุด", "ูุฑูุฑ", "ูุฑุฌุงู ุฃุญูุฏ ูุฑุฌุงู", "ุฅุชุด ุฏุจูุฑ"],
            'ุฃูุดู': ["ุงูููู ุงูุฃุฒุฑู", "ููุงุฏ ุฑุฒู", "ุฅุจุฑุงููู ุงูุฃุจูุถ", "ุงูุฌุฒูุฑุฉ", "ุชูุชู", "ุงููุตูุญุฉ", "ููุฑุฉ ูุงูุฌู", "ุงูุฎููุฉ", "ููุงูู ุฅุณููุฏุฑูุฉ", "ุฃุณู ุนูู ุงูุฅุฒุนุงุฌ", "ุนูุงุฑุฉ ูุนููุจูุงู", "ุณูุฑ ุงูููุงูู", "ูุงุญุฏ ูู ุงููุงุณ", "ุฎุงุฑุฌ ุนู ุงููุงููู", "ุญูู ููุณุฑุฉ", "ุงููุฑุญ", "ูุจุงุฑูู", "ุชุฑุงุจ ุงููุงุณ"],
            'ูุณูุณูุงุช': ["ุงูุงุฎุชูุงุฑ", "ุงููุจูุฑ ุฃูู", "ุจู 100 ูุด", "ุฌุนูุฑ ุงูุนูุฏุฉ", "ุณูุงุญ ุงูุฌูุฒุฉ", "ูุง ูุฑุงุก ุงูุทุจูุนุฉ", "ููุถูุน ุนุงุฆูู", "ุงููุนุจุฉ", "ูู ุจูุชูุง ุฑูุจูุช", "ุงููุฏุงุญ", "ูุณู ุงูุฃุบุฑุงุจ", "ุงูุจุฑูุณ", "ุงูุฃุณุทูุฑุฉ", "ููููู ูุดุฑููุงู", "ุฑูุญ ุงููุฏุงู", "ุงููุตูุฉ", "ุณุงุจุน ุฌุงุฑ", "ุฃุจู ุงูุนุฑูุณุฉ", "ุจุงูุทู"],
            'ุดุฎุตูุงุช': ["ูุญูุฏ ุตูุงุญ", "ุจูุฌ ุฑุงูู", "ููุฌุฒ", "ุญูู ุจููุง", "ูุงุณููู ุนุฒ", "ุฑุถูู ุงูุดุฑุจููู", "ุดูุฑูู ุนุจุฏ ุงูููุงุจ", "ูุญูุฏ ุฑูุถุงู", "ุชุงูุฑ ุญุณูู", "ุนูุฑู ุฏูุงุจ", "ุฃุญูุฏ ุญููู", "ููู ุฒูู", "ุนุงุฏู ุฅูุงู", "ุญุณู ุดุงููุด", "ูุฑูุงู ุจุงุจูู", "ุฃุจู ุงูููู", "ุงูููููุงุก", "ูุชุฑู ุงูุฃููุงู"]
        };

        const QUOTES_DATA = [
            { "quote": "ุงุนูู ููุณู ููุช ุงุนูู ููุณู ููุช", "work": "ุงููุงุธุฑ", "actor": "ุนูุงุก ููู ุงูุฏูู" },
            { "quote": "ุงูุชู ูุงุจุณู ุงูุจูุทููู ููุง", "work": "ุงูููุจู", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ุงูุชู ุจุชุชูููู ูุฏู ููู ูุง ูุฑู", "work": "ุงูุงููุงูู", "actor": "ูุญูุฏ ุฑูุถุงู" },
            { "quote": "ุงูุช ููู ุฏูุง ูุงูุจุช ุนููู ุฎุฑุงุจุงุช ูุตุฑ ูููุง", "work": "ุงูุงููุงูู", "actor": "ูุญูุฏ ุฑูุถุงู" },
            { "quote": "ูู ุญูู ูุญุฏุฏ ุนุงูุฒุงูู ุงุญูู ุจููุ", "work": "ุชูุชุฉ ุฑููุจุฉ", "actor": "ูุญูุฏ ูููุฏู" },
            { "quote": "ูุงุดุฑุจุด ุนูุฏู ุจุฑุชูุงู ..", "work": "ุงููุฑููุทู", "actor": "ุฃุญูุฏ ุขุฏู" },
            { "quote": "ูุด ุฃูุง ุนูุฏ ูููุงุฏู ุงูููุฑุฏุฉ", "work": "ุงูุชุฌุฑุจุฉ ุงูุฏููุงุฑููุฉ", "actor": "ุนุงุฏู ุฅูุงู" },
            { "quote": "ูู ุชุงููู ุงุนุฏุงุฏู ุงู ุชุงูุชู ุงุนุฏุงุฏู ูู ุงูุฑููุฌ ุฏู", "work": "ูุด ุฅุฌุฑุงู", "actor": "ูุญูุฏ ูููุฏู" },
            { "quote": "ููุง ุจูุฎุทู ุจูุงุช ูู ุซุงููู.. ุจุชุนูู ูููู ุงููุ .. ุจูุฑุฌุนูู ุฅุนุฏุงุฏู", "work": "ูุด ุฅุฌุฑุงู", "actor": "ูุญูุฏ ูููุฏู" },
            { "quote": "ุนุงูุฒู ุชุนููู ุฏุนูู ุชูุฒ ุงูููุงุจุฑ", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ููุณู ุนูุฏ" },
            { "quote": "ุงุนูุฐ ุจุงููู ููู ูุง ุจูุชู ูุฏู ุดุฑุจุงุท ุงูู ุงููุฃู ุฏู", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ููุณู ุนูุฏ" },
            { "quote": "ุฌูู ุฒุญููู.. ุจุทุนู ุงููุงุชุดุจ", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ุฃุญูุฏ ุญููู" },
            { "quote": "ุฃูููู ููู ููุง ุชุฒุนูุด", "work": "ุฃุฎุทุฑ ุฑุฌู ูู ุงูุนุงูู", "actor": "ูุคุงุฏ ุงููููุฏุณ" },
            { "quote": "ุขูุณุฉ ุฒูุฒูุ .. ุขูุณุฉ ููููููู", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ุฃุญูุฏ ุญููู" },
            { "quote": "ุฒูุฑูุง ุงูุฏุฑุฏูุฑู ูุฏุฑุณ ุฑูุงุถูุงุช ููุฑูุณุงูู", "work": "ุงููุงุธุฑ", "actor": "ููุณู ุนูุฏ" },
            { "quote": "ููุงูู ููุงูู ูุตูุช ููููุชุฑ .. ููุช ุดููุช ุฑูุญุชู ูุฏุงุจ", "work": "ุงููุงุธุฑ", "actor": "ููุณู ุนูุฏ ู ุญุณู ุญุณูู" },
            { "quote": "ุงุญุท ูุงู โฆ ุญุท ูกู ุ ูจู ู ุนููู ุนูู ุงูุนุฏุงุฏ ู ุฎููู ูุชูุตู", "work": "ุงููุงุธุฑ", "actor": "ููุณู ุนูุฏ ู ุญุณู ุญุณูู" },
            { "quote": "ุงูุบู ุนูุฏู ููุดูู ูุง ูุทูู", "work": "ุฌุนูุชูู ูุฌุฑูุงู", "actor": "ุญุณู ุญุณูู" },
            { "quote": "ุฃูุง ูุด ุชุจุน ุญุฏ.. ุฃูุง ุฑุฆูุณ ุฌูููุฑูุฉ ููุณู", "work": "ุฒูู ุดุงู", "actor": "ูุญูุฏ ุดุฑู" },
            { "quote": "ุงูู ุงุณู", "work": "ุนุณูุฑ ูู ุงููุนุณูุฑ", "actor": "ุณูููุงู ุนูุฏ" },
            { "quote": "ุงุฏููู ุจูุณู ุนุดุงู ุชุนุจุงู", "work": "ุนุณูุฑ ูู ุงููุนุณูุฑ", "actor": "ูุญูุฏ ุดุฑู" },
            { "quote": "ูุงุฑุจ ุนุฏู ุงูุณุชูู ุณุจุนูู ุณูู ุฏูู ุนูู ุฎูุฑ", "work": "ุชุชุญ", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุนูู ุญุถุฑุชู ุฌู ูุตุญููู ุนุดุงู ุชูููู ุงุนุฑู ุทุจูุ", "work": "ุชุชุญ", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุฃูู ููู ู ูุดุฑุจ ููู .. ุงุญูุง ุดุบุงููู ุนูุฏ ุงูุชุงุจุนู!", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุฑููุฏ ูุฑููุฏ ูุนูู ูุชุฑูุฏ ูู ููุจ ุงูุฌูู", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุงุงุงุงุง ุฅูุง ูุงูููู ุฏู .. ูุงููู ุฏู ุฃูุง ุนุงุฑููุง ูู ุงูุงููุงู ุงูุงุฌูุจูู", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" },
            { "quote": "ูุด ุฃูุง ุงููู ูุชูุงูู ุฅุฐูุจ ุฅูู ุงูุฌุญูู ูุง ุจูุฑ ุจูู", "work": "ุจูุดูุงุด", "actor": "ูุญูุฏ ุณุนุฏ" }
        ];

        const FIVE_SECOND_QUESTIONS = [
            { "text": "ุงุฐูุฑ 3 ูุทุฑุจูู ุฑุงุจ ูุตุฑููู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงู ูุฃุญูุฏ ุญููู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงุน ูุญุดู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุญุทุงุช ูุชุฑู ูู ุงูุฎุท ุงูุฃูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃูุงูู ููุฎุฑูุฌ ูู ุงูุฒูุงูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงู ุธูุฑ ูููุง ูุญูุฏ ุฑูุถุงู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุญุงุฌุงุช ููุฌูุฏุฉ ูู ุดูุทุฉ ุงูุฌูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃุณูุงุก ูุณูุณูุงุช ูู ุฑูุถุงู ุงููู ูุงุช", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุญุงุฌุงุช ุจุชุชุญุท ุนูู ุงููุดุฑู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุงุนูุจุฉ ุจููุนุจูุง ูู ุงูููุชุฎุจ ุญุงููุงู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงุน ุนุฑุจูุงุช ููุชุดุฑุฉ ูู ูุตุฑ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูููุงุช ูุจูุฑุฉ ูู ุงููุงูุฑุฉ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุญุงูุธุงุช ูู ุงูุตุนูุฏ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงู ููุฌูุฏุฉ ูู ุนูู ูุตุฑ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุญุงุฌุงุช ุจูุนูููุง ุฃูู ููู ุงูุนูุฏ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃุบุงูู ูุนูุฑู ุฏูุงุจ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูููุงุช ููุชููุจ ูุตุฑูุฉ ูุดููุฑุฉ", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุฃููุงุช ุจุชุชุงูู ูู ุดู ุงููุณูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ุดุฎุตูุงุช ูู ูุณูุณู ุงููุจูุฑ ุฃูู", "answersNeeded": 3 },
            { "text": "ุงุฐูุฑ 3 ูุงุฑูุงุช ุดูุจุณู ุฃู ุณูุงูุณ", "answersNeeded": 3 }
        ];

        const BUS_CATEGORIES = [
            { name: 'ุญุงุฌุฉ', items: ['ูุชุงุจ', 'ููู', 'ููุจุงูู', 'ุณุงุนุฉ', 'ููุจุงูุฉ', 'ููุชุงุญ', 'ูุธุงุฑุฉ', 'ุดูุทุฉ', 'ูุญูุธุฉ', 'ุจุทุงููุฉ'] },
            { name: 'ุญููุงู', items: ['ุฃุณุฏ', 'ููู', 'ูุทุฉ', 'ููุจ', 'ุญุตุงู', 'ุฌูู', 'ููุฑ', 'ุฏุจ', 'ุฒุฑุงูุฉ', 'ูุฑุฏ'] },
            { name: 'ูููุฉ', items: ['ุฏูุชูุฑ', 'ูููุฏุณ', 'ูุนูู', 'ูุญุงูู', 'ุทูุงุฑ', 'ุดูู', 'ููุงู', 'ูุงุชุจ', 'ุฑูุงุถู', 'ุตุญูู'] },
            { name: 'ุจูุฏ', items: ['ูุตุฑ', 'ุงูุณุนูุฏูุฉ', 'ุงูุฅูุงุฑุงุช', 'ุชุฑููุง', 'ูุฑูุณุง', 'ุฃูุฑููุง', 'ุฅูุทุงููุง', 'ุงููุงุจุงู', 'ุงููุบุฑุจ', 'ุงูุฃุฑุฏู'] },
            { name: 'ุฃููุฉ', items: ['ูุดุฑู', 'ูุจุฏุฉ', 'ูููุฎูุฉ', 'ูุญุดู', 'ููู', 'ุทุนููุฉ', 'ููุชุฉ', 'ุฏุฌุงุฌ', 'ุณูู', 'ููุฑููุฉ'] },
            { name: 'ูุงููุฉ', items: ['ุชูุงุญ', 'ููุฒ', 'ุจุฑุชูุงู', 'ูุงูุฌู', 'ุนูุจ', 'ูุฑุงููุฉ', 'ุฎูุฎ', 'ููุซุฑู', 'ุจุทูุฎ', 'ุดูุงู'] }
        ];

        const LIAR_CARDS = [
            { topic: "ุนูุฑู ุฏูุงุจ", facts: ["ููุจู ุงููุถุจุฉ", "ูุณุจ ุงููููุฒู ุฃููุฑุฏ 7 ูุฑุงุช", "ุนูู ุฏููุชู ูุน ุจูููุณูู"] },
            { topic: "ูุญูุฏ ุตูุงุญ", facts: ["ูุนุจ ูู ุงูููุงูููู ุงูุนุฑุจ", "ูุฏุงู ูููุฑุจูู ุงูุชุงุฑูุฎู", "ูุนุจ ูู ุงููุงุฏู ุงูุฃููู ุณุงุจูุงู"] },
            { topic: "ููุฑ ุงูููู", facts: ["ุฃุทูู ููุฑ ูู ุงูุนุงูู", "ุจููุฑ ุจู 11 ุฏููุฉ ุฃูุฑูููุฉ", "ููุจุนู ุงูุฃุตูู ุจุญูุฑุฉ ูุงุตุฑ"] },
            { topic: "ุนุงุฏู ุฅูุงู", facts: ["ููุจู ุงูุฒุนูู", "ุนูู ูุณุฑุญูุฉ ูุฏุฑุณุฉ ุงููุดุงุบุจูู", "ูุซู ูููู ุงูุฒูุฌุฉ ุงูุซุงููุฉ"] },
            { topic: "ุงูุฃูุฑุงูุงุช", facts: ["ุฎููู ูุฎูุฑุน ููููุฑุน", "ููุฌูุฏุฉ ูู ุงูุฌูุฒุฉ", "ุจูููุง ูุงุฆูุงุช ูุถุงุฆูุฉ"] },
            { topic: "ุญุณู ุดุงููุด", facts: ["ูุบูู ููุฑุฌุงูุงุช", "ุบูู ุจูุช ุงูุฌูุฑุงู", "ูุงู ูุบูู ูู ุงูุฃูุจุฑุง ุฒูุงู"] },
            { topic: "ุงููุดุฑู", facts: ["ููู ุฑุฒ ูููุฑููุฉ ูุนุฏุณ", "ุฃููุฉ ูุตุฑูุฉ ุดุนุจูุฉ", "ุฃุตูู ุฃููุฉ ุฅูุทุงููุฉ"] },
            { topic: "ุจุฑุฌ ุงููุงูุฑุฉ", facts: ["ุงุชุจูู ูู ุนูุฏ ุฌูุงู ุนุจุฏ ุงููุงุตุฑ", "ุดููู ุนูู ููุฆุฉ ุฒูุฑุฉ ุงูููุชุณ", "ุฃุทูู ูู ุจุฑุฌ ุฎูููุฉ"] },
            { topic: "ุงููุฑุงุนูุฉ", facts: ["ุญูุทูุง ุงูููุชู", "ุจููุง ูุนุจุฏ ุงููุฑูู", "ูุงููุง ุจูุงูููุง ุจูุชุฒุง"] }
        ];

        const AUCTION_CATEGORIES = [
            { name: "ุฃุณูุงุก ูุญุทุงุช ูุชุฑู ุงูุฎุท ุงูุฃูู", maxAnswers: 20 },
            { name: "ุฃุณูุงุก ูุงุนุจู ุงููุงุฏู ุงูุฃููู ุงูุญุงูููู", maxAnswers: 20 },
            { name: "ุฃููุงู ุงูุฒุนูู ุนุงุฏู ุฅูุงู", maxAnswers: 20 },
            { name: "ูุญุงูุธุงุช ุฌูููุฑูุฉ ูุตุฑ ุงูุนุฑุจูุฉ", maxAnswers: 20 },
            { name: "ุฃููุงุน ูุงุฑูุงุช ุณูุงุฑุงุช", maxAnswers: 20 },
            { name: "ุฃุณูุงุก ููุงูู", maxAnswers: 20 },
            { name: "ุฏูู ูุงุฑุฉ ุฃูุฑูููุง", maxAnswers: 20 },
            { name: "ุฃุบุงูู ูุนูุฑู ุฏูุงุจ", maxAnswers: 20 },
            { name: "ุฃููุงุช ูุตุฑูุฉ ุดุนุจูุฉ", maxAnswers: 20 }
        ];

        const GIBBERISH_DATA = [
            { "gibberish": "ุณู ุฏู ุชุด ูุจ ุฏุง", "answer": "ุณุงูุฏูุชุด ูุจุฏุฉ" },
            { "gibberish": "ุจุง ุงู ูู ูู ุงู", "answer": "ุจูููู ุฅูู" },
            { "gibberish": "ูุณ ุงุก ุงู ุฎู ูุฑ", "answer": "ูุณุงุก ุงูุฎูุฑ" },
            { "gibberish": "ูุญ ุดู ูุฑ ูุจ", "answer": "ูุญุดู ูุฑูุจ" },
            { "gibberish": "ุญุง ู ู ุจู ูุง", "answer": "ุญูู ุจููุง" },
            { "gibberish": "ูู ุฌุฒ ุงู ุบู ุงุจ ุง", "answer": "ููุฌุฒ ุงูุบูุงุจุฉ" },
            { "gibberish": "ูุง ู ุฑู ูู ู", "answer": "ูุงูุฑููู" },
            { "gibberish": "ูู ุตู ุฑ ุชุดู ูุฑ ูู ูู", "answer": "ููุตูุฑ ุดููุฑูููู" },
            { "gibberish": "ูู ุจุฑ ู ุงู ุชู ุจุฑ", "answer": "ููุจุฑู ุฃูุชูุจุฑ" },
            { "gibberish": "ุณุง ุญู ุด ุฑู ุฑ", "answer": "ุณุงุญู ุดุฑูุฑ" },
            { "gibberish": "ูู ุจุง ูู ุณุงู ุณูู ุฌ", "answer": "ููุจุงูู ุณุงูุณููุฌ" },
            { "gibberish": "ูุง ุฏู ุงู ุฒู ุงู ู", "answer": "ูุงุฏู ุงูุฒูุงูู" },
            { "gibberish": "ูุง ุฏู ุงู ุงู ูู", "answer": "ูุงุฏู ุงูุฃููู" },
            { "gibberish": "ุงู ุจ ุฑ ู ู ุฑู ู", "answer": "ุฃูุจุฑ ููุฑูู" },
            { "gibberish": "ุทู ุจ ุงุช ุฏ ูู ู ุฑู", "answer": "ุทูุจุงุช ุฏูููุฑู" },
            { "gibberish": "ู ุญ ู ุฏ ุต ู ุงุญ", "answer": "ูุญูุฏ ุตูุงุญ" }
        ];

        const HUM_SONGS = [
            { "song": "ุชุณูู ุงูุฃูุงุฏู", "difficulty": "ุณูู" },
            { "song": "ุจุดุฑุฉ ุฎูุฑ", "difficulty": "ุณูู" },
            { "song": "3 ุฏูุงุช", "difficulty": "ุณูู" },
            { "song": "ุฅูุช ุนูุฑู", "difficulty": "ุตุนุจ" },
            { "song": "ุณุทูุงูุฉ", "difficulty": "ุณูู" },
            { "song": "ูุฎุงุตูุงู", "difficulty": "ูุชูุณุท" },
            { "song": "ุงูุบุฒุงูุฉ ุฑุงููุฉ", "difficulty": "ุณูู" },
            { "song": "ุณุชู ุฃูุง", "difficulty": "ุณูู" },
            { "song": "ุฃู ูู ูุนุจุช ูุง ุฒูุฑ", "difficulty": "ูุชูุณุท" },
            { "song": "ุนูุฏ ุงูุจุทู", "difficulty": "ุณูู" },
            { "song": "ุชููู ูุนุงู", "difficulty": "ูุชูุณุท" },
            { "song": "ุญุจูุจู ูุง ููุฑ ุงูุนูู", "difficulty": "ุตุนุจ" },
            { "song": "ุงูุจุฎุช", "difficulty": "ุตุนุจ" },
            { "song": "ุงูุฏููุง ุฑุจูุน", "difficulty": "ูุชูุณุท" },
            { "song": "ุฃูุง ูููุง ูุจุฑุช ุตุบูุฑ", "difficulty": "ูุชูุณุท" },
            { "song": "ุฃูุงู ูู ุงูุนูุฑ", "difficulty": "ุตุนุจ" },
            { "song": "ุฑุงูุญูู ูุณูุฑ", "difficulty": "ุณูู" },
            { "song": "ูุชุนูููุง", "difficulty": "ูุชูุณุท" },
            { "song": "ููู ุชูุงุช", "difficulty": "ูุชูุณุท" },
            { "song": "ููููููุฑ ููููููุฑ", "difficulty": "ุณูู" },
            { "song": "ุฅุฎูุงุชู", "difficulty": "ุณูู" },
            { "song": "ุดููุงุก", "difficulty": "ุณูู" },
            { "song": "ุฃูุช ุงูุญุธ", "difficulty": "ูุชูุณุท" },
            { "song": "ูุงุณููู ููู", "difficulty": "ุตุนุจ" },
            { "song": "ููู ุงูู ูุงูุช ุจุชููููู", "difficulty": "ุณูู" },
            { "song": "ุฃูู ูููุฉ ููููุฉ", "difficulty": "ุตุนุจ" },
            { "song": "ุณูุงุญ", "difficulty": "ุตุนุจ" }
        ];

        const MOST_LIKELY = [
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุชุฎุงูู ุนุดุงู ุงูุญุณุงุจุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุณุงูุฑ ูููุณู ูููู ูุฃูููุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุนูู ุญุงุฏุซุฉ ุจุงูุนุฑุจูุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุณู ุนูุฏ ูููุงุฏ ูุฑุงุชู/ุตุงุญุจุชูุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุญูุฑ ูู ุงููุตุตุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูุตุฑู ูุฑุชุจู ูู ูููููุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุงูู ููุจูุชุฎูุดุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุงู ูู ุงูููุงุตูุงุช ููููุชู ุงููุญุทุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูุฏูู ุชูู ุชููุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุตูุชู ุนุงูู ูู ุงูููุงูุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุจุณ ุทูู ุบุฑูุจ ูู ูุฑุญุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ููุงุฌุฑ ููุณูุจ ุงูุจูุฏ ูุฌุฃุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุญุจ ุงูููุฏ ูุงูุฏุฑุงูุงุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ูููู ูููุน ุงูููุจุงูู ูููุณุฑ ุงูุดุงุดุฉุ",
            "ููู ุฃูุชุฑ ูุงุญุฏ ุจูุนูู ูุตุงูุจ ููู ุตุบูุฑุ"
        ];

        const HEADS_UP_DATA = {
            'ูููุชูู': ["ูุญูุฏ ุตูุงุญ", "ุนูุฑู ุฏูุงุจ", "ุงูุฃูุฑุงูุงุช", "ูุดุฑู", "ุงููุชุฑู", "ุงูุณุงุญู ุงูุดูุงูู", "ุฑูุถุงู ุตุจุญู", "ุนุงุฏู ุฅูุงู", "ุฃุญูุฏ ุญููู", "ููู ุฒูู", "ุดูุฑูู", "ุชุงูุฑ ุญุณูู", "ููุฌุฒ", "ูุงูุฑููู", "ุงูุฃููู", "ุงูุฒูุงูู", "ุจุฑุฌ ุงููุงูุฑุฉ", "ููุฑ ุงูููู", "ุชููุชูู", "ูููุฑูุจุงุต", "ูุงููุณ ุฑูุถุงู", "ุดู ุงููุณูู", "ุงูุฌููุฉ", "ูุญูุฏ ุฑูุถุงู", "ุฌุนูุฑ ุงูุนูุฏุฉ", "ุงููุจูุฑ ุฃูู", "ุญุฒูููู", "ุฃุญูุฏ ููู", "ุจูููู ูุคุงุฏ", "ุญุณู ุดุงููุด", "ุญูู ุจููุง", "ูุงุณููู ุตุจุฑู", "ุฑุถูู ุงูุดุฑุจููู", "ุฃุจู ุงูููู", "ุณูุฏูุชุด ูุจุฏุฉ", "ุนุตูุฑ ูุตุจ", "ููู ูุทุนููุฉ"],
            'ุญููุงูุงุช': ["ุฃุณุฏ", "ููู", "ุฒุฑุงูุฉ", "ูุฑุฏ", "ููุจ", "ูุทุฉ", "ููุฑ", "ููุฏ", "ุฏุจ", "ุจุทุฑูู", "ูุนุงูุฉ", "ุชูุณุงุญ", "ุซุนุจุงู", "ูุณุฑ", "ุตูุฑ", "ุจุบุจุบุงู", "ุญูุงุฑ ูุญุดู", "ุญุตุงู", "ุฌูู", "ุจูุฑุฉ", "ุฎุฑูู", "ูุนุฒุฉ", "ุฏูู", "ูุฑุฎุฉ", "ุจุทุฉ", "ูุฒุฉ", "ุฃุฑูุจ", "ุณูุญูุงุฉ", "ุถูุฏุน", "ุณููุฉ", "ูุฑุด", "ุญูุช", "ุฏููููู", "ุฃุฎุทุจูุท", "ุฌูุจุฑู", "ูุงุจูุฑูุง", "ุนููุจูุช", "ูููุฉ", "ูุญูุฉ", "ุฏุจุงูุฉ", "ูุงููุณุฉ", "ุตุฑุตุงุฑ", "ูุงุฑ"],
            'ุฃููุงุช': ["ุจูุชุฒุง", "ุจุฑุฌุฑ", "ุดุงูุฑูุง", "ูุดุฑู", "ูุญุดู", "ูููุฎูุฉ", "ูุชุฉ", "ูุจุงุจ ูููุชุฉ", "ุญูุงูุดู", "ููุจุงุฑ", "ูุจุฏุฉ", "ุณุฌู", "ููู", "ุทุนููุฉ", "ุจุตุงุฑุฉ", "ูุณูุนุฉ", "ุจุงููุฉ", "ุณุจุงูุฎ", "ูููุงุณ", "ุนุฏุณ", "ููุฑููุฉ ุจุดุงููู", "ูุฌุฑุณูู", "ุฑูุงู", "ุฌูุงุด", "ุณูุจูุณู", "ุณูุดู", "ุฅูุฏููู", "ุจุทุงุทุณ ูุญูุฑุฉ", "ุดูุจุณู", "ุจูุจุณู", "ุฃูุณ ูุฑูู", "ุดููููุงุชุฉ", "ููุงูุฉ", "ุจุณุจูุณุฉ", "ูุทุงูู", "ุฒูุงุจูุฉ", "ุจูุญ ุงูุดุงู", "ุฃุฑุฒ ุจูุจู", "ุฃู ุนูู"],
            'ุฃูุนุงู': ["ุจูุฌุฑู", "ุจูุงูู", "ุจูุดุฑุจ", "ุจูุนูุท", "ุจูุถุญู", "ูุงูู", "ุจูุฐุงูุฑ", "ุจูุทุจุฎ", "ุจูุณูู", "ุจูุบูู", "ุจูุฑูุต", "ุจูุตูู", "ุจูุณุชุญูู", "ุจูุณุฑุญ ุดุนุฑู", "ุจูุบุณู ุณูุงูู", "ุจูุชูุฑุฌ ุน ุงูุชูููุฒููู", "ุจููุนุจ ููุฑุฉ", "ุจูุณุจุญ", "ุจูุทูุฑ", "ุจููุน", "ุจููุชุจ", "ุจููุฑุฃ", "ุจูุชููู ูู ุงูุชููููู", "ุจูุตูุฑ ุณูููู", "ุจูุดุฑุจ ุดูุดุฉ", "ุจููุนุจ ุถุบุท", "ุจููุท ุงูุญุจู", "ุจูุชูุดู", "ุจูุฒุนู", "ุจูููุณ", "ุจูุบูุฒ", "ุจูุตูู", "ุจูุดุงูุฑ", "ุจูุญูู", "ุจููููู", "ุจููุดุฑ ุงูุบุณูู"]
        };

        const EMOJI_QUIZ_DATA = {
            'ุฃููุงู ุนุฑุจู': [
                { emojis: "๐จโ๐ซ๐๐ฟ", answer: "ุงููุงุธุฑ", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐๐ป", answer: "ุงูุจูุช ุจูุชู", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐๐ฆ", answer: "ุงูููู ุงูุฃุฒุฑู", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐ฏ๐ค", answer: "ุนุณู ุฃุณูุฏ", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐๏ธ๐งฟ", answer: "ุฎูุณุฉ ูุฎููุณุฉ", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐ฐ๐ฌ", answer: "ุชูุชุฉ ุฑููุจุฉ", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐๏ธ๐", answer: "ุงูุณุงุญู ุงูุดุฑูุฑ", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐งโโ๏ธโฐ๏ธ", answer: "ูุง ูุฑุงุก ุงูุทุจูุนุฉ", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐ข๐งฑ", answer: "ุจู 100 ูุด", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐จโ๐ฉโ๐งโ๐ฆ๐๐", answer: "ููุถูุน ุนุงุฆูู", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐ฆ๐ฎโโ๏ธ", answer: "ุงูุงุฎุชูุงุฑ", category: "ุฃููุงู ุนุฑุจู" },
                { emojis: "๐โโ๏ธ๐ฅ๐ซ", answer: "ุฌุฑู ุงููุญูุด", category: "ุฃููุงู ุนุฑุจู" }
            ],
            'ุฃููุงู ุฃุฌูุจู': [
                { emojis: "๐ข๐ง๐ป", answer: "ุชูุชุงููู", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ท๏ธ๐ธ๏ธ๐ด", answer: "ุณุจุงูุฏุฑ ูุงู", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ฆ๐๐", answer: "ุงูุฃุณุฏ ุงูููู", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ซ๐ญ", answer: "ูููู ูููุง / ูุตูุน ุงูุดููููุงุชุฉ", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐๐", answer: "ูููู (Finding Nemo)", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "โก๐", answer: "ูุงุฑู ุจูุชุฑ", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐๐๐", answer: "ููุฑุฏ ุฃูู ุฐุง ุฑููุฌุฒ", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ดโโ๏ธ๐ฆ", answer: "ูุฑุงุตูุฉ ุงููุงุฑูุจู", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐๐จ๐ก", answer: "Fast & Furious", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ฆ๐จ", answer: "ุจุงุชูุงู", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐คก๐", answer: "IT", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ฝ๐ฒ๐", answer: "E.T.", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐งธ๐ค๐", answer: "Toy Story", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ผ๐ฅ", answer: "Kung Fu Panda", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐น๐๐", answer: "The Devil Wears Prada", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐๐๐ฉ", answer: "Lady and the Tramp", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐๐จโ๐ณ", answer: "Ratatouille (ุงููุงุฑ ุงูุทุจุงุฎ)", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐ฆ๐๐คก", answer: "The Dark Knight", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐งโโ๏ธ๐๐", answer: "Lord of the Rings", category: "ุฃููุงู ุฃุฌูุจู" },
                { emojis: "๐๐จ๐ฌ", answer: "Ant-Man", category: "ุฃููุงู ุฃุฌูุจู" }
            ],
            'ุฃููุงู ุฏูุฒูู': [
                { emojis: "๐๐๐ด", answer: "Up", category: "ุฃููุงู ุฏูุฒูู" },
                { emojis: "๐ฆ๐๐", answer: "ุงูุฃุณุฏ ุงูููู", category: "ุฃููุงู ุฏูุฒูู" },
                { emojis: "๐๐๐", answer: "Finding Nemo", category: "ุฃููุงู ุฏูุฒูู" },
                { emojis: "๐งธ๐ค๐", answer: "Toy Story", category: "ุฃููุงู ุฏูุฒูู" },
                { emojis: "๐ผ๐ฅ", answer: "Kung Fu Panda", category: "ุฃููุงู ุฏูุฒูู" }
            ],
            'ูุณูุณูุงุช': [
                { emojis: "๐ฅ๐ง", answer: "ูุงุฑ ูุชูุฌ (Game of Thrones)", category: "ูุณูุณูุงุช" },
                { emojis: "๐งโโ๏ธ๐งโโ๏ธ", answer: "The Walking Dead", category: "ูุณูุณูุงุช" },
                { emojis: "๐ฐ๐ฆ๐ญ", answer: "La Casa De Papel", category: "ูุณูุณูุงุช" },
                { emojis: "๐ฆ๐ฎ", answer: "Squid Game", category: "ูุณูุณูุงุช" },
                { emojis: "โ๏ธ๐๐ฉ", answer: "Queen's Gambit", category: "ูุณูุณูุงุช" },
                { emojis: "๐งชโ๏ธ๐", answer: "Breaking Bad", category: "ูุณูุณูุงุช" },
                { emojis: "๐๐ธโ๏ธ", answer: "Game of Thrones", category: "ูุณูุณูุงุช" }
            ]
        };

        const LYRICS_DATA = [
            { part: "ุชููู ูุนุงู... ููู ุญุชู ุจุนูุฏ ุนูู ูู ููุจู...", answer: "ููุงู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฃูุช ุงูุญุธ... ุฏู ุฃูุง ุงููู ุชุณุงุจู...", answer: "ุงูุฃูุงู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ูุง ููุนูุน... ูุง ููุนูุน... ูุง...", answer: "ูุฏูุน", singer: "ูุตุทูู ุญุฌุงุฌ" },
            { part: "ุณูุฑ ูุญูู ูุญุทูุท ุนูู...", answer: "ูุฑููุฉ", singer: "ุญุณู ุดุงููุด" },
            { part: "ุงูุบุฒุงูุฉ...", answer: "ุฑุงููุฉ", singer: "ูุฑูู ูุญููุฏ ุนุจุฏ ุงูุนุฒูุฒ" },
            { part: "ุณุทูุงูุฉ... ุณุทูุงูุฉ... ุณุทูุงูุฉ...", answer: "ุณุทูุงูุฉ", singer: "ุนุจุฏ ุงูุจุงุณุท ุญููุฏุฉ" },
            { part: "ูุฎุงุตูุงู... ูุงุจุนุฏ ุนูู ุฃูุง...", answer: "ูุด ุทููุงู", singer: "ููุงู" },
            { part: "ุงูุจุฎุช... ุณุฃูุชูุง ูุฏูุฑุช ูู...", answer: "ููุจู", singer: "ููุฌุฒ" },
            { part: "ูููู ูุฏู... ูููู ููุง... ูุงููู ุฃูููู...", answer: "ุฃูุดูู", singer: "ููุฌุฒ" },
            { part: "ุฃู ูู ูุนุจุช ูุง...", answer: "ุฒูุฑ", singer: "ุฃุญูุฏ ุดูุจุฉ" },
            { part: "ููููููุฑ ููููููุฑ... ุจูุฑุฉ ูุจูู...", answer: "ููููููุฑ", singer: "ุงููุฏูุนุฌูุฉ" },
            { part: "ุนูุฏ ุงูุจุทู...", answer: "ููููู", singer: "ุญุณู ุดุงููุด" },
            { part: "ุจูุช ุงูุฌูุฑุงู ุดุบูุงูู ุฃูุง...", answer: "ุนููุง", singer: "ุญุณู ุดุงููุด" },
            { part: "ุฃูุง ูููุง ูุจุฑุช...", answer: "ุตุบูุฑ", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฑุงุฌุนูู ูุง ููู... ุฑุงุฌุนูู ูุง...", answer: "ููู", singer: "ููุฑูุฒ" },
            { part: "ูุณู ุนูููุง...", answer: "ุงูููู", singer: "ููุฑูุฒ" },
            { part: "ุฃูู ูููุฉ ููููุฉ... ูุตุฉ ูู...", answer: "ูููุฉ", singer: "ุฃู ููุซูู" },
            { part: "ุฃูุช ุนูุฑู... ุงููู ุงุจุชุฏู ุจููุฑู...", answer: "ุตุจุงุญู", singer: "ุฃู ููุซูู" },
            { part: "ุณูุงุญ... ููุงุดู ูู ุงูุจูุงุฏ...", answer: "ุณูุงุญ", singer: "ุนุจุฏ ุงูุญููู" },
            { part: "ูุง ุทูุจ ุงูููุจ ูููู...", answer: "ุญุฑุงู", singer: "ุนุจุฏ ุงููุฌูุฏ ุนุจุฏ ุงููู" },
            { part: "ููู ุชูุงุช... ุชูุงุช ุจูุงุช...", answer: "ูุจูููู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฏู ูู ุงุชุณุงุจ... ูุง ุฏู ุฃูุง...", answer: "ุฃุชุนุจ", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ูุง ูุงุณููู ููู... ุจููุจู...", answer: "ูุงุณู", singer: "ุชุงูุฑ ุญุณูู" },
            { part: "ููู ุงูู ูุงูุช...", answer: "ุจุชููููู", singer: "ุจูุงุก ุณูุทุงู" },
            { part: "ุงููุงุฏ ููุจู ุจููุฌุนู... ูุนุงูุฒ ุญุฏ...", answer: "ูุฏูุนู", singer: "ุจูุงุก ุณูุทุงู" },
            { part: "ุฃูุง ูุด ูุจููุงูู... ุฃูุง ูุงูู ุนูู...", answer: "ุฅูู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุญุจูุจู ูุง ููุฑ ุงูุนูู... ูุง ุณุงูู...", answer: "ุฎูุงูู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ููุฑูู... ููุฑูู... ุฏูู ููุง...", answer: "ุนูููู", singer: "ุนูุฑู ุฏูุงุจ" },
            { part: "ุฃูุง ูุตูู... ูุด ูุงุดู ูุจู ูุง...", answer: "ุชุชููู", singer: "ุจูุงุก ุณูุทุงู" },
            { part: "ูุง ุฃูุง ูุง ูุฃ... ูุญุฏุด ุชุงูู...", answer: "ูุง ุฃูุง", singer: "ุนูุฑู ุฏูุงุจ" }
        ];

        const STORY_DATA = [
            { start: "ุฏุฎูุช ุงูุณูุจุฑ ูุงุฑูุช ูููุช...", end: "ุดุจุดุจ" },
            { start: "ููู ูุฑุญู ุงูุชุดูุช ุฅู...", end: "ุจุงุชูุงู" },
            { start: "ูุชุญุช ุงูุชูุงุฌุฉ ูููุช...", end: "ุฌูุงุฑุจ" },
            { start: "ููุช ุณุงูู ุงูุนุฑุจูุฉ ููุฌุฃุฉ...", end: "ุฏููุงุตูุฑ" },
            { start: "ุงูุฏูุชูุฑ ูุงูู ูุงุฒู...", end: "ุฃุฑูุต" },
            { start: "ุตุญููุง ูู ุงูููู ููููุง...", end: "ุงููุฑูุฎ" },
            { start: "ุณุฑูุช ุงูุจูู ุนุดุงู...", end: "ุณุงูุฏูุชุด" },
            { start: "ุฑูุจุช ุงููููุฑูุจุงุต ูุฌูุจู...", end: "ูุถุงุฆู" },
            { start: "ูุฏูุฑู ูู ุงูุดุบู ุทูุจ ููู...", end: "ุฃุบูู" },
            { start: "ูู ุฃูู ููู ุฌุงูุนุฉ...", end: "ุจูุฌุงูุฉ" }
        ];

        const MORPH_DATA = ["ู ู ู", "ุด ู ุณ", "ุจ ุญ ุฑ", "ู ุช ุง ุจ", "ู ุฑ ุณ", "ุฌ ู ู", "ุน ู ู", "ู ุฑ ุฏ", "ุจ ู ุช", "ู ู ุฑ", "ุณ ู ู", "ู ู ุฑ", "ุฑ ู ู", "ุฒ ู ุฑ"];

        const ARTIST_DATA = ["ุนุฌูุฉ", "ูุธุงุฑุฉ", "ุดุฌุฑุฉ", "ุจุทูุฎุฉ", "ูุฑู", "ุดูููุฑ", "ูุฑูุญุฉ", "ูุฑุฎุฉ", "ุบุณุงูุฉ", "ุนุตููุฑุฉ", "ูุฑูุจ", "ุตุงุฑูุฎ", "ุณุงุนุฉ", "ูุฑุณู", "ููุจุงูู", "ุจูุชุฒุง", "ุดูุณูุฉ", "ุณููุฉ", "ุชูุงุญุฉ", "ุณุญุงุจุฉ"];

        const WHISPER_DATA = ["ุฃุฑูุจูุง ูู ูููุฑ ุฃููุฑ", "ุฎูุท ุญุฑูุฑ ุนูู ุญูุท ุฎููู", "ุดูุฑุทูู ุฃููู ุทูุฑุดูู", "ุตูุญุฉ ุณุจุนุฉ ุตุนุจุฉ", "ุฎุดุจุฉ ุงูุญุจุณ ุฎูุณ ุฎุดุจุงุช", "ููู ุฑุตุงุต ููุญุงูุฉ", "ุณูู ูููู ูุฑุฒ ุตูุงุฏูุฉ", "ููุฑููุฉ ุจุงูุจุดุงููู", "ุงูุฌู ุงูููุงุฏุฑุฉ ุญุฑ ุฌุฏุงู", "ุนุงูุฒ ุฃุดุฑุจ ุนุตูุฑ ูุตุจ", "ููุชุงุญ ุงูุนุฑุจูุฉ ุถุงุน ููู", "ุจูุฑู ุงูุดุบู ุจุฏุฑู", "ุงููุงุฌุจ ูุงู ุตุนุจ ุฃูู", "ุนูุฏ ูููุงุฏ ุณุนูุฏ ูุง ุฌููู", "ุฑูุถุงู ูุฑูู ููู ุณูุฉ ูุงูุชู ุทูุจูู", "ุจุทุฉ ุจุทุชูู ุจุทุช ุจุทู ุจุทุชูุง", "ุณุช ุจุณุจูุณุฉ ุจูุงูุณูู ูุงูุณูุฑ", "ูุฑุฎุฉ ูุดููุฉ ุนูู ุงููุญู", "ูุง ูุงุฎุฏ ุงููุฑุฏ ุนูู ูุงูู", "ุงููู ุจูุชู ูู ุฒุฌุงุฌ", "ูู ุทูุจ ุงูุนูุง ุณูุฑ ุงูููุงูู"];

        const NEVER_DATA = ["ุฃูุง ุนูุฑู ูุง ุฒูุบุช ูู ุงููุฏุฑุณุฉ", "ุฃูุง ุนูุฑู ูุง ุณุฑูุช ุฃูู ูู ุงูุชูุงุฌุฉ ุจุงูููู", "ุฃูุง ุนูุฑู ูุง ุนููุช ุญุณุงุจ ููุณุจูู ูููู", "ุฃูุง ุนูุฑู ูุง ูุณูุช ุนูุฏ ูููุงุฏ ุญุฏ ูุฑูุจ ููู", "ุฃูุง ุนูุฑู ูุง ุจุนุช ุฑุณุงูุฉ ููุฑูู ุงูุบูุท ูุงุชูุถุญ", "ุฃูุง ุนูุฑู ูุง ุบุดูุช ูู ุงูุชุญุงู", "ุฃูุง ุนูุฑู ูุง ูุฏุจุช ูุฏุจุฉ ูุจูุฑุฉ ูุตุฏูููุง", "ุฃูุง ุนูุฑู ูุง ููุช ูู ุงูููุงุตูุงุช ููุงุชุชูู ุงููุญุทุฉ", "ุฃูุง ุนูุฑู ูุง ูููุช ูุญุฏ ุจุญุจู ูุฃูุง ูุด ูุตุฏู", "ุฃูุง ุนูุฑู ูุง ูุจุณุช ุดุฑุงุจ ููุทูุน", "ุฃูุง ุนูุฑู ูุง ุนููุช ุจููู ูุญุฏ ูุฑุฌุนุช ูููุชู", "ุฃูุง ุนูุฑู ูุง ููุนุช ููุจุงููู ูู ุงูููู", "ุฃูุง ุนูุฑู ูุง ุญุฑูุช ุฃูู ูุฃูุง ุจุทุจุฎ", "ุฃูุง ุนูุฑู ูุง ูุตูุช ุดุนุฑู ููุฏูุช", "ุฃูุง ุนูุฑู ูุง ุงุดุชุฑูุช ุญุงุฌุฉ ุบุงููุฉ ููุณุชุนููุชูุงุด", "ุฃูุง ุนูุฑู ูุง ุงุชุฎุงููุช ุนุดุงู ุงูุญุณุงุจ ูู ูุงููู"];

        const DEBATE_DATA = [
            "ุงููููุณ ุฃูู ูู ุงูุญุจ.",
            "ุงูุนูู ุงูุญุฑ (Freelance) ุฃุญุณู 100 ูุฑุฉ ูู ุงููุธููุฉ.",
            "ุงูุณุชุงุช ุจุชุนุฑู ุชุณูู ุฃุญุณู ูู ุงูุฑุฌุงูุฉ.",
            "ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุญุชู ุงูุนุงูู ููููุนุฏูุง ูู ุงูุจูุช.",
            "ุงูุฃูู ุงูุจูุชู ุฏุงููุงู ุฃุญุณู ูู ุฃูู ุงููุทุงุนู.",
            "ุงูุณูุฑ ุฌูู ูุตุฑ ุฃุญูู ูู ุงูุณูุฑ ุจุฑู.",
            "ุงูุณูุดูุงู ููุฏูุง ุฏูุฑุช ุญูุงุชูุง ุงูุงุฌุชูุงุนูุฉ.",
            "ุงูุชุนููู ุงูุฌุงูุนู ูููุด ูุงุฒูุฉ ูู ุณูู ุงูุนูู ุฏูููุชู.",
            "ุงูุฌูุงุฒ ุนู ุญุจ ุจููุดู ุฃุณุฑุน ูู ุฌูุงุฒ ุงูุตุงูููุงุช.",
            "ุงูุตูู ุฃุญูู ูุตู ูู ุงูุณูุฉ.",
            "ุงูููุฑููุฉ ุจุงูุจุดุงููู ุชุชุงูู ุณุฎูุฉ ุจุณ.",
            "ุงูุฅูุฏููู ุฃูู ุญูููู ูุด ุณูุงู.",
            "ุงูููุงุจ ุฃุญูู ูู ุงููุทุท.",
            "ุงููููุฉ ุชุชุดุฑุจ ุงูุตุจุญ ุจุณ.",
            "ููุณุจูู ุฃุญุณู ูู ุชูู ุชูู.",
            "ุงูุฃุบุงูู ุงููุฏููุฉ ุฃุญูู ูู ุงูููุฑุฌุงูุงุช.",
            "ุงูุจุญุฑ ุฃุญูู ูู ุงูุจุณูู.",
            "ุงูุจูุจุณู ุฃุญูู ูู ุงููููุง.",
            "ุงูุฏุฑุงุณุฉ ุจุงูููู ุฃุญุณู ูู ุงูุตุจุญ.",
            "ุงูููุณุจูู ุฃูู ูู ุงููุงุชุณุงุจ."
        ];

        const LAWYER_DATA = [
            { disaster: "ูุฏูุฑู ููุดู ูุงูู ุชุญุช ุงูููุชุจ", words: ["ุจุทุฑูู", "ูุฎูู", "ูููุจ ุฒุญู"] },
            { disaster: "ูุณูุช ุชูุจุณ ุจูุทูููู ูุฃูุช ุฑุงูุญ ุงูุดุบู", words: ["ูููุงุฉ", "ุซูุจ ุฃุณูุฏ", "ุณูุดู"] },
            { disaster: "ุญุฑูุช ูุณุชุงู ูุฑุญ ูุฑุงุชู", words: ["ุชููู", "ูุงุชุดุจ", "ุฃุณุชููุฉ"] },
            { disaster: "ุงูุดุฑุทุฉ ูููุช ูุนุงู ููุจูุฉ ูุฏููุฉ", words: ["ุจุฎูุฑ", "ุนูุฏ ูููุงุฏ", "ุฎุงูุชู"] },
            { disaster: "ุฏุฎูุช ุงูุญูุงู ุงูุบูุท ูู ุงููุทุงุฑ", words: ["ูุธุงุฑุฉ ูุธุฑ", "ุจูุตูุฉ", "ูุถุงุฆููู"] },
            { disaster: "ูุณุฑุช ููุจุงูู ุตุงุญุจู ุงูุบุงูู", words: ["ูููุฉ", "ูุบูุงุทูุณ", "ุฒูุฒุงู"] },
            { disaster: "ุงุชุงุฎุฑุช ุนูู ุงุฌุชูุงุน ููู ุณุงุนุชูู", words: ["ุณุญููุงุฉ", "ุฃุณุงูุณูุฑ", "ูุงุจุชู ูุงุฌุฏ"] },
            { disaster: "ูุฑุงุชู ุดุงูุช ุฑุณุงูุฉ 'ุจุญุจู' ุนูู ููุจุงููู", words: ["ุดุฑูุฉ ุงูุงุชุตุงูุงุช", "ูุณุงุจูุฉ", "ุนูุงุฑูุช"] },
            { disaster: "ุงุชููุดุช ุจุชุณุฑู ูุงู ูุงู ุงูุฌูุฑุงู", words: ["ูุถุงุฆู", "ูููุฎูุฉ", "ูููุจ"] },
            { disaster: "ุฎุจุทุช ุนุฑุจูุฉ ูุฒูุฑ ููุฑุจุช", words: ["ุฏููุงุจ", "ููุชุงููู", "ุฃุจู ุงูููู"] },
            { disaster: "ุฏุฎูุช ุณูููุง ูู ุบูุฑ ุชุฐูุฑุฉ ูุงุชูุณูุช", words: ["ุฏููุงุตูุฑ", "ุดูุณูุฉ", "ุฑูุถุงู"] },
            { disaster: "ุดุฑุจุช ุงูุดุงู ุจุชุงุน ุงููุฏูุฑ ููู ุณุงุฎู", words: ["ุจุทุงุทูู", "ุชูููุฑูู", "ุญูุฒูู"] },
            { disaster: "ููุช ูู ุงูุจุฑูุฒูุชูุดู ูุตุญูุช ุนูู ุชุตููู", words: ["ุจูุญ", "ุชูุชุงููู", "ูุจุฑูุช"] },
            { disaster: "ุฑุญุช ุงูุฌูู ุจู ุจูุฌุงูุฉ ุบูุท", words: ["ุจููุฉ", "ุนุตูุฑ", "ุงูุฅุณููุฏุฑูุฉ"] },
            { disaster: "ูุชุจุช ุฅูููู ูุดุชูุช ุงููุฏูุฑ ูุจุนุชูููู ุจุงูุบูุท", words: ["ูุงูุงู", "ุจุฑูุงู", "ุฌุฏุชู"] },
            { disaster: "ูุฒูุช ูู ุงูุฃูุชูุจูุณ ุจุดูุฑุช ูุฃูุช ุฑุงูุญ ุงูุดุบู", words: ["ุจูุงูู", "ูููู", "ุงููุฑูุฎ"] },
            { disaster: "ุญููุช ุฏููู ูู ุงูููุชูุฌ ุนูู ุงูุฒููู", words: ["ุณูู", "ูุฑู", "ุฅุณููุฌุฉ"] },
            { disaster: "ุบููุช ูู ุงููุงูู ูุฃูุช ูุงูุฑู ููููู", words: ["ุชูุณุงุญ", "ููุฒ", "ุงูุณููุณ"] },
            { disaster: "ุนููุช ุฑูุจูุณุช ูุจูุณุช ูุฏูุฑู ุจุงูุบูุท", words: ["ุฌุจูุฉ", "ููุนุฉ", "ูููุฌุง"] },
            { disaster: "ูููุช ููุนุฑูุณุฉ ูู ุงููุฑุญ ุฅููุง ุชุฎูุช", words: ["ููู", "ุทูุงุทู", "ุจุญูุฑุฉ"] },
            { disaster: "ุณุฑูุช ุณูุฏูุชุด ุฒูููู ูู ุงูุชูุงุฌุฉ", words: ["ุฑูุจูุช", "ุจุตู", "ููุงุฉ ุงูุณููุณ"] },
            { disaster: "ุฑูุถุช ุชุณุงุนุฏ ุณุช ูุจูุฑุฉ ูุทูุนุช ุฃู ูุฏูุฑู", words: ["ูุฑุงููุฉ", "ุตุงุฑูุฎ", "ุงูููุทู"] },
            { disaster: "ุฏุฎูุช ุงููุณุฌุฏ ุจุดุจุดุจ ุจููุงุชุดู", words: ["ูุนูุฑููุฉ", "ููุฑ", "ุฎุฑุชูุช"] },
            { disaster: "ุงุชุตูุฑุช ุณูููู ูู ุนุฒุง ูุงุชูุณูุช", words: ["ุจุงููุฉ", "ูุทุงุฑ", "ุฏุจุฏูุจ"] },
            { disaster: "ุญุถุฑุช ุงููุฑุญ ุจูุณุชุงู ุฃุจูุถ", words: ["ููููุงุก", "ุนุณู", "ูููุชู"] },
            { disaster: "ูููุช ููุดูู ุฅู ุงูุฃูู ูุงูุญ ูุฏุงู ูู ุงููุงุณ", words: ["ููุบุฑ", "ุจุณูุฉ", "ุจุฑุฌ ุฅููู"] },
            { disaster: "ุถุฑุจุช ููุฑุฉ ูู ุงูุดุงุฑุน ููุณุฑุช ุฒุฌุงุฌ ุนุฑุจูุฉ", words: ["ููุงู", "ุดููุฏุฑ", "ุฃููุงุทูู"] },
            { disaster: "ุฑููุช ุงูุฒุจุงูุฉ ูู ุงูุดุจุงู ูุทูุนุช ุนูู ูุงุญุฏ ุฑุงูุญ ุงูุฌุงูุน", words: ["ุจุงุฐูุฌุงู", "ุฏุจุงุจุฉ", "ุงูุจุญุฑูู"] },
            { disaster: "ุฏุฎูุช ูุญู ููุงุจุณ ููุจุณุช ูฅ ูุฏูู ููุงุดุชุฑูุชุด", words: ["ุจูุฌุฑ", "ุบูุงุตุฉ", "ุฒููุณ"] }
        ];

        const INDIAN_DATA = [
            { scene: "ุจุชููุช ุจุนุฏ ูุง ุฃููุช ุญูุฉ ูุญุดู ูุณูููุฉ", condition: "ุจุงูุญุฑูุฉ ุงูุจุทูุฆุฉ ุฌุฏุงู (Slow Motion)" },
            { scene: "ุจุชูุชุดู ุฅู ุฃุฎูู ูู ุงููู ุณุฑู ุงูุดุงุญู", condition: "ูุฃูุช ุจุชุบูู ุฃูุจุฑุง" },
            { scene: "ุจุชุญุงูู ุชููู ุทูุงุฑุฉ ุจูุฏู ุงูุนุงุฑูุฉ", condition: "ุจุฏูู ูุง ุชุทูุน ุฃู ุตูุช (Silent)" },
            { scene: "ุจุชููุน ุงูุฌุฒูุฉ ุนุดุงู ุชุถุฑุจ ุจููุง ุงูุนุฏู", condition: "ูุฃูู ูู ุฅุนูุงู ุดุงูุจู (Seductive)" },
            { scene: "ุจุชุฌุฑู ูุฑุง ุงููุทุฑ ุงููู ูุงุชู", condition: "ูุฃูุช ุจุชุฑูุต ุจุงููู" },
            { scene: "ุจุชุงุฎุฏ ุทููุฉ ููุงู ุญุจูุจุชู", condition: "ูุฃูุช ุจุชุถุญู ุถุญูุฉ ุดุฑูุฑุฉ" },
            { scene: "ุจุชูุชุดู ููุจูุฉ ูู ุทุจู ุงููุดุฑู", condition: "ุจุฃุฏุงุก ุดูุณุจูุฑู ูุณุฑุญู ูุจุงูุบ ููู" },
            { scene: "ุจุชุญุงูู ุชูุชู ุฏุจุงูุฉ ูุฒุนุฌุฉ", condition: "ูุฃูู ุจุชูุนุจ ูุงุฑุงุชูู (Sound Effects ุจููู)" },
            { scene: "ุจุชุนุชุฑู ูุญุจูุจุชู ุฅูู ูููุณ", condition: "ูุฃูุช ุจุชูุซู ุฅูู ุฑูุจูุช" },
            { scene: "ุจุชุชุฎุงูู ูุน ุณูุงู ูููุฑูุจุงุต", condition: "ูุฃูู ูุนูู ูุฑุฉ ูุฏู ุญูุงุณู" },
            { scene: "ุจุชูุฑุจ ูู ุงูุฒููุจู", condition: "ูุฃูุช ุนูุฏู ุฒุบุทุฉ (Hiccups)" },
            { scene: "ุจุชุทุจุฎ ุฅูุฏููู ูุงููุทุจุฎ ุจูููุน", condition: "ูุฃูู ูู ุจุฑูุงูุฌ ุทุจุฎ ูุงุฏู ุฌุฏุงู (ASMR)" },
            { scene: "ุจุชุตุญู ูู ุงูููู ูุชุฃุฎุฑ ุนูู ุงูุดุบู", condition: "ูุฃูู ูู ูููู ุฑุนุจ" },
            { scene: "ุจุชุฏูุฑ ุนูู ุงูุดุจุดุจ ุนุดุงู ุชุถุฑุจ ุงูุตุฑุตุงุฑ", condition: "ุจุฃุณููุจ ุงููุนูููู ุงูุนุณูุฑููู" },
            { scene: "ุจุชุญุงูู ุชุนุฏู ุงูุดุงุฑุน ูู ูุณุท ุงูุนุฑุจูุงุช", condition: "ูุดูุฉ ูุงููู ุฌุงูุณูู (Moonwalk)" },
            { scene: "ุจุชุทูุจ ุงููููุฉ ูู ุงูุฌุฑุณูู", condition: "ูุฃูุช ุจุชุจูู ุจุญุฑูุฉ ุดุฏูุฏุฉ" },
            { scene: "ุจุชูุงูู 200 ุฌููู ูู ุงูุฃุฑุถ", condition: "ูุฃูู ูุฑุฏ ููู ููุฒุฉ" },
            { scene: "ุจุชูุชุญ ุงูุชูุงุฌุฉ ููููุชูุง ูุงุถูุฉ", condition: "ุตุฏูุฉ ุฏุฑุงููุฉ ููุฏูุฉ (Zoom in/Zoom out)" },
            { scene: "ุจุชุญุงูู ุชูุจุณ ุงูุจูุทููู ููู ุถูู", condition: "ูุฃูู ุจุชูุนุจ ูุตุงุฑุนุฉ ุญุฑุฉ" },
            { scene: "ุจุชูุฑุด ูู ุธูุฑู ููุด ุทุงูู", condition: "ูุฃูู ุจุชุนุฒู ุฌูุชุงุฑ ุฑูู" },
            { scene: "ุจุชูุชุดู ุฅู ุญุฏ ุดุฑุจ ุงูููุงู ูู ุฅุฒุงุฒุชู", condition: "ูุฃูู ุจุชุญูู ูู ุฌุฑููุฉ ูุชู" },
            { scene: "ุจุชุญุงูู ุชูุณู ูุทุฉ ุดุงุฑุฏุฉ", condition: "ูุฃูุช ุจุชููู ุดุนุฑ ูุตูุญ" },
            { scene: "ุจุชูุฒู ูู ุงูุณูู ูุงูุช ุญุงูู ุตูููุฉ ุดุงู", condition: "ุนูู ุฅููุงุน ุฑูุตุฉ ุงูุชุงูุฌู" },
            { scene: "ุจุชููู ูุฃูู ุฅูู ุฑุณุจุช ูู ุงูุงูุชุญุงู", condition: "ุจุญุฑูุงุช ูููุฌุง ุจุทูุฆุฉ" },
            { scene: "ุจุชุญุงูู ุชูุชุญ ุจุฑุทูุงู ุงููุฑุจู ุงูููููู", condition: "ูุฃูู ุชุญุฏู ุจุทููุฉ ุงูุนุงูู" }
        ];

        const BOMB_DATA = [
            "ูุงุฑูุงุช ุณูุงุฑุงุช",
            "ุฃุณูุงุก ููุงูู",
            "ุฃุณูุงุก ุฎุถุงุฑ",
            "ุฏูู ูู ุขุณูุง",
            "ุฃุณูุงุก ุฃููุงุฏ ุจุญุฑู ุงูููู",
            "ุฃููุงู ููุฌูุฏุฉ ูู ููุณ ูุฒุญ",
            "ุฃููุงุช ูุตุฑูุฉ",
            "ูุงุฑูุงุช ููุงุจุณ ุฑูุงุถูุฉ",
            "ุญููุงูุงุช ููุชุฑุณุฉ",
            "ุฃุฏูุงุช ููุฌูุฏุฉ ูู ุงููุทุจุฎ",
            "ุชุทุจููุงุช ุณูุดูุงู ููุฏูุง",
            "ูุญุงูุธุงุช ูุตุฑูุฉ",
            "ุฃููุงุน ุณูู",
            "ุฃุณูุงุก ูุงุนุจู ูุฑุฉ ูุฏู",
            "ุฃุบุงูู ูุนูุฑู ุฏูุงุจ",
            "ุฏูู ุฃูุฑูููุฉ",
            "ุฃุณูุงุก ุจูุงุช ุจุญุฑู ุงูููู",
            "ุฃููุงู ูุนุงุฏู ุฅูุงู",
            "ุฃููุงุน ุญููุงูุงุช",
            "ุฃููุงู",
            "ุญุงุฌุงุช ุจูุนูููุง ูู ุงูุญูุงู",
            "ุฃุณูุงุก ูุฏู ูุตุฑูุฉ",
            "ูุงุฑูุงุช ููุจุงููุงุช",
            "ุตูุงุช ุจุญุฑู ุงูุณูู"
        ];

        const SCRAMBLE_DATA = [
            { category: "ูุงููุฉ", word: "ุจุทูุฎุฉ" },
            { category: "ูุญุงูุธุงุช", word: "ุฅุณูุงุนูููุฉ" },
            { category: "ุฃูู", word: "ููุฑููุฉ" },
            { category: "ุญููุงู", word: "ุฃุฎุทุจูุท" },
            { category: "ููุงุตูุงุช", word: "ูููููุจุชุฑ" },
            { category: "ุฃุดูุงุก", word: "ูููุฑูููู" },
            { category: "ุฃุฌูุฒุฉ", word: "ุซูุงุฌุฉ" },
            { category: "ูุญุงูุธุงุช", word: "ุฅุณููุฏุฑูุฉ" },
            { category: "ุญููุงู", word: "ุฏููุงุตูุฑ" },
            { category: "ูุงููุฉ", word: "ุจุฑุชูุงู" },
            { category: "ุญููุงู", word: "ุฒุฑุงูุฉ" },
            { category: "ุญููุงู", word: "ููู" },
            { category: "ุญููุงู", word: "ุฃุณุฏ" },
            { category: "ุญููุงู", word: "ููุฑ" },
            { category: "ุญููุงู", word: "ุฏุจ" },
            { category: "ุฌูุงุฏ", word: "ููู" },
            { category: "ุฌูุงุฏ", word: "ูุชุงุจ" },
            { category: "ุฌูุงุฏ", word: "ุณุงุนุฉ" },
            { category: "ุฌูุงุฏ", word: "ูุธุงุฑุฉ" },
            { category: "ุฌูุงุฏ", word: "ููุชุงุญ" },
            { category: "ุฃููุฉ", word: "ูุดุฑู" },
            { category: "ุฃููุฉ", word: "ูุจุฏุฉ" },
            { category: "ุฃููุฉ", word: "ูุญุดู" },
            { category: "ุฃููุฉ", word: "ููู" },
            { category: "ูุงููุฉ", word: "ุชูุงุญ" },
            { category: "ูุงููุฉ", word: "ููุฒ" },
            { category: "ูุงููุฉ", word: "ูุงูุฌู" },
            { category: "ูุงููุฉ", word: "ุนูุจ" },
            { category: "ูุฏููุฉ", word: "ุงููุงูุฑุฉ" },
            { category: "ูุฏููุฉ", word: "ุงูุฌูุฒุฉ" },
            { category: "ูุฏููุฉ", word: "ุงูููุตูุฑุฉ" },
            { category: "ูุฏููุฉ", word: "ุทูุทุง" },
            { category: "ุฃุฌูุฒุฉ", word: "ุบุณุงูุฉ" },
            { category: "ุฃุฌูุฒุฉ", word: "ูููุงุฉ" },
            { category: "ููุงุตูุงุช", word: "ุทุงุฆุฑุฉ" },
            { category: "ููุงุตูุงุช", word: "ูุทุงุฑ" },
            { category: "ุฃุดูุงุก", word: "ุดูุณูุฉ" },
            { category: "ุฃุดูุงุก", word: "ุดูุทุฉ" }
        ];

        const TABOO_DATA = [
            { word: "ุฃูุฑุงูุงุช", taboo: ["ุฃุจู ุงูููู", "ุฌูุฒุฉ", "ูุฑุงุนูุฉ"] },
            { word: "ูุฑุฉ ูุฏู", taboo: ["ุฌูู", "ููุนุจ", "ุญูู"] },
            { word: "ููุณุจูู", taboo: ["ูุงุฑู", "ุฃุฒุฑู", "ูููุน"] },
            { word: "ุจุญุฑ", taboo: ["ุณูู", "ูุงููู", "ุนูู"] },
            { word: "ูุฏุฑุณุฉ", taboo: ["ูุฏุฑุณ", "ูุตู", "ุทุงูุจ"] },
            { word: "ุนุฑุจูุฉ", taboo: ["ุนุฌู", "ุจูุฒูู", "ุฏุฑููุณููู"] },
            { word: "ุดุงู", taboo: ["ุณูุฑ", "ุดุฑุจ", "ูุนูุงุน"] },
            { word: "ุฑูุถุงู", taboo: ["ุตูุงู", "ูุงููุณ", "ูุฏูุน"] },
            { word: "ุชูููุฒููู", taboo: ["ุฑูููุช", "ุดุงุดุฉ", "ููุงุฉ"] },
            { word: "ุจุทูุฎ", taboo: ["ุฃุญูุฑ", "ุจุฐุฑ", "ูุงููุฉ"] },
            { word: "ูุชุฑู", taboo: ["ุฃููุงู", "ูุญุทุฉ", "ุชุฐูุฑุฉ"] },
            { word: "ุฏูุชูุฑ", taboo: ["ุนูุงุฏุฉ", "ูุฑูุถ", "ุณูุงุนุฉ"] },
            { word: "ูุดุฑู", taboo: ["ุฑุฒ", "ููุฑููุฉ", "ุนุฏุณ"] },
            { word: "ูุญูุฏ ุตูุงุญ", taboo: ["ูููุฑุจูู", "ููุฑุฉ", "ูุฏู"] },
            { word: "ููู", taboo: ["ูุญูุงุช", "ุชุณูู", "ุณูููุง"] },
            { word: "ููุจุงูู", taboo: ["ุดุงุดุฉ", "ุชููููู", "ุฑูุฉ"] },
            { word: "ูุฑุญ", taboo: ["ุนุฑูุณุฉ", "ุฒูุฉ", "ุฏู ุฌู"] },
            { word: "ุชููุชูู", taboo: ["ููุงุตูุงุช", "ุฑูุงุจ", "ุณูุงู"] },
            { word: "ูุงููู", taboo: ["ูููุฉ", "ูุนุฏุฉ", "ุดูุดุฉ"] },
            { word: "ุฌูู", taboo: ["ุฑูุงุถุฉ", "ุนุถูุงุช", "ุชูุฑูู"] },
            { word: "ุณุงุญู", taboo: ["ุจุญุฑ", "ูุตูู", "ุดุงููู"] },
            { word: "ุฑูุณูุณ", taboo: ["ููุฏุงู", "ูุญุทุฉ", "ุฒุญูุฉ"] },
            { word: "ุฃูุจุฑ", taboo: ["ุนุฑุจูุฉ", "ูุงุจุชู", "ุชูุตูู"] },
            { word: "ุทูุจุงุช", taboo: ["ุฃูู", "ุฏูููุฑู", "ุชูุตูู"] },
            { word: "ุงูุฃููู", taboo: ["ูุงุฏู", "ููุฑุฉ", "ุฃุญูุฑ"] },
            { word: "ุชูู ุชูู", taboo: ["ููุฏูู", "ุฑูุต", "ุชุทุจูู"] },
            { word: "ุณุญูุฑ", taboo: ["ุฑูุถุงู", "ูุฌุฑ", "ุฃูู"] },
            { word: "ุนูุฏ", taboo: ["ูุทุฑ", "ุฃุถุญู", "ูุฑุญุฉ"] },
            { word: "ุญุฌ", taboo: ["ููุฉ", "ูุนุจุฉ", "ุนูุฑุฉ"] },
            { word: "ููุฌุฒ", taboo: ["ููุฑุฌุงูุงุช", "ุฃุบุงูู", "ูุฑูุฉ"] },
            { word: "ููู", taboo: ["ููุฑ", "ูุตุฑ", "ููุงู"] },
            { word: "ููุงูู", taboo: ["ุทุนููุฉ", "ููู", "ุฃูู"] },
            { word: "ูุงูุฌู", taboo: ["ูุงููุฉ", "ุตูู", "ุญูู"] },
            { word: "ุฃุณูุงู", taboo: ["ุณุฏ", "ููุจุฉ", "ูุญุงูุธุฉ"] },
            { word: "ุดุฑู", taboo: ["ุณููุง", "ุจุญุฑ", "ุบุทุณ"] },
            { word: "ุจุงุต", taboo: ["ุฃูุชูุจูุณ", "ุฑูุงุจ", "ูุญุทุฉ"] },
            { word: "ุฏุฑูู ุจุงุฑู", taboo: ["ููุงูู", "ูุนุจ", "ุฃูุชูุจุฑ"] },
            { word: "ุญููุงู", taboo: ["ููุทูุฉ", "ูุชุฑู", "ูุญุทุฉ"] },
            { word: "ูุฏููุชู", taboo: ["ููุจููุฏ", "ุณูู", "ุชุฌูุน"] },
            { word: "ููุฏุงููู", taboo: ["ุดุฑูุญุฉ", "ุฑุตูุฏ", "ุดุจูุฉ"] },
            { word: "ูุงุฑููุฑ", taboo: ["ูุงูุจุฑ", "ุชุณูู", "ุจูุงูุฉ"] },
            { word: "ูุญุดู", taboo: ["ูุฑู ุนูุจ", "ูุฑูุจ", "ุฃูู"] }
        ];

        // ===== AUDIO =====
        // Initialize Audio Context
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playTone(freq, type, duration) {
            if (state.isMuted) return;
            if (audioCtx.state === 'suspended') audioCtx.resume(); // Fix for Chrome autoplay policy

            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();

            osc.type = type; // 'sine', 'square', 'sawtooth', 'triangle'
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + duration);

            osc.connect(gain);
            gain.connect(audioCtx.destination);

            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playSound(type) {
            if (state.isMuted) return;

            switch (type) {
                case 'tick':
                    playTone(800, 'square', 0.05); // Short tick
                    break;
                case 'click':
                    playTone(600, 'sine', 0.05); // Soft click
                    break;
                case 'success':
                    // High pitch "Ding"
                    playTone(1200, 'sine', 0.1);
                    setTimeout(() => playTone(1800, 'sine', 0.2), 100);
                    break;
                case 'fail':
                    // Low pitch "Buzz"
                    playTone(300, 'sawtooth', 0.3);
                    setTimeout(() => playTone(250, 'sawtooth', 0.3), 150);
                    break;
                case 'bomb':
                    // Rapid warning beeps
                    playTone(800, 'square', 0.1);
                    setTimeout(() => playTone(600, 'square', 0.3), 100);
                    break;
                case 'bomb_tick':
                    // Short urgent beep for bomb timer
                    playTone(1000, 'square', 0.08);
                    break;
                case 'explode':
                    // Explosion effect - descending noise
                    playTone(200, 'sawtooth', 0.5);
                    setTimeout(() => playTone(100, 'sawtooth', 0.5), 100);
                    break;
                case 'win':
                    // Victory melody
                    playTone(500, 'sine', 0.2);
                    setTimeout(() => playTone(700, 'sine', 0.2), 200);
                    setTimeout(() => playTone(1000, 'sine', 0.4), 400);
                    break;
            }
        }

        // ===== HELPERS =====
        function toggleMute() {
            state.isMuted = !state.isMuted;
            const btn = document.getElementById('muteBtn');
            
            if (state.isMuted) {
                // Muted: Red background with X icon
                btn.className = 'p-2 bg-red-100 rounded-full shadow-md text-red-500 hover:bg-red-200 transition';
                btn.innerHTML = '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>';
            } else {
                // Unmuted: Normal style with speaker icon
                btn.className = 'p-2 bg-white rounded-full shadow-md text-slate-600 hover:bg-slate-50 transition';
                btn.innerHTML = '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>';
            }
            
            saveState();
            playSound('click');
        }
        function goHome() { 
            playSound('click'); 
            if (gameInterval) clearInterval(gameInterval);
            state.currentGame = null; 
            saveState();
            navigate('home'); 
        }
        // Navigate with instant snappy transition
        function navigate(screen) { 
            playSound('click'); 
            // โ๏ธ CRITICAL: Stop any running game timers immediately
            if (gameInterval) {
                clearInterval(gameInterval);
                gameInterval = null;
            }
            state.screen = screen; 
            render(); // Immediate render with entry animation
        }

        // Random Game Selector
        function surpriseMe() {
            const allGames = [
                'lawyer_setup', 'indian_setup', 'bomb_setup', 'taboo_setup', 'story_setup', 
                'artist_setup', 'morph_setup', 'whisper_setup', 'debate_setup', 
                'never_setup', 'heads_up_setup', 'emoji_setup', 'lyrics_setup', 
                'unscramble_setup', 'five_second_setup', 'spy_setup', 'charades_setup', 
                'quotes_setup', 'bus_setup', 'liar_setup', 'auction_setup', 
                'gibberish_setup', 'hum_setup', 'likely_setup'
            ];
            const randomGame = allGames[Math.floor(Math.random() * allGames.length)];
            playSound('click');
            navigate(randomGame);
        }

        // Create floating +1 animation
        function createFloatingPoint(x, y, points) {
            const el = document.createElement('div');
            el.className = 'floating-point';
            el.textContent = `+${points}`;
            el.style.left = `${x}px`;
            el.style.top = `${y}px`;
            document.body.appendChild(el);
            
            // Remove after animation
            setTimeout(() => el.remove(), 1500);
        }

        // Create confetti burst
        function createConfetti() {
            const colors = ['#f43f5e', '#10b981', '#3b82f6', '#f59e0b', '#8b5cf6', '#ec4899'];
            const confettiCount = 30;
            
            for (let i = 0; i < confettiCount; i++) {
                const el = document.createElement('div');
                el.className = 'confetti-particle';
                el.style.left = `${Math.random() * 100}%`;
                el.style.top = '-10px';
                el.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                el.style.animationDelay = `${Math.random() * 0.5}s`;
                el.style.animationDuration = `${1.5 + Math.random()}s`;
                document.body.appendChild(el);
                
                // Remove after animation
                setTimeout(() => el.remove(), 3000);
            }
        }

        function updateScore(id, isTeam, points = 1) {
            // 1. Update Player Score
            const playerIndex = state.players.findIndex(p => p.id === id);
            if (playerIndex !== -1) {
                state.players[playerIndex].score += points;
                
                // Visual feedback: Floating point animation
                const x = window.innerWidth / 2;
                const y = window.innerHeight / 2;
                createFloatingPoint(x, y, points);
                
                // Confetti for first point or milestone (every 5 points)
                if (state.players[playerIndex].score % 5 === 0) {
                    createConfetti();
                }
            }

            // 2. Sync with Team (If Mode is Active)
            if (state.teamMode) {
                // Find which team contains this player
                const teamA = state.teams[0];
                const teamB = state.teams[1];
                
                const inTeamA = teamA.members.some(m => m.id === id);
                const inTeamB = teamB.members.some(m => m.id === id);

                if (inTeamA) {
                    teamA.score += points;
                    // Team milestone animations
                    if (teamA.score % 5 === 0) {
                        createConfetti();
                    }
                } else if (inTeamB) {
                    teamB.score += points;
                    // Team milestone animations
                    if (teamB.score % 5 === 0) {
                        createConfetti();
                    }
                }
            }

            playSound('success');
            saveState();
            render(); // Update UI to show new scores
        }
        function showDare() {
            const dare = getUniqueItem('dares', DARES_LIST);
            playSound('fail');
            const modal = `<div class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in"><div class="bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl text-center border-4 border-red-500"><h2 class="text-2xl font-black text-red-600 mb-2">ุนูููููุงุจ!</h2><p class="text-xl font-bold text-slate-800 mb-6">"${dare}"</p><button onclick="this.closest('.fixed').remove()" class="w-full py-3 bg-slate-800 text-white rounded-xl font-bold">ููุฐุช ุฎูุงุต</button></div></div>`;
            document.body.insertAdjacentHTML('beforeend', modal);
        }
        function getTimer(time) {
            if (time >= 60) { const mins = Math.floor(time / 60); const secs = time % 60; return `${mins}:${secs < 10 ? '0' : ''}${secs}`; }
            return time;
        }
        function header(title, backTo) {
            let teamBadge = '';
            if (state.teamMode && state.currentGame && state.currentGame.player) {
                const playerId = state.currentGame.player.id;
                const currentTeam = state.teams.find(t => t.members.some(m => m.id === playerId));
                if (currentTeam) {
                    const isTeamA = currentTeam.id === 'A';
                    const bgClass = isTeamA ? 'bg-rose-50 border-rose-200 text-rose-700' : 'bg-indigo-50 border-indigo-200 text-indigo-700';
                    teamBadge = `<div class="px-3 py-1.5 rounded-lg border ${bgClass} flex items-center gap-2 shadow-sm animate-in"><span class="text-xs font-black">ุฏูุฑ ${currentTeam.name}</span></div>`;
                }
            }
            return `<div class="flex flex-col gap-2 py-3 mb-2 border-b border-slate-100/80"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><button onclick="navigate('${backTo}')" class="p-2.5 bg-slate-50 rounded-xl hover:bg-slate-100 text-slate-600 transition active:scale-95"><svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></button><h1 class="text-xl font-black text-slate-800 tracking-tight">${title}</h1></div>${teamBadge}</div></div>`;
        }

        // --- Fair Turn Logic (Strict Queue System) ---
        function getFairPlayer() {
            // Safety check
            if (!state.players || state.players.length === 0) return { id: 0, name: 'ูุงุนุจ' };

            // If queue is empty or invalid, create a new shuffled deck of players
            if (!state.turnQueue || state.turnQueue.length === 0) {
                // Create a shallow copy of players
                let newQueue = [...state.players];
                // Fisher-Yates Shuffle
                for (let i = newQueue.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newQueue[i], newQueue[j]] = [newQueue[j], newQueue[i]];
                }
                state.turnQueue = newQueue;
            }

            // Pop the next player
            return state.turnQueue.pop();
        }

        // --- No-Repeat Content System (Deck Logic) ---
        function getUniqueItem(categoryKey, sourceArray) {
            if (!state.usedItems) state.usedItems = {};
            if (!state.usedItems[categoryKey]) state.usedItems[categoryKey] = [];

            // Filter available items
            // If items are objects, we use a unique property (like 'word' or 'id'), otherwise use the item itself
            const used = state.usedItems[categoryKey];
            
            // Helper to get ID/String for comparison
            const getId = (item) => (typeof item === 'object' ? (item.word || item.text || item.quote || JSON.stringify(item)) : item);

            const available = sourceArray.filter(item => !used.includes(getId(item)));

            if (available.length === 0) {
                // Deck exhausted! Reset.
                state.usedItems[categoryKey] = [];
                // Recursive call to pick from fresh deck
                return getUniqueItem(categoryKey, sourceArray);
            }

            // Pick random from available
            const picked = available[Math.floor(Math.random() * available.length)];
            
            // Mark as used
            state.usedItems[categoryKey].push(getId(picked));
            
            return picked;
        }

        // --- NEW: Unified Game Start Screen ---
        function renderGameStartScreen(title, description, emoji, buttonText, startAction, colorClass) {
            return `
                <div class="p-6 h-screen flex flex-col ${colorClass} bg-opacity-10">
                    ${header(title, 'home')}
                    <div class="flex-1 flex flex-col justify-center items-center text-center">
                        <div class="text-6xl mb-6">${emoji}</div>
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">${title}</h2>
                        <p class="text-slate-600 max-w-sm mb-8 font-medium leading-relaxed">${description}</p>
                        <button onclick="${startAction}" class="w-full py-4 ${colorClass.replace('bg-opacity-10', '')} text-white rounded-xl font-bold text-xl shadow-lg transition transform active:scale-95 hover:brightness-110">
                            ${buttonText}
                        </button>
                    </div>
                </div>
            `;
        }

        // ===== RENDER =====
        function render() {
            const container = document.getElementById('screen-container');
            
            // Render the appropriate screen
            if (state.screen === 'home') container.innerHTML = renderHome();
            else if (state.screen === 'players') container.innerHTML = renderPlayers();
            else if (state.screen === 'scores') container.innerHTML = renderScores();
            else if (state.screen === 'teams_setup') container.innerHTML = renderTeamsSetup();
            // Games Setup
            else if (state.screen === 'lawyer_setup') container.innerHTML = renderLawyerSetup();
            else if (state.screen === 'indian_setup') container.innerHTML = renderIndianSetup();
            else if (state.screen === 'bomb_setup') container.innerHTML = renderBombSetup();
            else if (state.screen === 'taboo_setup') container.innerHTML = renderTabooSetup();
            else if (state.screen === 'story_setup') container.innerHTML = renderStorySetup();
            else if (state.screen === 'morph_setup') container.innerHTML = renderMorphSetup();
            else if (state.screen === 'artist_setup') container.innerHTML = renderArtistSetup();
            else if (state.screen === 'whisper_setup') container.innerHTML = renderWhisperSetup();
            else if (state.screen === 'never_setup') container.innerHTML = renderNeverSetup();
            else if (state.screen === 'debate_setup') container.innerHTML = renderDebateSetup();
            else if (state.screen === 'heads_up_setup') container.innerHTML = renderHeadsUpSetup();
            else if (state.screen === 'emoji_setup') container.innerHTML = renderEmojiSetup();
            else if (state.screen === 'lyrics_setup') container.innerHTML = renderLyricsSetup();
            else if (state.screen === 'unscramble_setup') container.innerHTML = renderUnscrambleSetup();
            else if (state.screen === 'spy_setup') container.innerHTML = renderSpySetup();
            else if (state.screen === 'charades_setup') container.innerHTML = renderCharadesSetup();
            else if (state.screen === 'quotes_setup') container.innerHTML = renderQuotesSetup();
            else if (state.screen === 'five_second_setup') container.innerHTML = renderFiveSecondSetup();
            else if (state.screen === 'bus_setup') container.innerHTML = renderBusSetup();
            else if (state.screen === 'liar_setup') container.innerHTML = renderLiarSetup();
            else if (state.screen === 'auction_setup') container.innerHTML = renderAuctionSetup();
            else if (state.screen === 'gibberish_setup') container.innerHTML = renderGibberishSetup();
            else if (state.screen === 'hum_setup') container.innerHTML = renderHumSetup();
            else if (state.screen === 'likely_setup') container.innerHTML = renderLikelySetup();
            
            // Force animation replay on every render
            container.classList.remove('animate-enter');
            void container.offsetWidth; // Trigger reflow (magic!)
            container.classList.add('animate-enter');
        }

        function renderHome() {
            return `
                <div class="flex flex-col h-screen p-4">
                    <div class="text-center pt-8 pb-4"><h1 class="text-4xl font-black text-slate-800 mb-1">ูุนุจุฉ ุงููุนุฏุฉ</h1><p class="text-slate-500 font-medium">ุงูููุฉ ูุชุญูุงุด ุบูุฑ ุจููุง</p></div>
                    
                    <!-- Surprise Me Button -->
                    <button onclick="surpriseMe()" class="w-full py-4 mb-4 surprise-gradient text-white rounded-2xl font-black text-xl shadow-xl transition transform active:scale-95 hover:scale-[1.02] flex items-center justify-center gap-3">
                        <span class="text-3xl">๐ฒ</span>
                        <span>ูุงุฌุฆูู! (ูุนุจุฉ ุนุดูุงุฆูุฉ)</span>
                    </button>
                    
                    <div class="w-full grid grid-cols-2 gap-3 flex-1 overflow-y-auto pb-2 content-start min-h-0">
                        <!-- SET 3 -->
                        ${menuButton('lawyer_setup', '๐จโโ๏ธ', 'ุงููุญุงูู ุงููุนูู', 'ุฏุงูุน ุนู ุงููุตูุจุฉ', 'bg-slate-700')}
                        ${menuButton('indian_setup', '๐ฌ', 'ุณููุงุฑูู ููุฏู', 'ุชูุซูู ูุฃููุฑุฉ', 'bg-orange-600')}
                        ${menuButton('bomb_setup', '๐ฃ', 'ุงูููุจูุฉ', 'ุจุงุตู ุจุณุฑุนุฉ', 'bg-red-700')}
                        ${menuButton('taboo_setup', '๐ซ', 'ุฃูุนู ุชููููุง', 'ููููุนุงุช ูุชูุฑ', 'bg-rose-900')}
                        <!-- SET 2 -->
                        ${menuButton('story_setup', '๐', 'ุญูุงูุฉ ูู ูููุชูู', 'ุฃูููุง ูุตุฉ', 'bg-amber-600')}
                        ${menuButton('artist_setup', '๐จ', 'ุงูุฑุณุงู ุงูุฃุนูู', 'ุงุฑุณู ูุฎูู', 'bg-fuchsia-600')}
                        ${menuButton('morph_setup', '๐ค', 'ุงููููุฉ ุงููุชุญููุฉ', 'ุบูุฑ ุญุฑู', 'bg-cyan-700')}
                        <!-- SET 1 -->
                        ${menuButton('whisper_setup', '๐ง', 'ุฅูุฑุฃ ุดูุงููู', 'ุนูู ุงูุตูุช', 'bg-pink-500')}
                        ${menuButton('debate_setup', 'โ๏ธ', 'ูุญููุฉ', 'ุฅููุงุน ูุฌุฏุงู', 'bg-amber-700')}
                        ${menuButton('never_setup', 'โ', 'ุฃูุง ุนูุฑู ูุง', 'ููู ุนููุ', 'bg-rose-800')}
                        <!-- CLASSICS -->
                        ${menuButton('heads_up_setup', '๐คฏ', 'ุนูู ุฑุงุณู', 'ุญุท ููุจุงููู', 'bg-blue-600')}
                        ${menuButton('emoji_setup', '๐งฉ', 'ูู ุงูุฅูููุฌู', 'ุงุณู ุงูููููุ', 'bg-yellow-500')}
                        ${menuButton('lyrics_setup', '๐ค', 'ููู ุงูุฃุบููุฉ', 'ุญุงูุธุ', 'bg-purple-500')}
                        ${menuButton('unscramble_setup', '๐', 'ุฑุชุจูุง ุตุญ', 'ูููุฉ ูุชูุฎุจุทุฉ', 'bg-green-600')}
                        ${menuButton('five_second_setup', 'โฑ๏ธ', 'ุฎูุณุฉ ุนููู', '3 ุญุงุฌุงุช', 'bg-teal-600')}
                        ${menuButton('spy_setup', '๐ต๏ธ', 'ุงูุฌุงุณูุณ', 'ููู ุงูุบุฑูุจุ', 'bg-indigo-600')}
                        ${menuButton('charades_setup', '๐ญ', 'ุจุฏูู ููุงู', 'ุชูุซูู', 'bg-rose-600')}
                        ${menuButton('quotes_setup', '๐ฌ', 'ุงูุงูููุงุช', 'ุณููุน', 'bg-emerald-600')}
                        ${menuButton('bus_setup', '๐', 'ุฃูุชูุจูุณ', 'ุญุฑู ููุฆุฉ', 'bg-purple-600')}
                        ${menuButton('liar_setup', '๐', 'ุงููุฏุงุจ', 'ุงูุณู ุงููุฐุจุฉ', 'bg-orange-600')}
                        ${menuButton('auction_setup', '๐จ', 'ุงููุฒุงุฏ', 'ููู ูุฒูุฏ', 'bg-cyan-600')}
                        ${menuButton('gibberish_setup', '๐ฃ๏ธ', 'ูู ุงูุดูุฑุฉ', 'ููุงู ุบุฑูุจ', 'bg-pink-600')}
                        ${menuButton('hum_setup', '๐ต', 'ุทุฑุจูู', 'ููููุฉ', 'bg-yellow-600')}
                        ${menuButton('likely_setup', '๐', 'ููู ุงููุงุฑุซุฉ', 'ุชููุนุงุช', 'bg-red-600')}
                    </div>
                    
                    <!-- Footer Buttons (Icons Fixed) -->
                    <div class="flex gap-3 w-full mt-2">
                        <button onclick="navigate('players')" class="flex-1 p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-600 flex items-center justify-center gap-2">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            ุงููุงุนุจูู
                        </button>
                        <button onclick="navigate('scores')" class="flex-1 p-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-600 flex items-center justify-center gap-2">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
                            ุงููุชุงุฆุฌ
                        </button>
                    </div>
                </div>`;
        }

        function menuButton(screen, emoji, title, subtitle, color) { return `<button onclick="navigate('${screen}')" class="w-full aspect-square p-3 rounded-2xl shadow-lg text-white flex flex-col items-center justify-center text-center transition transform active:scale-95 hover:scale-[1.02] ${color}"><div class="text-5xl mb-2">${emoji}</div><div><span class="text-lg font-bold block leading-tight">${title}</span><span class="text-xs opacity-90 block mt-1 leading-tight">${subtitle}</span></div></button>`; }
        function renderPlayers() {
            const teamActive = state.teamMode;
            return `
                <div class="p-6 h-screen flex flex-col">
                    ${header('ุงููุงุนุจูู', 'home')}
                    
                    <!-- Team Setup Row (ุทุจูุงู ููุชุตููู ุงูุฌุฏูุฏ) -->
                    <div class="mb-4">
                        <div class="flex items-center justify-between bg-slate-50 border border-slate-100 rounded-2xl px-3 py-2">
                            <button onclick="navigate('teams_setup')" class="px-3 py-1 bg-white rounded-xl font-bold text-xs text-slate-800 shadow-sm border border-slate-200">
                                ุฅุนุฏุงุฏ ุงููุฑู
                            </button>
                            <button onclick="${teamActive ? 'deactivateTeamMode()' : 'activateTeamMode()'}" class="flex items-center gap-1 text-sm font-bold ${teamActive ? 'text-emerald-600' : 'text-slate-600'}">
                                <span class="inline-flex items-center justify-center w-6 h-6 rounded-full ${teamActive ? 'bg-emerald-500 text-white' : 'bg-red-500 text-white'}">
                                    ${teamActive ? 'โ' : 'โ'}
                                </span>
                                <span>ูุฑู</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Player Input Section -->
                    <form onsubmit="addPlayer(event)" class="flex items-stretch gap-3 mb-6 h-14">
                        <button type="submit" class="bg-amber-500 text-white h-full w-14 rounded-2xl font-bold flex items-center justify-center shadow-lg hover:bg-amber-600 active:scale-95 transition">
                            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        <input type="text" id="newPlayerName" placeholder="ุงูุชุจ ุงุณู ุงููุงุนุจ..." class="flex-1 h-full px-5 border-2 border-slate-200 rounded-2xl text-lg font-bold focus:outline-none focus:border-amber-500 focus:ring-4 focus:ring-amber-500/20 transition">
                    </form>
                    
                    <!-- Players List -->
                    <div class="flex-1 overflow-y-auto space-y-3">
                        ${state.players.map(p => `
                            <div class="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                                <span class="font-bold text-lg text-slate-700">${p.name}</span>
                                <button onclick="removePlayer(${p.id})" class="text-red-400 hover:text-red-600 transition">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    
                    <!-- Clear All / New Game Button -->
                    ${state.players.length > 0 ? `
                        <div class="mt-4 pt-4 border-t-2 border-slate-100">
                            <button onclick="clearAllPlayers()" class="w-full py-4 bg-red-500 hover:bg-red-600 active:scale-95 text-white rounded-2xl font-bold text-lg shadow-lg transition flex items-center justify-center gap-2">
                                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                                <span>ูุณุญ ุงููู / ูุนุจุฉ ุฌุฏูุฏุฉ</span>
                            </button>
                        </div>
                    ` : ''}
                </div>
            `;
        }
        function renderTeamsSetup() {
            const teamA = state.teams[0];
            const teamB = state.teams[1];
            return `
                <div class="flex flex-col h-screen bg-slate-50">
                    ${header('ุฅุนุฏุงุฏ ุงููุฑู', 'players')}
                    <div class="flex-1 overflow-y-auto p-4 pb-32">
                        <div class="bg-white p-5 rounded-3xl shadow-sm border border-slate-100 mb-6">
                            <div class="flex items-center gap-2 mb-4 justify-center opacity-50"><span class="text-xs font-bold">ุชุณููุฉ ุงููุฑู</span></div>
                            <div class="flex gap-4">
                                <div class="flex-1"><input type="text" value="${teamA.name}" onchange="updateTeamName('A', this.value)" class="w-full p-4 text-center font-black text-lg border-b-4 border-rose-500 rounded-2xl bg-rose-50/50 text-rose-700 focus:outline-none focus:bg-white focus:shadow-lg transition placeholder-rose-300" placeholder="ูุฑูู ุฃ"></div>
                                <div class="flex-1"><input type="text" value="${teamB.name}" onchange="updateTeamName('B', this.value)" class="w-full p-4 text-center font-black text-lg border-b-4 border-indigo-500 rounded-2xl bg-indigo-50/50 text-indigo-700 focus:outline-none focus:bg-white focus:shadow-lg transition placeholder-indigo-300" placeholder="ูุฑูู ุจ"></div>
                            </div>
                        </div>
                        <h3 class="px-2 text-slate-400 text-xs font-bold mb-3">ุงุถุบุท ูุชูุฒูุน ุงููุงุนุจูู</h3>
                        <div class="space-y-3">
                            ${state.players.map(p => {
                                const inA = teamA.members.some(m => m.id === p.id);
                                const inB = teamB.members.some(m => m.id === p.id);
                                return `<div class="flex items-center justify-between bg-white p-3 pr-5 rounded-2xl shadow-sm border border-slate-100 transition hover:shadow-md"><span class="font-bold text-lg text-slate-700">${p.name}</span><div class="flex gap-3"><button onclick="assignPlayerToTeam('A', ${p.id})" class="w-12 h-12 rounded-xl font-black text-lg transition-all duration-200 flex items-center justify-center ${inA ? 'bg-rose-600 text-white shadow-lg shadow-rose-200 transform scale-110 ring-2 ring-offset-2 ring-rose-100' : 'bg-slate-50 text-slate-300 hover:bg-rose-50 hover:text-rose-400'}">ุฃ</button><button onclick="assignPlayerToTeam('B', ${p.id})" class="w-12 h-12 rounded-xl font-black text-lg transition-all duration-200 flex items-center justify-center ${inB ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-200 transform scale-110 ring-2 ring-offset-2 ring-indigo-100' : 'bg-slate-50 text-slate-300 hover:bg-indigo-50 hover:text-indigo-400'}">ุจ</button></div></div>`;
                            }).join('')}
                        </div>
                    </div>
                    <div class="absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-white via-white/95 to-transparent z-50">
                        ${state.teamMode ? `<button onclick="deactivateTeamMode()" class="w-full py-4 bg-red-500 text-white rounded-2xl font-black text-xl shadow-xl shadow-red-200 hover:bg-red-600 active:scale-95 transition flex items-center justify-center gap-2"><span>ุฅูุบุงุก ูุถุน ุงููุฑู</span></button>` : `<button onclick="activateTeamMode()" class="w-full py-4 bg-emerald-500 text-white rounded-2xl font-black text-xl shadow-xl shadow-emerald-200 hover:bg-emerald-600 active:scale-95 transition flex items-center justify-center gap-2"><span>ุชูุนูู ุงููุนุจ ุจุงููุฑู</span></button>`}
                    </div>
                </div>
            `;
        }
        function shareResults() {
            let shareText = '๐ฅ ูููู ุงููุนุฏุฉ ูุตููุง.. ูุณุน ูููุชุงูุฌ!\n\n๐ ุงูุชุฑุชูุจ ุงูุญุงูู:\n';
            
            if (state.teamMode) {
                const sortedTeams = [...state.teams].sort((a, b) => b.score - a.score);
                sortedTeams.forEach((t, i) => {
                    const emoji = i === 0 ? '1๏ธโฃ' : i === 1 ? '2๏ธโฃ' : '3๏ธโฃ';
                    shareText += `${emoji} ${t.name}: ${t.score} ููุทุฉ\n`;
                });
            } else {
                const sortedPlayers = [...state.players].sort((a, b) => b.score - a.score);
                sortedPlayers.slice(0, 5).forEach((p, i) => {
                    const emoji = ['1๏ธโฃ', '2๏ธโฃ', '3๏ธโฃ', '4๏ธโฃ', '5๏ธโฃ'][i];
                    shareText += `${emoji} ${p.name}: ${p.score} ููุทุฉ\n`;
                });
            }
            
            shareText += '\n๐ฒ ุงูุนุจูุง ูุนุงูุง ุฏูููุชู: [ุฑุงุจุท ุงูุชุทุจูู]';
            
            // Try Web Share API first (mobile)
            if (navigator.share) {
                navigator.share({
                    title: 'ูุนุจุฉ ุงููุนุฏุฉ - ุงููุชุงุฆุฌ',
                    text: shareText
                }).catch(() => {
                    // If share cancelled or failed, fallback to clipboard
                    copyToClipboard(shareText);
                });
            } else {
                // Fallback: Copy to clipboard
                copyToClipboard(shareText);
            }
        }
        
        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('โ ุชู ุงููุณุฎ! ุงูุตููุง ูู ุฃู ูุญุงุฏุซุฉ');
                    playSound('success');
                });
            } else {
                // Older fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('โ ุชู ุงููุณุฎ! ุงูุตููุง ูู ุฃู ูุญุงุฏุซุฉ');
                playSound('success');
            }
        }
        
        function renderScores() {
            if (state.teamMode) {
                const sortedTeams = [...state.teams].sort((a, b) => b.score - a.score);
                return `
                    <div class="p-6 h-screen flex flex-col">
                        ${header('ููุญุฉ ุงูุดุฑู - ุงููุฑู', 'home')}
                        
                        <!-- Share Button -->
                        <button onclick="shareResults()" class="w-full py-3 mb-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
                            <span>ุดุงุฑู ุงููุชุงุฆุฌ</span>
                        </button>
                        
                        <div class="flex-1 overflow-y-auto space-y-4">
                            ${sortedTeams.map((t, i) => `
                                <div class="flex items-center p-4 rounded-xl shadow-sm border border-slate-100 bg-white">
                                    <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ml-4 ${i === 0 ? 'bg-yellow-400 text-white' : 'bg-slate-200 text-slate-600'}">${i + 1}</div>
                                    <div class="flex-1">
                                        <div class="font-bold text-lg text-slate-800">${t.name}</div>
                                        <div class="text-sm text-slate-500 mt-1">${(t.members && t.members.length > 0) ? t.members.map(m => m.name).join(', ') : 'ูุง ููุฌุฏ ุฃุนุถุงุก'}</div>
                                    </div>
                                    <div class="font-black text-2xl ${t.id === 'A' ? 'text-rose-600' : 'text-indigo-600'}">${t.score}</div>
                                </div>
                            `).join('')}
                        </div>
                        <button onclick="resetScores()" class="mt-4 w-full py-4 bg-slate-800 text-white rounded-xl font-bold">ุชุตููุฑ ุงูุนุฏุงุฏ</button>
                    </div>
                `;
            } else {
                const sortedPlayers = [...state.players].sort((a, b) => b.score - a.score);
                return `
                    <div class="p-6 h-screen flex flex-col">
                        ${header('ููุญุฉ ุงูุดุฑู', 'home')}
                        
                        <!-- Share Button -->
                        <button onclick="shareResults()" class="w-full py-3 mb-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
                            <span>ุดุงุฑู ุงููุชุงุฆุฌ</span>
                        </button>
                        
                        <div class="flex-1 overflow-y-auto space-y-4">
                            ${sortedPlayers.map((p, i) => `
                                <div class="flex items-center p-4 rounded-xl shadow-sm border border-slate-100 bg-white">
                                    <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ml-4 ${i === 0 ? 'bg-yellow-400 text-white' : 'bg-slate-200 text-slate-600'}">${i + 1}</div>
                                    <div class="flex-1 font-bold text-lg text-slate-800">${p.name}</div>
                                    <div class="font-black text-2xl text-indigo-600">${p.score}</div>
                                </div>
                            `).join('')}
                        </div>
                        <button onclick="resetScores()" class="mt-4 w-full py-4 bg-red-600 text-white rounded-xl font-bold border-2 border-red-700 hover:bg-red-700 transition">โ๏ธ ุชุตููุฑ ุงูุนุฏุงุฏ</button>
                    </div>
                `;
            }
        }
        function addPlayer(e) { e.preventDefault(); const input = document.getElementById('newPlayerName'); if(input.value.trim()){ state.players.push({id: Date.now(), name: input.value.trim(), score: 0}); saveState(); render(); } }
        function removePlayer(id) {
            // Confirmation dialog before deletion
            if (!confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุงุนุจุ')) {
                return; // User cancelled
            }
            
            // Remove from players list
            state.players = state.players.filter(p => p.id !== id);
            
            // Remove from all teams
            state.teams.forEach(team => {
                team.members = team.members.filter(m => m.id !== id);
            });
            
            // โ๏ธ CRITICAL: Save state to persist the deletion
            saveState();
            render();
        }
        function clearAllPlayers() {
            // Confirm before clearing
            if (state.players.length > 0 && !confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ูุณุญ ุฌููุน ุงููุงุนุจูู ูุจุฏุก ูุนุจุฉ ุฌุฏูุฏุฉุ\n\nุณูุชู ุญุฐู:\nโข ุฌููุน ุงููุงุนุจูู\nโข ุฌููุน ุงูููุงุท\nโข ุฅุนุฏุงุฏุงุช ุงููุฑู')) {
                return;
            }
            // Clear players array
            state.players = [];
            // Clear turn queue
            state.turnQueue = [];
            // Reset teams
            state.teams.forEach(team => {
                team.members = [];
                team.score = 0;
            });
            // Clear used items
            state.usedItems = {};
            // Clear current game
            state.currentGame = null;
            // Clear gameInterval if running
            if (gameInterval) {
                clearInterval(gameInterval);
                gameInterval = null;
            }
            // Update localStorage
            saveState();
            // Play sound feedback
            playSound('click');
            // Update UI
            render();
        }
        function resetScores() { 
            // Confirmation dialog for safety
            if (!confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุชุตููุฑ ุงูุนุฏุงุฏ ูุฌููุน ุงููุงุนุจููุ')) return;
            
            state.players = state.players.map(p => ({...p, score: 0}));
            state.teams = state.teams.map(t => ({...t, score: 0}));
            playSound('click');
            saveState();
            render(); 
        }
        function updateTeamName(teamId, newName) {
            const team = state.teams.find(t => t.id === teamId);
            if (team && newName.trim()) {
                team.name = newName.trim();
                playSound('click');
                saveState();
            }
        }
        function assignPlayerToTeam(teamId, playerId) {
            // 1. Find the player object
            const player = state.players.find(p => p.id === playerId);
            if (!player) return;

            // 2. Remove player from ALL teams first (to avoid duplicates)
            state.teams.forEach(team => {
                team.members = team.members.filter(m => m.id !== playerId);
            });

            // 3. Add to the new target team
            const targetTeam = state.teams.find(t => t.id === teamId);
            if (targetTeam) {
                targetTeam.members.push(player);
            }

            // 4. Update the "teamId" property on the player object itself (for redundancy/safety)
            player.teamId = teamId;

            // 5. โ๏ธ CRITICAL: Save and Render
            playSound('click');
            saveState(); // <--- This ensures the assignment persists on refresh
            render();
        }
        function activateTeamMode() {
            const teamA = state.teams[0];
            const teamB = state.teams[1];
            
            if (teamA.members.length === 0 || teamB.members.length === 0) {
                alert('ูุฌุจ ุฃู ูููู ููู ูุฑูู ูุงุนุจ ูุงุญุฏ ุนูู ุงูุฃูู!');
                return;
            }
            
            state.teamMode = true;
            playSound('success');
            saveState();
            render();
        }
        function deactivateTeamMode() {
            state.teamMode = false;
            playSound('click');
            render();
        }

        // ============================================
        // =========== ALL GAME LOGIC =================
        // ============================================

        // --- LAWYER ---
        function startLawyerGame() {
            const data = getUniqueItem('lawyer', LAWYER_DATA);
            const player = getFairPlayer();
            state.currentGame = { type: 'lawyer', phase: 'prepare', data, player, revealed: false, timeLeft: 30 };
            playSound('click');
            saveState();
            render();
        }
        function startLawyerRound() {
            state.currentGame.phase = 'playing';
            state.currentGame.revealed = true;
            playSound('click');
            saveState();
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                // DOM update for no flickering
                const timerEl = document.getElementById('game-timer');
                if (timerEl) timerEl.innerText = getTimer(state.currentGame.timeLeft);
                
                if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); saveState(); render(); }
                else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
        }
        function lawyerSuccess() { updateScore(state.currentGame.player.id, false, 1); startLawyerGame(); }
        function renderLawyerSetup() {
            if (!state.currentGame || state.currentGame.type !== 'lawyer') return renderGameStartScreen('ุงููุญุงูู ุงููุนูู', 'ูุตูุจุฉ ูุชุญุตููุ ููุงุฒู ุชุจุฑุฑูุง ูุชุฎุฑุฌ ูููุง ูุชุณุชุฎุฏู 3 ูููุงุช ููููุด ุนูุงูุฉ ุจุงูููุถูุน ุนุดุงู ุชููุน ุงููุญููุฉ!', '๐จโโ๏ธ', 'ูุฑุทูู!', 'startLawyerGame()', 'bg-slate-700');
            const game = state.currentGame;
            if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-slate-700 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-slate-800 z-10 flex items-center justify-center cursor-pointer hover:bg-slate-900 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงููุตูุจุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ุงููุตูุจุฉ:</p><h2 class="text-2xl font-bold text-yellow-300 leading-relaxed mb-4">${game.data.disaster}</h2><div class="border-t border-white/20 pt-4"><p class="text-sm mb-2 opacity-75">ูููุงุช ุฅุฌุจุงุฑูุฉ:</p><div class="flex flex-wrap gap-2 justify-center">${game.data.words.map(w=>`<span class="bg-slate-600 px-3 py-1 rounded-lg">${w}</span>`).join('')}</div></div></div><button onclick="startLawyerRound()" class="w-full py-4 bg-white text-slate-800 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุงุจุฏุฃ ุงููุฑุงูุนุฉ</button></div>`;
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-4 mb-4"><p class="text-lg font-bold opacity-80">ุงููุชูู: <span class="text-slate-800">${game.player.name}</span></p></div><div class="bg-slate-50 p-4 rounded-xl border border-slate-200 mb-6 text-center"><h1 class="text-3xl font-black leading-relaxed text-center text-slate-800 mb-2">${game.data.disaster}</h1><div class="flex flex-wrap gap-2 justify-center mt-4">${game.data.words.map(w=>`<span class="bg-slate-200 px-2 py-1 rounded text-sm font-bold text-slate-700">${w}</span>`).join('')}</div></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-8xl font-black text-slate-800" id="game-timer">${getTimer(game.timeLeft)}</div></div><div class="space-y-3"><button onclick="lawyerSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุจุฑุงุกุฉ (ุฃููุนูุง)</button><button onclick="state.currentGame.phase='result'; render()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ุฅุนุฏุงู (ูุดู)</button></div></div>`;
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-slate-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฑูุนุช ุงูุฌูุณุฉ!</h2><button onclick="startLawyerGame()" class="w-full py-4 bg-slate-600 rounded-xl font-bold text-xl mb-3">ูุถูุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- INDIAN ACTION ---
        function startIndianGame() {
            const data = getUniqueItem('indian', INDIAN_DATA);
            const player = getFairPlayer();
            state.currentGame = { type: 'indian', phase: 'prepare', data, player, revealed: false, timeLeft: 60 };
            playSound('click');
            saveState();
            render();
        }
        function startIndianRound() {
            state.currentGame.phase = 'playing';
            state.currentGame.revealed = true;
            playSound('click');
            saveState();
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                const timerEl = document.getElementById('game-timer');
                if (timerEl) timerEl.innerText = getTimer(state.currentGame.timeLeft);
                
                if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); saveState(); render(); }
                else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
        }
        function indianSuccess() { updateScore(state.currentGame.player.id, false, 1); startIndianGame(); }
        function indianFail() { 
            if (gameInterval) clearInterval(gameInterval);
            state.currentGame.phase = 'result'; 
            playSound('fail');
            saveState();
            render(); 
        }
        function renderIndianSetup() {
            if (!state.currentGame || state.currentGame.type !== 'indian') return renderGameStartScreen('ุณููุงุฑูู ููุฏู', 'ูุซู ูุดูุฏ ุฏุฑุงูู ูุน ุดุฑุท ุฅุฎุฑุงุฌ ุบุฑูุจ! ุฃููุฑ ุนูู ูุฏ ูุง ุชูุฏุฑ!', '๐ฌ', 'ุฃูุดู!', 'startIndianGame()', 'bg-orange-600');
            const game = state.currentGame;
            if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-orange-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุจุทู ุงูููู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-orange-700 z-10 flex items-center justify-center cursor-pointer hover:bg-orange-800 transition"><span class="text-xl font-bold animate-pulse">๐ฌ ุฏูุณ ุนุดุงู ุชุดูู ุงูุณููุงุฑูู</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ุงููุดูุฏ:</p><h2 class="text-2xl font-bold text-yellow-300 leading-relaxed mb-4">${game.data.scene}</h2><div class="border-t border-white/20 pt-4"><p class="text-sm mb-2 opacity-75">ุดุฑุท ุงูุฅุฎุฑุงุฌ:</p><div class="bg-orange-500 px-4 py-3 rounded-lg font-bold text-lg">${game.data.condition}</div></div></div><button onclick="startIndianRound()" class="w-full py-4 bg-white text-orange-600 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>๐ฌ ุฃูุดู ูุง ููุงู!</button></div>`;
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-4 mb-4"><p class="text-lg font-bold opacity-80">ุงูุจุทู: <span class="text-orange-600">${game.player.name}</span></p></div><div class="bg-orange-50 p-4 rounded-xl border-2 border-orange-200 mb-4 text-center"><p class="text-xs text-orange-600 font-bold mb-2 uppercase">ุงููุดูุฏ</p><h1 class="text-2xl font-black leading-relaxed text-center text-orange-900 mb-4">${game.data.scene}</h1><div class="border-t-2 border-orange-200 pt-3"><p class="text-xs text-orange-600 font-bold mb-2 uppercase">ุดุฑุท ุงูุฅุฎุฑุงุฌ</p><div class="bg-orange-600 text-white px-4 py-2 rounded-lg font-bold text-base">${game.data.condition}</div></div></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-8xl font-black text-orange-600" id="game-timer">${getTimer(game.timeLeft)}</div></div><div class="space-y-3"><button onclick="indianSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">๐ ุฌุงุจูุง! (ุฃูุณูุงุฑ)</button><button onclick="indianFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">๐ ุฃููุฑ ุฃูู (ูุดู)</button></div></div>`;
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-orange-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">๐ฌ ุงูุชูู ุงูุชุตููุฑ!</h2><button onclick="startIndianGame()" class="w-full py-4 bg-orange-600 rounded-xl font-bold text-xl mb-3">ูุดูุฏ ุฌุฏูุฏ</button><button onclick="goHome()" class="w-full py-3 bg-orange-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- BOMB ---
        function startBombGame() {
            const category = BOMB_DATA[Math.floor(Math.random() * BOMB_DATA.length)];
            const count = Math.floor(Math.random() * 3) + 3; // ุนุฏุฏ ุนุดูุงุฆู ูู 3 ูู 5
            const time = Math.floor(Math.random() * (60 - 10 + 1) + 10);
            const player = getFairPlayer();
            state.currentGame = { type: 'bomb', phase: 'playing', category, count, player, timeLeft: time, exploded: false };
            playSound('click');
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                playSound('bomb_tick');
                if (state.currentGame.timeLeft <= 0) {
                    clearInterval(gameInterval);
                    state.currentGame.exploded = true;
                    state.currentGame.phase = 'result';
                    // Deduct point from current player
                    updateScore(state.currentGame.player.id, false, -1);
                    playSound('explode');
                    saveState();
                    render();
                }
            }, 1000);
        }
        function passBomb() { 
            if(state.currentGame && state.currentGame.phase === 'playing') {
                // Stop current timer
                if (gameInterval) clearInterval(gameInterval);
                
                // Change category and player
                const newCategory = BOMB_DATA[Math.floor(Math.random() * BOMB_DATA.length)];
                const newCount = Math.floor(Math.random() * 3) + 3; // ุนุฏุฏ ุนุดูุงุฆู ูู 3 ูู 5
                const newPlayer = getFairPlayer();
                const newTime = Math.floor(Math.random() * (60 - 10 + 1) + 10);
                
                state.currentGame.category = newCategory;
                state.currentGame.count = newCount;
                state.currentGame.player = newPlayer;
                state.currentGame.timeLeft = newTime;
                
                playSound('click');
                render();
                
                // Start new timer
                gameInterval = setInterval(() => {
                    state.currentGame.timeLeft--;
                    playSound('bomb_tick');
                    if (state.currentGame.timeLeft <= 0) {
                        clearInterval(gameInterval);
                        state.currentGame.exploded = true;
                        state.currentGame.phase = 'result';
                        updateScore(state.currentGame.player.id, false, -1);
                        playSound('explode');
                        saveState();
                        render();
                    }
                }, 1000);
            }
        }
        function renderBombSetup() {
            if (!state.currentGame || state.currentGame.type !== 'bomb') return renderGameStartScreen('ุงูููุจูุฉ', 'ุณุคุงู ููุธูุฑุ ุฌุงูุจ ูุจุงุตู ุงูููุจุงูู ุจุณุฑุนุฉ ููู ุฌูุจู. ุงูููุจูุฉ ูุชูุฑูุน ูู ููุช ุนุดูุงุฆูุ ุงููู ูู ุฅูุฏู ุจูุฎุณุฑ!', '๐ฃ', 'ุดุบู ุงููุชูู', 'startBombGame()', 'bg-red-700');
            const game = state.currentGame;
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-red-600 text-white animate-in"><div class="text-center mt-4 mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="text-center mt-4"><p class="text-white/80 font-bold mb-4">ุงููุฆุฉ ุงููุทููุจุฉ:</p><h1 class="text-4xl font-black mb-12">${game.count} ${game.category}</h1></div><div class="flex-1 flex items-center justify-center"><div class="text-9xl mb-8 bomb-pulse">๐ฃ</div></div><p class="text-center mb-8 font-bold text-lg">ุฌุงูุจ ูุจุงุตู ุจุณุฑุนุฉ!</p><button onclick="passBomb()" class="w-full py-6 bg-white text-red-700 rounded-2xl font-black text-2xl shadow-xl active:scale-95 transition">ุจุงุตู ุงูููุจูุฉ! ๐จ</button></div>`;
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-black text-white text-center animate-in"><div class="text-9xl mb-6">๐ฅ</div><h2 class="text-4xl font-black text-red-500 mb-4">ุจููููู!</h2><p class="text-xl mb-2">ุงููุงุนุจ: <span class="font-bold text-yellow-300">${game.player.name}</span></p><p class="text-lg mb-8 opacity-80">ุชู ุฎุตู ููุทุฉ (-1)</p><button onclick="startBombGame()" class="w-full py-4 bg-red-700 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- TABOO ---
        function startTabooGame() {
            const card = getUniqueItem('taboo', TABOO_DATA);
            const player = getFairPlayer();
            state.currentGame = { type: 'taboo', phase: 'prepare', card, player, revealed: false, timeLeft: 60, score: 0 };
            playSound('click');
            render();
        }
        function startTabooRound() {
            state.currentGame.phase = 'playing';
            state.currentGame.revealed = true;
            playSound('click');
            saveState();
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                const timerEl = document.getElementById('game-timer');
                if (timerEl) timerEl.innerText = getTimer(state.currentGame.timeLeft);
                if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); saveState(); render(); }
                else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
        }
        function tabooCorrect() { 
            // ุณุฌู ุงูููุทุฉ ููุงุนุจ ุงูุญุงูู ูุจู ุชุจุฏูู ุงูุฏูุฑ
            updateScore(state.currentGame.player.id, false, 1);
            state.currentGame.score++; 
            playSound('success'); 
            // ุงูุชูู ููุงุนุจ ุงูุชุงูู
            const nextPlayer = getFairPlayer();
            state.currentGame.player = nextPlayer;
            state.currentGame.card = getUniqueItem('taboo', TABOO_DATA);
            saveState();
            render(); 
        }
        function tabooSkip() { 
            playSound('click'); 
            // ุงูุชูู ููุงุนุจ ุงูุชุงูู
            const nextPlayer = getFairPlayer();
            state.currentGame.player = nextPlayer;
            state.currentGame.card = getUniqueItem('taboo', TABOO_DATA);
            saveState();
            render(); 
        }
        function tabooFail() { 
            state.currentGame.score--; 
            playSound('fail'); 
            // ุงูุชูู ููุงุนุจ ุงูุชุงูู
            const nextPlayer = getFairPlayer();
            state.currentGame.player = nextPlayer;
            state.currentGame.card = getUniqueItem('taboo', TABOO_DATA);
            saveState();
            render(); 
        }
        function renderTabooSetup() {
            if (!state.currentGame || state.currentGame.type !== 'taboo') return renderGameStartScreen('ุฃูุนู ุชููููุง', 'ุงุดุฑุญ ุงููููุฉ ุงููู ููู ูู ุบูุฑ ูุง ุชููู ุฃู ูููุฉ ูู ุงูููููุนุงุช ุงููู ุชุญุชูุง!', '๐ซ', 'ุงุจุฏุฃ ุงูุชุญุฏู', 'startTabooGame()', 'bg-rose-900');
            const game = state.currentGame;
            if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-900 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-rose-950 z-10 flex items-center justify-center cursor-pointer hover:bg-rose-900 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงููููุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ุงููููุฉ ุงููุทููุจุฉ:</p><h2 class="text-3xl font-bold text-yellow-300">${game.card.word}</h2></div><button onclick="startTabooRound()" class="w-full py-4 bg-white text-rose-900 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุฌุงูุฒ! ุงุจุฏุฃ</button></div>`;
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mb-4"><p class="text-lg font-bold opacity-80">ุงูุฏูุฑ ุนูู: <span class="text-rose-600">${game.player.name}</span></p></div><div class="text-center flex justify-between items-center mb-6"><div class="text-xl font-bold text-rose-900">ุงูููุงุท: ${game.score}</div><div class="text-3xl font-black text-rose-600" id="game-timer">${getTimer(game.timeLeft)}</div></div><div class="flex-1 flex flex-col justify-center items-center"><div class="w-full bg-rose-50 border-2 border-rose-200 rounded-2xl p-6 text-center mb-4"><h1 class="text-3xl font-black leading-relaxed text-center text-rose-900 mb-6">${game.card.word}</h1><div class="bg-white rounded-xl p-4 shadow-inner"><p class="text-sm text-red-500 font-bold mb-3">๐ซ ููููุน ุชููู:</p>${game.card.taboo.map(t => `<div class="text-lg font-bold text-slate-700 border-b border-slate-100 last:border-0 py-1">${t}</div>`).join('')}</div></div></div><div class="grid grid-cols-3 gap-2 h-20"><button onclick="tabooFail()" class="bg-red-600 text-white rounded-xl font-bold text-lg">ุบูุทุฉ</button><button onclick="tabooSkip()" class="bg-slate-500 text-white rounded-xl font-bold text-lg">ุชุฎุทู</button><button onclick="tabooCorrect()" class="bg-green-600 text-white rounded-xl font-bold text-lg">ุตุญ</button></div></div>`;
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฎูุต ุงูููุช!</h2><div class="text-6xl font-black text-yellow-300 mb-4">${game.score}</div><p class="text-xl mb-8">ููุทุฉ</p><button onclick="startTabooGame()" class="w-full py-4 bg-rose-700 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- STORY ---
        function startStoryGame() { 
            const story = getUniqueItem('story', STORY_DATA);
            const currentPlayer = getFairPlayer();
            state.currentGame = { type: 'story', phase: 'ready', story, revealed: false, timeLeft: 60, currentPlayer }; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function startStoryRound() { 
            state.currentGame.phase = 'playing'; 
            state.currentGame.revealed = true; 
            playSound('click'); 
            render(); 
            if (gameInterval) clearInterval(gameInterval); 
            gameInterval = setInterval(() => { 
                state.currentGame.timeLeft--; 
                const t = document.getElementById('game-timer'); 
                if(t) t.innerText = state.currentGame.timeLeft; 
                if (state.currentGame.timeLeft <= 0) { 
                    clearInterval(gameInterval); 
                    state.currentGame.phase = 'result'; 
                    playSound('fail'); 
                    render(); 
                } else if (state.currentGame.timeLeft <= 10) playSound('tick'); 
            }, 1000); 
        }
        function storyNextPlayer() {
            // ุงูุชูู ููุงุนุจ ุงูุชุงูู ุจุงุณุชุฎุฏุงู turnQueue
            const nextPlayer = getFairPlayer();
            state.currentGame.currentPlayer = nextPlayer;
            saveState();
            render();
        }
        function storySuccess() { 
            // ุงูููุทุฉ ููุงุนุจ ุงูุญุงูู (ุตุงุญุจ ุงูุฏูุฑ)
            if(state.currentGame.currentPlayer) updateScore(state.currentGame.currentPlayer.id, false, 1); 
            startStoryGame(); 
        }
        function storyFail() { 
            if (state.daresEnabled) showDare(); 
            startStoryGame(); 
        }
        function renderStorySetup() { 
            if (!state.currentGame || state.currentGame.type !== 'story') return renderGameStartScreen('ุญูุงูุฉ ูู ูููุชูู', 'ุจุฏุงูุฉ ูุตุฉ ูููุงูุฉ ุฅุฌุจุงุฑูุฉ. ูู ูุงุญุฏ ูููู ูููุฉ ูุงุญุฏุฉ ุจุณ ุนุดุงู ุชูุตููุง ููููุงูุฉ ุฏู ูู ุฎูุงู 60 ุซุงููุฉ!', '๐', 'ุงูุชุญ ุงููุชุงุจ', 'startStoryGame()', 'bg-amber-600'); 
            const game = state.currentGame; 
            if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-700 text-white text-center animate-in"><div class="text-6xl mb-6">๐</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒูู ููุชุฃูููุ</h2><div onclick="startStoryRound()" class="w-full py-8 bg-white text-amber-900 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-amber-50 transition border-4 border-amber-200">ุฏูุณ ูุงูุดู ุงููุตุฉ</div></div>`; 
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mb-4"><p class="text-lg font-bold opacity-80">ุงูุฏูุฑ ุนูู: <span class="text-amber-600">${game.currentPlayer ? game.currentPlayer.name : 'ูุงุนุจ'}</span></p></div><div class="flex-1 flex flex-col justify-center items-center space-y-6"><div class="bg-amber-50 p-6 rounded-2xl border-l-4 border-amber-500 w-full"><p class="text-sm text-amber-600 font-bold mb-2">ุงูุจุฏุงูุฉ:</p><h1 class="text-3xl font-black leading-relaxed text-center text-slate-800">"${game.story.start}"</h1></div><div class="bg-amber-50 p-6 rounded-2xl border-l-4 border-red-500 w-full"><p class="text-sm text-red-600 font-bold mb-2">ุงูููุงูุฉ ุงูุฅุฌุจุงุฑูุฉ:</p><h1 class="text-3xl font-black leading-relaxed text-center text-slate-800">"${game.story.end}"</h1></div><div class="text-center mt-4"><div class="text-6xl font-black text-amber-600" id="game-timer">${game.timeLeft}</div></div></div><div class="space-y-3 mt-auto"><button onclick="storySuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ูุตูุชูุง ููููุงูุฉ!</button><button onclick="storyNextPlayer()" class="w-full py-3 bg-blue-500 text-white rounded-xl font-bold">ุงูุชุงูู (ุฏูุฑ ุฌุฏูุฏ)</button><button onclick="storyFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ุงูููุช ุฎูุต (ุนูุงุจ)</button></div></div>`; 
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุงูุชูุช ุงููุตุฉ!</h2><button onclick="startStoryGame()" class="w-full py-4 bg-amber-600 rounded-xl font-bold text-xl mb-3">ูุตุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
        }

        // --- MORPH ---
        function startMorphGame() { 
            const word = getUniqueItem('morph', MORPH_DATA);
            const startingPlayer = getFairPlayer();
            state.currentGame = { type: 'morph', phase: 'ready', word, timeLeft: 45, startingPlayer, losers: [] }; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function startMorphRound() { 
            state.currentGame.phase = 'playing'; 
            playSound('click'); 
            render(); 
            if (gameInterval) clearInterval(gameInterval); 
            gameInterval = setInterval(() => { 
                state.currentGame.timeLeft--; 
                const t = document.getElementById('game-timer'); 
                if(t) t.innerText = state.currentGame.timeLeft; 
                if (state.currentGame.timeLeft <= 0) { 
                    clearInterval(gameInterval); 
                    state.currentGame.phase = 'result'; 
                    playSound('fail'); 
                    render(); 
                } else if (state.currentGame.timeLeft <= 10) playSound('tick'); 
            }, 1000); 
        }
        function toggleMorphLoser(playerId) {
            if (!state.currentGame.losers) state.currentGame.losers = [];
            const index = state.currentGame.losers.indexOf(playerId);
            if (index > -1) {
                state.currentGame.losers.splice(index, 1);
            } else {
                state.currentGame.losers.push(playerId);
            }
            render();
        }
        function morphSuccess() {
            // Round ended successfully - all players succeeded
            // Optional: Award point to starting player
            if (state.currentGame.startingPlayer) {
                updateScore(state.currentGame.startingPlayer.id, false, 1);
            }
            playSound('success');
            startMorphGame();
        }
        function morphFail() {
            // Someone failed - go to result phase to select losers
            if (gameInterval) clearInterval(gameInterval);
            state.currentGame.phase = 'result';
            playSound('fail');
            saveState();
            render();
        }
        function morphConfirmResult() {
            // ูู ุฎุงุณุฑ ูุชุฎุตู ููู (-1)
            state.currentGame.losers.forEach(loserId => {
                updateScore(loserId, false, -1);
            });
            // ุงููุงุนุจ ุงููุญูุฏ ุงููู ูุชูุด ุงุฎุชูุงุฑู ูุฎุงุณุฑ ูุงุฎุฏ (+2)
            const allPlayerIds = state.players.map(p => p.id);
            const winners = allPlayerIds.filter(id => !state.currentGame.losers.includes(id));
            if (winners.length === 1) {
                updateScore(winners[0], false, 2);
            }
            startMorphGame();
        }
        function renderMorphSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'morph') return renderGameStartScreen('ุงููููุฉ ุงููุชุญููุฉ', 'ูููุฉ ูุชุธูุฑ. ูู ูุงุนุจ ูุบูุฑ ุญุฑู ูุงุญุฏ ุจุณ ุนุดุงู ูุนูู ูููุฉ ุฌุฏูุฏุฉ ูููุง ูุนูู. ูู ุญุฏ ููู ุฃู ุงูููุช ุฎูุต ุจูุฎุณุฑ!', '๐ค', 'ูุงุช ุงููููุฉ', 'startMorphGame()', 'bg-cyan-700'); 
            const game = state.currentGame; 
            if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-700 text-white text-center animate-in"><div class="text-6xl mb-6">๐ฒ</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒูู ููุชุบููุฑุ</h2><div class="mb-4"><p class="text-lg opacity-80 mb-2">ุงูุฏูุฑ ุนูู:</p><h3 class="text-2xl font-bold text-yellow-300">${game.startingPlayer ? game.startingPlayer.name : 'ูุงุนุจ'}</h3></div><div onclick="startMorphRound()" class="w-full py-8 bg-white text-cyan-900 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-cyan-50 transition border-4 border-cyan-200">ุฏูุณ ูุงูุดู ุงููููุฉ</div></div>`; 
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mb-4"><p class="text-lg font-bold opacity-80">ุงูุฏูุฑ ุนูู: <span class="text-cyan-600">${game.startingPlayer ? game.startingPlayer.name : 'ูุงุนุจ'}</span></p></div><div class="flex-1 flex flex-col justify-center items-center text-center"><p class="text-lg text-slate-500 mb-4">ูููุฉ ุงูุจุฏุงูุฉ:</p><div class="bg-cyan-100 p-8 rounded-3xl w-full mb-8 shadow-inner"><h1 class="text-3xl font-black leading-relaxed text-center text-cyan-800">${game.word}</h1></div><div class="text-8xl font-black text-cyan-600" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3 mt-auto"><button onclick="morphSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ูุฌุญ (+1 ููุทุฉ)</button><button onclick="morphFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ูุดู</button></div></div>`; 
            if (game.phase === 'result') {
                if (!game.losers) game.losers = [];
                return `<div class="h-screen flex flex-col p-6 bg-cyan-900 text-white"><h2 class="text-3xl font-bold mb-6 text-center">ุงูุฌููุฉ ุฎูุตุช!</h2><p class="text-lg mb-4 text-center opacity-80">ููู ุงููู ุฎุณุฑูุงุ (ุงุฎุชุฑ ูู ุงูุฎุงุณุฑูู)</p><div class="flex-1 overflow-y-auto mb-4">${state.players.map(p => `<label class="flex items-center p-4 bg-white/10 rounded-xl mb-2 cursor-pointer hover:bg-white/20 transition"><input type="checkbox" ${game.losers.includes(p.id) ? 'checked' : ''} onchange="toggleMorphLoser(${p.id})" class="w-6 h-6 mr-3"><span class="text-xl font-bold">${p.name}</span></label>`).join('')}</div><button onclick="morphConfirmResult()" class="w-full py-4 bg-cyan-600 rounded-xl font-bold text-xl mb-3">ุชุฃููุฏ ุงููุชูุฌุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
            }
        }

        // --- ARTIST ---
        function startArtistGame() { if (state.players.length < 2) { alert("ูุญุชุงุฌูู ูุงุนุจูู ุนูู ุงูุฃูู!"); return; } const word = getUniqueItem('artist', ARTIST_DATA); const artist = getFairPlayer(); let guesser = state.players[Math.floor(Math.random() * state.players.length)]; while (guesser.id === artist.id) guesser = state.players[Math.floor(Math.random() * state.players.length)]; state.currentGame = { type: 'artist', phase: 'setup', word, artist, guesser, timeLeft: 60, revealed: false }; playSound('click'); render(); }
        function revealArtistWord() { state.currentGame.revealed = true; playSound('click'); saveState(); render(); }
        function startArtistDrawing() { state.currentGame.phase = 'drawing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); saveState(); render(); } else if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function artistSuccess() { updateScore(state.currentGame.guesser.id, false, 1); updateScore(state.currentGame.artist.id, false, 1); startArtistGame(); }
        function renderArtistSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'artist') return renderGameStartScreen('ุงูุฑุณุงู ุงูุฃุนูู', 'ุงูุฑุณุงู ูุดูู ุงููููุฉ. ุงููุงุนุจ ุงูุชุงูู ูุญุท ุงูููุจุงูู ุนูู ุฑุงุณู ุฃู ููุจุตุด. ุงูุฑุณุงู ูุฑุณูุ ูุงูุชุงูู ูุฎูู ูู ูุตู ุงููุงุณ ููุฑุณูุฉ!', '๐จ', 'ุงุจุฏุฃ ุงููู', 'startArtistGame()', 'bg-fuchsia-600'); 
            const game = state.currentGame; 
            if (game.phase === 'setup') {
                if (!game.revealed) {
                    return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-fuchsia-800 text-white text-center animate-in"><h2 class="text-2xl font-bold mb-4">ูุง <span class="text-yellow-300">${game.artist.name}</span></h2><p class="mb-8">ุฎุฏ ุงูููุจุงูู ููุณูู ูููุณ!</p><div class="bg-white/20 p-8 rounded-3xl mb-8 border border-white/30 relative overflow-hidden"><div class="absolute inset-0 bg-fuchsia-800 blur-md flex items-center justify-center"><span class="text-4xl font-black opacity-50">๐จ</span></div><p class="text-sm opacity-75 mb-2 relative z-10" style="filter: blur(8px); user-select: none;">ูุทููุจ ุชุฑุณู:</p><h1 class="text-4xl font-black relative z-10" style="filter: blur(8px); user-select: none;">${game.word}</h1></div><button onclick="revealArtistWord()" class="w-full py-4 bg-white text-fuchsia-900 rounded-xl font-bold text-xl shadow-xl">ุงุถุบุท ูููุดู</button></div>`;
                }
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-fuchsia-800 text-white text-center animate-in"><h2 class="text-2xl font-bold mb-4">ูุง <span class="text-yellow-300">${game.artist.name}</span></h2><p class="mb-8">ุฎุฏ ุงูููุจุงูู ููุณูู ูููุณ!</p><div class="bg-white/20 p-8 rounded-3xl mb-8 border border-white/30"><p class="text-sm opacity-75 mb-2">ูุทููุจ ุชุฑุณู:</p><h1 class="text-4xl font-black">${game.word}</h1></div><p class="mb-4 text-sm opacity-80">ุฏูููุชู ุฎุจู ุงููููุฉ ูุงุฏู ุงูููุจุงูู ูู ${game.guesser.name}</p><button onclick="startArtistDrawing()" class="w-full py-4 bg-white text-fuchsia-900 rounded-xl font-bold text-xl shadow-xl">ููุง ูุฑุณู!</button></div>`;
            }
            if (game.phase === 'drawing') return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mt-4 mb-4"><p class="text-lg font-bold opacity-80">ุงูุฑุณุงู: <span class="text-fuchsia-600">${game.artist.name}</span></p><p class="text-lg font-bold opacity-80">ุจูุฎูู: <span class="text-fuchsia-600">${game.guesser.name}</span></p></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-9xl font-black text-fuchsia-600 mb-8" id="game-timer">${game.timeLeft}</div><p class="text-center text-slate-600 px-4">ุงูุฑุณุงู ุจูุฑุณู ุฏูููุช.. ูุงููุงุณ ุจุชูุตู ุงูุฑุณูุฉ (ูู ุบูุฑ ูุง ูููููุง ุงููููุฉ!)</p></div><div class="space-y-3 mt-auto"><button onclick="artistSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุนุฑููุง!</button><button onclick="state.currentGame.phase='result'; render()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ูุนุฑูุด</button></div></div>`; 
            if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-fuchsia-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฎูุต ุงูููุช!</h2><p class="mb-4 text-xl">ุงููููุฉ ูุงูุช: <span class="text-yellow-300 font-bold">${game.word}</span></p><button onclick="startArtistGame()" class="w-full py-4 bg-fuchsia-600 rounded-xl font-bold text-xl mb-3">ุฑุณูุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
        }

        // --- WHISPER ---
        function startWhisperGame() { if (state.players.length < 2) { alert("ูุญุชุงุฌูู ูุงุนุจูู ุนูู ุงูุฃูู!"); return; } const phrase = getUniqueItem('whisper', WHISPER_DATA); const listener = getFairPlayer(); let speakerIndex = Math.floor(Math.random() * state.players.length); while (state.players[speakerIndex].id === listener.id) speakerIndex = Math.floor(Math.random() * state.players.length); state.currentGame = { type: 'whisper', phase: 'setup', phrase: phrase, listener, speaker: state.players[speakerIndex], timeLeft: 60, revealed: false }; playSound('click'); render(); }
        function startWhisperRound() { state.currentGame.phase = 'playing'; state.currentGame.revealed = true; playSound('click'); saveState(); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); saveState(); render(); } else if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function whisperSuccess() { updateScore(state.currentGame.listener.id, false, 1); startWhisperGame(); }
        function whisperFail() { if (state.daresEnabled) showDare(); startWhisperGame(); }
        function renderWhisperSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'whisper') return renderGameStartScreen('ุฅูุฑุฃ ุดูุงููู', 'ูุงุญุฏ ููุจุณ ุณูุงุนุฉ ูููุง ุฃุบููุฉ ุจุตูุช ุนุงููุ ูุงูุชุงูู ููุฑุฃ ุฌููุฉ ุนุดูุงุฆูุฉ. ุญุงูู ุชุฎูู ุงูุฌููุฉ ูู ุญุฑูุฉ ุงูุดูุงูู!', '๐ง', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startWhisperGame()', 'bg-pink-500'); 
            const game = state.currentGame; 
            if (game.phase === 'setup') { 
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-600 text-white text-center animate-in"><div class="mb-8"><p class="text-lg opacity-80">ููุจุณ ุงูุณูุงุนุฉ:</p><h1 class="text-4xl font-black text-yellow-300 mb-4">${game.listener.name}</h1><div class="w-full h-1 bg-white/20 rounded-full mb-4"></div><p class="text-lg opacity-80">ููุฑุฃ ุงูุฌููุฉ:</p><h1 class="text-3xl font-bold">${game.speaker.name}</h1></div><div class="bg-white/10 p-6 rounded-2xl border border-white/20 mb-8"><p class="text-sm">ูุง ${game.listener.name}ุ ุนูู ุงูุตูุช ุนุงูุงุฎุฑ! ๐ต</p></div><button onclick="startWhisperRound()" class="w-full py-4 bg-white text-pink-700 rounded-xl font-bold text-xl shadow-xl">ุฌุงูุฒูู! ุงูุดู ุงูุฌููุฉ</button></div>`; 
            } 
            if (game.phase === 'playing') { 
                return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mt-4 mb-8"><p class="text-lg font-bold opacity-80">ุงููุชุญุฏุซ: <span class="text-pink-600">${game.speaker.name}</span></p></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-9xl font-black text-pink-600 mb-8" id="game-timer">${game.timeLeft}</div><div class="bg-pink-50 p-6 rounded-2xl border-2 border-pink-100 w-full text-center"><p class="text-sm text-pink-400 mb-2">ุงูุฌููุฉ ูู:</p><h1 class="text-3xl font-black leading-relaxed text-center text-slate-800">${game.phrase}</h1></div></div><div class="space-y-3 mt-auto"><button onclick="whisperSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุนุฑููุง! (+ููุทุฉ)</button><button onclick="whisperFail()" class="w-full py-3 bg-slate-200 text-slate-600 rounded-xl font-bold">ูุนุฑูุด (ุชุฎุทู)</button></div></div>`; 
            } 
            if (game.phase === 'result') { 
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุฎูุต ุงูููุช!</h2><p class="text-xl mb-8">ุงูุฌููุฉ ูุงูุช: <br><span class="text-yellow-300 font-bold">${game.phrase}</span></p><button onclick="startWhisperGame()" class="w-full py-4 bg-pink-600 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
            } 
        }

        // --- NEVER ---
        function startNeverGame() { const statement = getUniqueItem('never', NEVER_DATA); state.currentGame = { type: 'never', phase: 'ready', statement: statement, revealed: false }; playSound('click'); render(); }
        function revealNeverCard() { state.currentGame.phase = 'playing'; state.currentGame.revealed = true; playSound('click'); render(); }
        function neverScoreSelect() { state.currentGame.phase = 'scoring'; saveState(); render(); }
        function renderNeverSetup() { if (!state.currentGame || state.currentGame.type !== 'never') return renderGameStartScreen('ุฃูุง ุนูุฑู ูุง', 'ุงุฑูุนูุง 5 ุฃุตุงุจุน. ุฌููุฉ ูุชุธูุฑุ ูู ุนููุช ุงูุญุงุฌุฉ ุฏู ูุจู ูุฏูุ ูุฒู ุตุจุงุน. ุขุฎุฑ ูุงุญุฏ ููุถู ุฑุงูุน ุตุจุงุนู ูู ุงููุณุจุงู!', 'โ', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startNeverGame()', 'bg-rose-800'); const game = state.currentGame; if (game.phase === 'ready') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-800 text-white text-center animate-in"><div class="text-6xl mb-6">โ</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒููุ</h2><p class="text-lg opacity-80 mb-8">ุงุฑูุนูุง ุฅูุฏููู (5 ุฃุตุงุจุน) ุฏูููุชู!</p><div onclick="revealNeverCard()" class="w-full py-8 bg-white text-rose-900 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-rose-50 transition border-4 border-rose-200">ุฏูุณ ูุงูุดู ุงููุงุฑุช</div></div>`; } if (game.phase === 'playing') { return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-800 text-white text-center animate-in"><p class="text-xl font-bold opacity-75 mb-4">ุฃูุง ุนูุฑู ูุง...</p><div class="bg-white text-slate-900 p-8 rounded-3xl w-full mb-8 shadow-2xl"><h1 class="text-3xl font-black leading-relaxed">${game.statement}</h1></div><div class="w-full space-y-3"><button onclick="startNeverGame()" class="w-full py-4 bg-yellow-500 text-rose-900 rounded-xl font-bold text-xl shadow-lg">ุงููุงุฑุช ุงููู ุจุนุฏู</button><button onclick="neverScoreSelect()" class="w-full py-3 bg-rose-900/50 text-white border border-rose-400 rounded-xl font-bold">ุชูุฒูุน ููุงุท (ุงุฎุชูุงุฑู)</button><button onclick="goHome()" class="w-full py-3 bg-transparent text-rose-200 font-bold">ุฎุฑูุฌ</button></div></div>`; } if (game.phase === 'scoring') { return `<div class="h-screen flex flex-col p-6 bg-rose-900 text-white text-center"><h2 class="text-2xl font-bold mb-6">ููู ูุณุชุญู ุงูููุทุฉุ</h2><div class="grid grid-cols-2 gap-3 w-full mb-8 flex-1 overflow-y-auto content-start">${state.players.map(p => `<button onclick="updateScore(${p.id}, false, 1); startNeverGame()" class="p-4 bg-white/10 border border-white/20 rounded-xl font-bold hover:bg-white/20">${p.name}</button>`).join('')}</div><button onclick="startNeverGame()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุชุฎุทู (ุจุฏูู ููุงุท)</button></div>`; } }

        // --- DEBATE ---
        function startDebateGame() { if (state.players.length < 2) { alert("ูุญุชุงุฌูู ูุงุนุจูู ุนูู ุงูุฃูู!"); return; } const topic = getUniqueItem('debate', DEBATE_DATA); const p1 = getFairPlayer(); let p2 = state.players[Math.floor(Math.random() * state.players.length)]; while (p2.id === p1.id) p2 = state.players[Math.floor(Math.random() * state.players.length)]; state.currentGame = { type: 'debate', phase: 'assign', topic, p1, p2, timeLeft: 60, revealed: false }; playSound('click'); render(); }
        function startDebateRound() { state.currentGame.phase = 'playing'; state.currentGame.revealed = true; playSound('click'); saveState(); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'voting'; playSound('fail'); saveState(); render(); } else if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function endDebateEarly() { if (gameInterval) clearInterval(gameInterval); state.currentGame.phase = 'voting'; playSound('fail'); saveState(); render(); }
        function debateVote(winnerId) { updateScore(winnerId, false, 1); state.currentGame.phase = 'result'; saveState(); render(); }
        function renderDebateSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'debate') return renderGameStartScreen('ูุญููุฉ', 'ููุถูุน ุฌุฏูู ุชุงูู ููุทูุน. ุงููุนุจุฉ ูุชุฎุชุงุฑ "ูุญุงูู" ู "ููุงุจุฉ". ูู ูุงุญุฏ ูุนุงู ุฏูููุฉ ูููุน ุงููุนุฏุฉ ุจูุฌูุฉ ูุธุฑู!', 'โ๏ธ', 'ุงุจุฏุฃ ุงูุฌูุณุฉ', 'startDebateGame()', 'bg-amber-700'); 
            const game = state.currentGame; 
            if (game.phase === 'assign') { 
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-800 text-white text-center animate-in"><h2 class="text-3xl font-bold mb-8">ุฃุทุฑุงู ุงููุถูุฉ</h2><div class="w-full bg-white/10 p-4 rounded-xl mb-4 border-r-4 border-green-400"><p class="text-sm opacity-75">ูุน ุงูููุถูุน (ุฏูุงุน)</p><h1 class="text-2xl font-black">${game.p1.name}</h1></div><div class="text-2xl font-bold mb-4">VS</div><div class="w-full bg-white/10 p-4 rounded-xl mb-8 border-r-4 border-red-400"><p class="text-sm opacity-75">ุถุฏ ุงูููุถูุน (ููุงุจุฉ)</p><h1 class="text-2xl font-black">${game.p2.name}</h1></div><button onclick="startDebateRound()" class="w-full py-4 bg-white text-amber-900 rounded-xl font-bold text-xl shadow-xl">ุงูุดู ุงููุถูุฉ ูุงุจุฏุฃ</button></div>`; 
            } 
            if (game.phase === 'playing') { 
                return `<div class="h-screen flex flex-col p-6 bg-white animate-in"><div class="text-center mt-4 mb-4"><p class="text-lg font-bold opacity-80">ุงููุถูุฉ ุฑูู #99</p></div><div class="bg-amber-50 p-6 rounded-2xl border-2 border-amber-100 w-full text-center mb-6 shadow-sm"><h1 class="text-3xl font-black leading-relaxed text-center text-slate-800">${game.topic}</h1></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-9xl font-black text-amber-600" id="game-timer">${game.timeLeft}</div></div><div class="flex justify-between gap-4 mt-auto mb-4"><div class="text-center w-1/2"><div class="font-bold text-green-600 mb-1">ูุน</div><div class="p-2 bg-green-50 rounded-lg font-bold text-sm">${game.p1.name}</div></div><div class="text-center w-1/2"><div class="font-bold text-red-600 mb-1">ุถุฏ</div><div class="p-2 bg-red-50 rounded-lg font-bold text-sm">${game.p2.name}</div></div></div><button onclick="endDebateEarly()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold text-lg shadow-lg">ุฅููุงุก ุงูุฌูุณุฉ ููุฑุงู</button></div>`; 
            } 
            if (game.phase === 'voting') { 
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-900 text-white text-center animate-in"><div class="text-6xl mb-6">๐จโโ๏ธ</div><h2 class="text-3xl font-bold mb-8">ุญูู ุงููุญููุฉ!</h2><p class="text-lg opacity-80 mb-6">ููู ุฃููุนูู ุฃูุชุฑุ</p><div class="w-full space-y-4"><button onclick="debateVote(${game.p1.id})" class="w-full py-4 bg-green-600 text-white rounded-xl font-bold text-xl shadow-lg hover:bg-green-700">${game.p1.name} (ูุน)</button><button onclick="debateVote(${game.p2.id})" class="w-full py-4 bg-red-600 text-white rounded-xl font-bold text-xl shadow-lg hover:bg-red-700">${game.p2.name} (ุถุฏ)</button></div></div>`; 
            } 
            if (game.phase === 'result') { 
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-amber-900 text-white text-center"><h2 class="text-3xl font-bold mb-4">ุชู ุงูุญูู!</h2><p class="mb-8">ุชู ุฅุถุงูุฉ ุงูููุทุฉ ูููุงุฆุฒ.</p><button onclick="startDebateGame()" class="w-full py-4 bg-amber-600 rounded-xl font-bold text-xl mb-3">ูุถูุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
            } 
        }

        // --- HEADS UP (FIXED) ---
        function startHeadsUpGame(category) {
            const words = HEADS_UP_DATA[category];
            const player = getFairPlayer();
            state.currentGame = {
                type: 'heads_up',
                phase: 'ready_check',
                category: category,
                pool: [...words],
                currentWord: null,
                score: 0,
                timeLeft: 60,
                skipped: 0,
                currentPlayer: player,
                wordHidden: true
            };
            playSound('click');
            saveState();
            render();
        }

        function headsUpReady() {
            const words = state.currentGame.pool;
            state.currentGame.currentWord = words[Math.floor(Math.random() * words.length)];
            state.currentGame.phase = 'playing';
            state.currentGame.wordHidden = true;
            playSound('click');
            render();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                state.currentGame.timeLeft--;
                const t = document.getElementById('hu-timer');
                if(t) t.innerText = state.currentGame.timeLeft;
                if (state.currentGame.timeLeft <= 0) {
                    clearInterval(gameInterval);
                    updateScore(state.currentGame.currentPlayer.id, false, state.currentGame.score);
                    state.currentGame.phase = 'result';
                    playSound('fail');
                    saveState();
                    render();
                } else if (state.currentGame.timeLeft <= 10) playSound('tick');
            }, 1000);
        }

        function revealHeadsUpWord() {
            state.currentGame.wordHidden = false;
            playSound('click');
            render();
        }

        function headsUpCorrect() {
            state.currentGame.score++;
            playSound('success');
            headsUpNextWord();
        }

        function headsUpPass() {
            state.currentGame.skipped++;
            playSound('fail');
            headsUpNextWord();
        }

        function headsUpNextWord() {
            const words = state.currentGame.pool;
            state.currentGame.currentWord = words[Math.floor(Math.random() * words.length)];
            state.currentGame.wordHidden = true;
            saveState();
            render();
        }

        function renderHeadsUpSetup() {
            if (!state.currentGame || state.currentGame.type !== 'heads_up') {
                const categories = Object.keys(HEADS_UP_DATA);
                return `
                    <div class="p-6 h-screen flex flex-col bg-blue-50">
                        ${header('๐คฏ ุนูู ุฑุงุณู', 'home')}
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">๐คฏ</div>
                            <h3 class="font-bold text-blue-800 mb-2">ุงุฎุชุงุฑ ุงููุณู:</h3>
                        </div>
                        <div class="grid grid-cols-2 gap-3 flex-1 overflow-y-auto content-start">
                            ${categories.map(cat => `
                                <button onclick="startHeadsUpGame('${cat}')" class="p-4 rounded-xl font-bold bg-white border-2 border-blue-100 text-blue-600 hover:bg-blue-600 hover:text-white transition shadow-sm">
                                    ${cat}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            const game = state.currentGame;

            if (game.phase === 'ready_check') {
                return `
                    <div class="h-screen flex flex-col items-center justify-center p-6 bg-blue-600 text-white text-center animate-in">
                        <p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p>
                        <h1 class="text-5xl font-black mb-10 text-yellow-300">${game.currentPlayer.name}</h1>
                        <div class="bg-white/10 p-6 rounded-2xl mb-8 border border-white/20">
                            <p class="text-lg">ุญุท ุงูููุจุงูู ุนูู ุฌุจูุชู ๐ฒ</p>
                            <p class="text-sm opacity-75 mt-2">ุฎูู ุงูุดุงุดุฉ ูุงุญูุฉ ุตุญุงุจู</p>
                        </div>
                        <button onclick="headsUpReady()" class="w-full py-4 bg-white text-blue-700 rounded-xl font-bold text-2xl shadow-xl">
                            ุฌุงูุฒ! ุงุจุฏุฃ
                        </button>
                    </div>
                `;
            }

            if (game.phase === 'playing') {
                return `
                    <div class="h-screen flex flex-col p-4 bg-blue-600">
                        <!-- Header -->
                        <div class="flex justify-between items-center mb-4 text-white">
                            <div class="font-bold text-lg">${game.currentPlayer.name}</div>
                            <div class="text-4xl font-black text-yellow-300" id="hu-timer">${game.timeLeft}</div>
                            <button onclick="goHome()" class="bg-red-500/80 px-4 py-1 rounded-lg text-sm">ุฅููุงุก</button>
                        </div>

                        <!-- Main Card Area -->
                        <div class="flex-1 flex items-center justify-center relative mb-4">
                            <div onclick="revealHeadsUpWord()" class="w-full h-full bg-white rounded-3xl shadow-2xl flex items-center justify-center cursor-pointer relative overflow-hidden">
                                ${game.wordHidden ? `
                                    <div class="text-center animate-pulse">
                                        <div class="text-8xl text-blue-200 font-black mb-4">?</div>
                                        <p class="text-blue-500 font-bold text-xl">ุฏูุณ ุนุดุงู ุชุธูุฑ ุงููููุฉ</p>
                                    </div>
                                ` : `
                                    <!-- Rotated Text Container -->
                                    <div class="rotate-90-text text-center w-[200vh]">
                                        <h1 class="text-6xl md:text-8xl font-black text-slate-800 leading-tight">
                                            ${game.currentWord}
                                        </h1>
                                    </div>
                                `}
                            </div>
                        </div>

                        <!-- Controls (Standard Buttons) -->
                        <div class="grid grid-cols-2 gap-4 h-24">
                            <button onclick="headsUpPass()" class="bg-red-500 hover:bg-red-600 text-white rounded-2xl text-xl font-bold flex flex-col items-center justify-center shadow-lg active:scale-95 transition">
                                <span>โ</span>
                                <span>ุชุฎุทู</span>
                            </button>
                            <button onclick="headsUpCorrect()" class="bg-green-500 hover:bg-green-600 text-white rounded-2xl text-xl font-bold flex flex-col items-center justify-center shadow-lg active:scale-95 transition">
                                <span>โ</span>
                                <span>ุนุฑููุง</span>
                            </button>
                        </div>
                    </div>
                `;
            }

            if (game.phase === 'result') {
                return `
                    <div class="h-screen flex flex-col items-center justify-center p-6 bg-blue-900 text-white text-center animate-in">
                        <h2 class="text-3xl font-bold mb-2">ุฎูุต ุงูููุช!</h2>
                        <h1 class="text-4xl font-black text-yellow-300 mb-6">${game.currentPlayer.name}</h1>
                        
                        <div class="grid grid-cols-2 gap-4 w-full mb-8">
                            <div class="bg-green-500/20 p-4 rounded-xl border border-green-500/50">
                                <div class="text-4xl font-black text-green-400">${game.score}</div>
                                <div class="text-sm opacity-80">ุฅุฌุงุจุฉ ุตุญ</div>
                            </div>
                            <div class="bg-red-500/20 p-4 rounded-xl border border-red-500/50">
                                <div class="text-4xl font-black text-red-400">${game.skipped}</div>
                                <div class="text-sm opacity-80">ุชุฎุทู</div>
                            </div>
                        </div>

                        <button onclick="navigate('home')" class="w-full py-4 bg-yellow-500 text-blue-900 rounded-xl font-bold text-xl shadow-lg mb-3">
                            ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
                        </button>
                        
                        <button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุฎุฑูุฌ</button>
                    </div>
                `;
            }
        }

        // ================== OTHER GAMES ==================
        function startEmojiGame(category) {
            const categoryData = EMOJI_QUIZ_DATA[category] || EMOJI_QUIZ_DATA['ุฃููุงู ุนุฑุจู'];
            const roundData = getUniqueItem('emoji_' + category, categoryData);
            state.currentGame = { type: 'emoji', phase: 'playing', category, data: roundData, revealed: false }; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function revealEmojiAnswer() { state.currentGame.revealed = true; playSound('click'); saveState(); render(); }
        function emojiPlayerWins(playerId) { 
            updateScore(playerId, false, 1); 
            startEmojiGame(state.currentGame.category); 
        }
        function emojiSkip() { 
            startEmojiGame(state.currentGame.category); 
        }
        function renderEmojiSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'emoji') {
                const categories = Object.keys(EMOJI_QUIZ_DATA);
                return `
                    <div class="p-6 h-screen flex flex-col bg-yellow-50">
                        ${header('๐งฉ ูู ุงูุฅูููุฌู', 'home')}
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">๐งฉ</div>
                            <h3 class="font-bold text-yellow-800 mb-2">ุงุฎุชุงุฑ ุงููุฆุฉ:</h3>
                        </div>
                        <div class="grid grid-cols-2 gap-4 flex-1 overflow-y-auto content-start">
                            ${categories.map(cat => `
                                <button onclick="startEmojiGame('${cat}')" class="py-6 rounded-2xl font-black text-xl shadow-md border-b-4 bg-white border-yellow-500 text-yellow-600 hover:bg-yellow-50 transition active:scale-95">
                                    ${cat}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            const game = state.currentGame; 
            return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-yellow-500 text-white text-center animate-in"><div class="bg-white p-8 rounded-3xl shadow-xl w-full mb-8"><div class="text-6xl mb-4 leading-relaxed">${game.data.emojis}</div></div>${!game.revealed ? `<button onclick="revealEmojiAnswer()" class="w-full py-4 bg-slate-800 text-white rounded-xl font-bold text-xl shadow-lg">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button>` : `<div class="mb-8 animate-in w-full"><p class="text-lg text-yellow-900 opacity-80 mb-2">ุงูุฅุฌุงุจุฉ:</p><h2 class="text-4xl font-black text-yellow-900">${game.data.answer}</h2></div><p class="text-lg text-yellow-900 font-bold mb-4">ููู ุงููู ุนุฑู ุงูุญูุ</p><div class="grid grid-cols-2 gap-3 w-full mb-4">${state.players.map(p => `<button onclick="emojiPlayerWins(${p.id})" class="py-3 bg-white text-yellow-600 rounded-xl font-bold text-lg shadow-lg hover:bg-yellow-50">${p.name}</button>`).join('')}</div><button onclick="emojiSkip()" class="w-full py-3 bg-slate-500 text-white rounded-xl font-bold mb-3">ูุญุฏุด ุนุฑู (ุชุฎุทู)</button><button onclick="goHome()" class="w-full py-3 bg-yellow-700 text-white rounded-xl font-bold">ุฎุฑูุฌ</button>`}</div>`; 
        }
        function startLyricsGame() { 
            const roundData = getUniqueItem('lyrics', LYRICS_DATA);
            const player = getFairPlayer(); 
            state.currentGame = { type: 'lyrics', phase: 'playing', data: roundData, player, lyricsRevealed: false, answerRevealed: false }; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function revealLyricsText() { 
            state.currentGame.lyricsRevealed = true; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function revealLyricsAnswer() { 
            state.currentGame.answerRevealed = true; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function lyricsPlayerWins(playerId) { 
            updateScore(playerId, false, 1); 
            startLyricsGame(); 
        }
        function lyricsSkip() { 
            startLyricsGame(); 
        }
        function renderLyricsSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'lyrics') return renderGameStartScreen('ููู ุงูุฃุบููุฉ', 'ููุธูุฑ ููุทุน ูู ุฃุบููุฉ ูููู ูููุฉ ูุงูุตุฉ. ููููุง ูุบูููุง ุตุญ!', '๐ค', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startLyricsGame()', 'bg-purple-500'); 
            const game = state.currentGame; 
            if (!game.lyricsRevealed) {
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><p class="mb-4 opacity-80 font-bold">${game.data.singer}</p><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30 relative overflow-hidden"><div class="absolute inset-0 bg-purple-800 blur-md flex items-center justify-center"><span class="text-4xl font-black opacity-50">๐ต</span></div><h2 class="text-2xl font-bold leading-relaxed mb-2 relative z-10" style="filter: blur(8px); user-select: none;">"${game.data.part}"</h2><div class="inline-block px-6 py-2 bg-black/20 rounded-lg mt-2 text-yellow-300 font-black text-2xl relative z-10" style="filter: blur(8px);">${game.data.answer}</div></div><button onclick="revealLyricsText()" class="w-full py-4 bg-white text-purple-700 rounded-xl font-bold text-xl shadow-lg">ูุดู ุงููููุงุช</button></div>`;
            }
            if (!game.answerRevealed) {
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><p class="mb-4 opacity-80 font-bold">${game.data.singer}</p><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h2 class="text-2xl font-bold leading-relaxed mb-2">"${game.data.part}"</h2><div class="inline-block px-6 py-2 bg-black/20 rounded-lg mt-2 text-yellow-300 font-black text-2xl">ุุุุุ</div></div><button onclick="revealLyricsAnswer()" class="w-full py-4 bg-white text-purple-700 rounded-xl font-bold text-xl shadow-lg">ูุดู ุงููููุฉ</button></div>`;
            }
            return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><p class="mb-4 opacity-80 font-bold">${game.data.singer}</p><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h2 class="text-2xl font-bold leading-relaxed mb-2">"${game.data.part}"</h2><div class="inline-block px-6 py-2 bg-black/20 rounded-lg mt-2 text-yellow-300 font-black text-2xl">${game.data.answer}</div></div><p class="text-lg text-purple-100 font-bold mb-4">ููู ุงููู ุนุฑู ุงูุญูุ</p><div class="grid grid-cols-2 gap-3 w-full mb-4">${state.players.map(p => `<button onclick="lyricsPlayerWins(${p.id})" class="py-3 bg-white text-purple-700 rounded-xl font-bold text-lg shadow-lg hover:bg-purple-50">${p.name}</button>`).join('')}</div><button onclick="lyricsSkip()" class="w-full py-3 bg-slate-500 text-white rounded-xl font-bold mb-3">ูุญุฏุด ุนุฑู (ุชุฎุทู)</button><button onclick="goHome()" class="w-full py-3 bg-purple-800 text-white rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
        }

        // --- UNSCRAMBLE ---
        function scrambleWord(word) {
            const letters = word.split('');
            // Fisher-Yates shuffle
            for (let i = letters.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]];
            }
            return letters.join('');
        }
        function startUnscrambleGame() {
            const item = getUniqueItem('unscramble', SCRAMBLE_DATA);
            const scrambled = scrambleWord(item.word);
            const player = getFairPlayer();
            state.currentGame = { type: 'unscramble', phase: 'playing', category: item.category, word: item.word, scrambled, player, revealed: false };
            playSound('click');
            saveState();
            render();
        }
        function revealUnscrambleAnswer() {
            state.currentGame.revealed = true;
            playSound('click');
            render();
        }
        function unscramblePlayerWins(playerId) {
            updateScore(playerId, false, 1);
            startUnscrambleGame();
        }
        function unscrambleSkip() {
            startUnscrambleGame();
        }
        function renderUnscrambleSetup() {
            if (!state.currentGame || state.currentGame.type !== 'unscramble') return renderGameStartScreen('ุฑุชุจูุง ุตุญ', 'ูููุฉ ุญุฑูููุง ูุชูุฎุจุทุฉ ุจูุงุกู ุนูู ูุฆุฉ ูุนููุฉ. ุญุงูู ุชุนุฑู ุงููููุฉ ูุชุฑุชุจูุง ุตุญ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startUnscrambleGame()', 'bg-green-600');
            const game = state.currentGame;
            if (!game.revealed) {
                return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-green-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="bg-white/20 p-6 rounded-2xl mb-6 w-full"><p class="text-sm opacity-75 mb-2">ุงููุฆุฉ:</p><h3 class="text-2xl font-bold text-yellow-300">${game.category}</h3></div><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h1 class="text-5xl font-black text-yellow-300 tracking-widest">${game.scrambled}</h1></div><button onclick="revealUnscrambleAnswer()" class="w-full py-4 bg-white text-green-700 rounded-xl font-bold text-xl shadow-lg">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button></div>`;
            }
            return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-green-600 text-white text-center animate-in"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="bg-white/20 p-6 rounded-2xl mb-6 w-full"><p class="text-sm opacity-75 mb-2">ุงููุฆุฉ:</p><h3 class="text-2xl font-bold text-yellow-300">${game.category}</h3></div><div class="bg-white/20 p-8 rounded-3xl w-full mb-8 backdrop-blur-sm border border-white/30"><h1 class="text-5xl font-black text-yellow-300 tracking-widest mb-4">${game.scrambled}</h1><div class="border-t border-white/30 pt-4"><p class="text-sm opacity-75 mb-2">ุงูุฅุฌุงุจุฉ:</p><h2 class="text-4xl font-black text-green-200">${game.word}</h2></div></div><p class="text-lg text-green-100 font-bold mb-4">ููู ุงููู ุนุฑู ุงูุญูุ</p><div class="grid grid-cols-2 gap-3 w-full mb-4">${state.players.map(p => `<button onclick="unscramblePlayerWins(${p.id})" class="py-3 bg-white text-green-700 rounded-xl font-bold text-lg shadow-lg hover:bg-green-50">${p.name}</button>`).join('')}</div><button onclick="unscrambleSkip()" class="w-full py-3 bg-slate-500 text-white rounded-xl font-bold mb-3">ูุญุฏุด ุนุฑู (ุชุฎุทู)</button><button onclick="goHome()" class="w-full py-3 bg-green-800 text-white rounded-xl font-bold">ุฎุฑูุฌ</button></div>`;
        }

        // --- SPY ---
        function startSpyGame(cat) { const words = SPY_CATEGORIES[cat] || SPY_CATEGORIES['ุฃูุงูู ุฎุฑูุฌ']; const word = getUniqueItem('spy_' + cat, words); const spyIndex = Math.floor(Math.random() * state.players.length); state.currentGame = { type: 'spy', phase: 'reveal', category: cat, word, spyIndex, currentPlayerIndex: 0, revealed: false, timeLeft: 120, votes: {}, votingPlayerIndex: 0 }; saveState(); render(); }
        function revealSpyWord() { state.currentGame.revealed = true; saveState(); render(); }
        function nextSpyPlayer() { if(!state.currentGame.revealed) state.currentGame.revealed = true; else if(state.currentGame.currentPlayerIndex < state.players.length - 1) { state.currentGame.currentPlayerIndex++; state.currentGame.revealed = false; } else { state.currentGame.phase = 'discuss'; startSpyTimer(); } render(); }
        function startSpyTimer() { if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); startSpyVoting(); } if (state.currentGame.timeLeft <= 10) playSound('tick'); saveState(); render(); }, 1000); }
        function startSpyVoting() {
            if (gameInterval) clearInterval(gameInterval);
            state.currentGame.phase = 'voting';
            state.currentGame.votingPlayerIndex = 0;
            playSound('fail');
            saveState();
            render();
        }
        function voteForSpy(suspectedPlayerId) {
            const voter = state.players[state.currentGame.votingPlayerIndex];
            state.currentGame.votes[voter.id] = suspectedPlayerId;
            if (state.currentGame.votingPlayerIndex < state.players.length - 1) {
                state.currentGame.votingPlayerIndex++;
                playSound('click');
                render();
            } else {
                // Calculate results
                const spyId = state.players[state.currentGame.spyIndex].id;
                const voteCounts = {};
                Object.values(state.currentGame.votes).forEach(votedId => {
                    voteCounts[votedId] = (voteCounts[votedId] || 0) + 1;
                });
                
                let spyFound = false;
                if (Object.keys(voteCounts).length > 0) {
                    const maxVotes = Math.max(...Object.values(voteCounts));
                    const mostVoted = Object.keys(voteCounts).find(id => voteCounts[id] === maxVotes);
                    if (mostVoted) {
                        spyFound = parseInt(mostVoted) === spyId;
                    }
                }
                
                if (spyFound) {
                    // All players except spy get +1
                    state.players.forEach(p => {
                        if (p.id !== spyId) updateScore(p.id, false, 1);
                    });
                } else {
                    // Spy gets +2
                    updateScore(spyId, false, 2);
                }
                
                state.currentGame.spyFound = spyFound;
                state.currentGame.phase = 'result';
                playSound(spyFound ? 'success' : 'fail');
                saveState();
                render();
            }
        }
        function restartSpyGame() { startSpyGame(state.currentGame.category); }
        function renderSpySetup() { 
            if(!state.currentGame || state.currentGame.type !== 'spy') return `<div class="p-6 h-screen flex flex-col">${header('๐ต๏ธ ุงูุฌุงุณูุณ', 'home')}<div class="grid grid-cols-2 gap-3 max-h-[70vh] overflow-y-auto pb-4">${Object.keys(SPY_CATEGORIES).map(c => `<button onclick="startSpyGame('${c}')" class="p-3 bg-white rounded shadow font-bold text-indigo-700 hover:bg-indigo-50">${c}</button>`).join('')}</div></div>`; 
            const game = state.currentGame;
            if(game.phase === 'reveal') { 
                const p = state.players[game.currentPlayerIndex]; 
                return `<div class="h-screen flex flex-col items-center justify-center bg-indigo-900 text-white p-6"><h1 class="text-3xl mb-8">${p.name}</h1><button onclick="revealSpyWord()" class="bg-indigo-700 p-8 rounded-xl mb-4 w-full h-48 flex items-center justify-center text-2xl font-bold border-4 border-indigo-500 shadow-2xl">${game.revealed ? (game.spyIndex === game.currentPlayerIndex ? '<div class="text-center"><div class="text-4xl mb-2">๐ต๏ธ</div><div>ุฃูุช ุงูุฌุงุณูุณ</div></div>' : `<div class="text-center"><div class="text-2xl mb-2">${game.word}</div></div>`) : 'ุฏูุณ ูููุดู'}</button><button onclick="nextSpyPlayer()" class="w-full bg-yellow-500 text-black py-4 rounded-xl font-bold">ุงูุชุงูู</button></div>`; 
            } 
            if(game.phase === 'discuss') {
                return `<div class="h-screen flex flex-col p-6 bg-white"><h1 class="text-2xl font-bold text-center mt-10">ูุงูุดูุง ูุงุนุฑููุง ุงูุฌุงุณูุณ!</h1><div class="text-6xl text-center mt-8 font-black text-indigo-600">${getTimer(game.timeLeft)}</div><button onclick="startSpyVoting()" class="mt-auto bg-red-600 text-white py-4 rounded-xl font-bold">ุงุจุฏุฃ ุงูุชุตููุช</button></div>`;
            } 
            if(game.phase === 'voting') {
                const voter = state.players[game.votingPlayerIndex];
                return `<div class="h-screen flex flex-col items-center justify-center bg-indigo-900 text-white p-6"><h1 class="text-3xl mb-4">${voter.name}</h1><p class="text-xl opacity-80 mb-8">ููู ุงูุฌุงุณูุณ ูู ุฑุฃููุ</p><div class="grid grid-cols-2 gap-3 w-full max-h-[60vh] overflow-y-auto">${state.players.map(p => `<button onclick="voteForSpy(${p.id})" class="py-4 bg-indigo-700 rounded-xl font-bold text-lg hover:bg-indigo-600 transition border-2 border-indigo-500">${p.name}</button>`).join('')}</div></div>`;
            }
            return `<div class="h-screen flex flex-col items-center justify-center bg-slate-900 text-white p-6 text-center"><div class="text-6xl mb-6">${game.spyFound ? '๐' : '๐ต๏ธ'}</div><h1 class="text-4xl mb-4 font-bold ${game.spyFound ? 'text-green-400' : 'text-red-400'}">${game.spyFound ? 'ุนุฑููุง ุงูุฌุงุณูุณ!' : 'ุงูุฌุงุณูุณ ููุช!'}</h1><div class="bg-white/10 p-6 rounded-2xl mb-6 w-full"><p class="text-xl mb-2">ุงูุฌุงุณูุณ ูุงู:</p><h2 class="text-3xl font-black text-yellow-300">${state.players[game.spyIndex].name}</h2><p class="text-lg mt-4 opacity-80">ุงููููุฉ: ${game.word}</p></div><div class="mb-6"><p class="text-lg opacity-80">${game.spyFound ? 'ูู ุงููุงุนุจูู (ูุงุนุฏุง ุงูุฌุงุณูุณ) ุฃุฎุฐูุง +1 ููุทุฉ' : 'ุงูุฌุงุณูุณ ุฃุฎุฐ +2 ููุทุฉ'}</p></div><button onclick="restartSpyGame()" class="w-full py-4 bg-indigo-600 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; 
        }

        // --- CHARADES ---
        function startCharadesGame(cat) { const words = CHARADES_DATA[cat]; const word = getUniqueItem('charades_' + cat, words); const actor = getFairPlayer(); state.currentGame = { type: 'charades', phase: 'prepare', category: cat, word, actor, revealed: false, timeLeft: 60 }; playSound('click'); render(); }
        function startCharadesRound() { state.currentGame.phase = 'acting'; playSound('click'); saveState(); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = getTimer(state.currentGame.timeLeft); if(state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); charadesFail(); return; } if(state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function charadesSuccess() { updateScore(state.currentGame.actor.id, false, 1); startCharadesGame(state.currentGame.category); }
        function charadesFail() { if(state.daresEnabled) showDare(); startCharadesGame(state.currentGame.category); }
        function renderCharadesSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'charades') { 
                const categories = Object.keys(CHARADES_DATA); 
                return `
                    <div class="p-6 h-screen flex flex-col bg-rose-50">
                        ${header('๐ญ ุจุฏูู ููุงู', 'home')}
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">๐ญ</div>
                            <h3 class="font-bold text-rose-800 mb-2">ุงุฎุชุงุฑ ุงููุฆุฉ:</h3>
                        </div>
                        <div class="grid grid-cols-2 gap-4 flex-1 overflow-y-auto content-start">
                            ${categories.map(cat => `
                                <button onclick="startCharadesGame('${cat}')" class="py-6 rounded-2xl font-black text-xl shadow-md border-b-4 bg-white border-rose-500 text-rose-600 hover:bg-rose-50 transition active:scale-95">
                                    ${cat}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `; 
            } 
            const game = state.currentGame; 
            if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-rose-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.actor.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-rose-800 z-10 flex items-center justify-center cursor-pointer hover:bg-rose-700 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงููููุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ูุทููุจ ุชูุซูู:</p><h2 class="text-3xl font-bold text-yellow-300">${game.word}</h2></div><button onclick="startCharadesRound()" class="w-full py-4 bg-white text-rose-700 rounded-xl font-bold text-xl">ุฌุงูุฒ! ุงุจุฏุฃ ุงููุคูุช</button></div>`; 
            if (game.phase === 'acting') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-4 mb-8"><p class="text-lg font-bold opacity-80">ุงูููุซู: <span class="text-rose-600">${game.actor.name}</span></p><h1 class="text-3xl font-black leading-relaxed text-center text-slate-800 mt-2">${game.word}</h1></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-8xl font-black text-rose-600" id="game-timer">${getTimer(game.timeLeft)}</div></div><div class="space-y-3"><button onclick="charadesSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุนุฑูููุง!</button><button onclick="charadesFail()" class="w-full py-3 bg-slate-200 text-slate-600 rounded-xl font-bold">ูุนุฑููุด (ุชุฎุทู)</button></div></div>`; 
        }

        // --- QUOTES ---
        function startQuotesGame() { const quote = getUniqueItem('quotes', QUOTES_DATA); const reader = getFairPlayer(); state.currentGame = { type: 'quotes', phase: 'play', quote, reader, revealed: false }; playSound('click'); render(); }
        function revealQuoteAnswer() { state.currentGame.phase = 'answer'; playSound('click'); render(); }
        function quotePlayerWins(pid) { updateScore(pid, false, 1); startQuotesGame(); }
        function nextQuoteRound() { startQuotesGame(); }
        function renderQuotesSetup() { if (!state.currentGame || state.currentGame.type !== 'quotes') return renderGameStartScreen('ุงูุงูููุงุช', 'ูุงุญุฏ ูููุฑุฃ ุงูุงูููุ ูุงูุจุงูู ูุงุฒู ูุฎูู ุงุณู ุงููููู/ุงููุณุฑุญูุฉ ูุงูููุซู.', '๐ฌ', 'ุงุจุฏุฃ ุงููุนุจ', 'startQuotesGame()', 'bg-emerald-600'); const game = state.currentGame; if (game.phase === 'play') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-emerald-700 text-white text-center animate-in"><p class="text-emerald-200 mb-2">ุงูุฏูุฑ ุนูู: <span class="font-bold text-white text-lg">${game.reader.name}</span></p><div class="text-sm bg-black/20 px-3 py-1 rounded-full mb-8">ุงูุฑุฃ ุงูุงููู ุจุตูุช ุนุงูู</div><div class="relative mb-10 w-full">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-emerald-800 z-10 rounded-xl flex items-center justify-center cursor-pointer hover:bg-emerald-900 transition h-32"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงูุงููู</span></div>` : `<div class="text-6xl absolute -top-8 -right-4 text-emerald-400 opacity-50">"</div><h2 class="text-3xl font-black leading-relaxed px-4">${game.quote.quote}</h2><div class="text-6xl absolute -bottom-12 -left-4 text-emerald-400 opacity-50">"</div>`}</div>${game.revealed ? `<button onclick="revealQuoteAnswer()" class="w-full py-4 bg-white text-emerald-800 rounded-xl font-bold text-xl shadow-lg mt-8">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button>` : ''}</div>`; if (game.phase === 'answer') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-8 mb-8 border-b-2 border-slate-100 pb-8"><h2 class="text-slate-500 mb-2">ุงูุงููู ูุงู:</h2><p class="text-xl font-bold text-slate-800 mb-6">"${game.quote.quote}"</p><div class="space-y-2"><div class="inline-block px-4 py-2 bg-emerald-100 text-emerald-800 rounded-lg font-bold mx-1">๐ฌ ${game.quote.work}</div><div class="inline-block px-4 py-2 bg-amber-100 text-amber-800 rounded-lg font-bold mx-1">๐ค ${game.quote.actor}</div></div></div><h3 class="text-center font-bold text-slate-700 mb-4">ููู ุนุฑููุงุ</h3><div class="grid grid-cols-2 gap-3 flex-1 overflow-y-auto pb-4">${state.players.map(p => `<button onclick="quotePlayerWins(${p.id})" class="p-3 bg-slate-50 border border-slate-200 rounded-lg font-semibold text-slate-700 hover:bg-emerald-50 ${p.id === game.reader.id ? 'opacity-75' : ''}">${p.name}${p.id === game.reader.id ? ' (ุงููุงุฑุฆ)' : ''}</button>`).join('')}</div><div class="mt-4 space-y-2"><button onclick="nextQuoteRound()" class="w-full py-3 bg-slate-800 text-white rounded-xl font-bold">ูุญุฏุด ุนุฑู (ุงูุชุงูู)</button></div></div>`; }

        // --- FIVE SECOND ---
        function startFiveSecondGame() { const question = getUniqueItem('five_second', FIVE_SECOND_QUESTIONS); const player = getFairPlayer(); state.currentGame = { type: 'fivesecond', phase: 'prepare', question, player, revealed: false, timeLeft: 5 }; playSound('click'); render(); }
        function startFiveSecondRound() { state.currentGame.phase = 'playing'; playSound('click'); saveState(); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); fiveSecondFail(); return; } if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function fiveSecondSuccess() { updateScore(state.currentGame.player.id, false, 1); startFiveSecondGame(); }
        function fiveSecondFail() { if(state.daresEnabled) showDare(); startFiveSecondGame(); }
        function renderFiveSecondSetup() { 
            if (!state.currentGame || state.currentGame.type !== 'fivesecond') return renderGameStartScreen('ุฎูุณุฉ ุนููู', 'ุงุฐูุฑ ูฃ ุฃุดูุงุก ูู ูฅ ุซูุงูู. ูู ูุฌุญุช ุชุงุฎุฏ ููุทุฉุ ูู ูุดูุช.. ูุง ูููู!', 'โฑ๏ธ', 'ุงุจุฏุฃ ุฃูู ุฌููุฉ', 'startFiveSecondGame()', 'bg-teal-600'); 
            const game = state.currentGame; 
            if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-teal-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-teal-800 z-10 flex items-center justify-center cursor-pointer hover:bg-teal-700 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงูุณุคุงู</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ูุทููุจ ุงูุฅุฌุงุจุฉ ุนูู:</p><h2 class="text-3xl font-bold text-yellow-300">${game.question.text}</h2></div><button onclick="startFiveSecondRound()" class="w-full py-4 bg-white text-teal-700 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุฌุงูุฒ! ุงุจุฏุฃ ุงูุฌููุฉ</button></div>`; 
            if (game.phase === 'playing') return `<div class="h-screen flex flex-col p-6 bg-white"><div class="text-center mt-4 mb-8"><p class="text-lg font-bold opacity-80">ุงููุงุนุจ: <span class="text-teal-600">${game.player.name}</span></p><h1 class="text-3xl font-black leading-relaxed text-center text-slate-800 mt-2">${game.question.text}</h1></div><div class="flex-1 flex flex-col justify-center items-center"><div class="text-9xl font-black ${game.timeLeft <= 2 ? 'text-red-600 animate-pulse' : 'text-teal-600'}" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3"><button onclick="fiveSecondSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg">โ ุฃุญุณูุช! (ุฃุฌุงุจ ุตุญ)</button><button onclick="fiveSecondFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold shadow-lg">๐ ูุดู! (ุนููุจุฉ)</button></div></div>`; 
        }

        // --- BUS ---
        function startBusGame() { 
            const arabicLetters = ['ุฃ', 'ุจ', 'ุช', 'ุซ', 'ุฌ', 'ุญ', 'ุฎ', 'ุฏ', 'ุฐ', 'ุฑ', 'ุฒ', 'ุณ', 'ุด', 'ุต', 'ุถ', 'ุท', 'ุน', 'ุบ', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู']; 
            const category = getUniqueItem('bus_categories', BUS_CATEGORIES);
            const letter = arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
            
            state.currentGame = { type: 'bus', phase: 'ready', category, letter, playerIndex: 0, results: [], timeLeft: 10, lastCategory: category.name, lastLetter: letter }; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function startBusTimerNow() { state.currentGame.phase = 'playing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); busPlayerFail(); return; } if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function generateNewBusRound() {
            const arabicLetters = ['ุฃ', 'ุจ', 'ุช', 'ุซ', 'ุฌ', 'ุญ', 'ุฎ', 'ุฏ', 'ุฐ', 'ุฑ', 'ุฒ', 'ุณ', 'ุด', 'ุต', 'ุถ', 'ุท', 'ุน', 'ุบ', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู'];
            const lastCategory = state.currentGame.lastCategory;
            const lastLetter = state.currentGame.lastLetter;
            const currentPlayer = state.players[state.currentGame.playerIndex];
            
            let category, letter;
            // If not first player and same player as last, avoid same category and letter
            if (state.currentGame.playerIndex > 0 && lastCategory && lastLetter) {
                const lastPlayer = state.players[state.currentGame.playerIndex - 1];
                if (currentPlayer.id === lastPlayer.id) {
                    let availableCategories = BUS_CATEGORIES.filter(c => c.name !== lastCategory);
                    let availableLetters = arabicLetters.filter(l => l !== lastLetter);
                    category = availableCategories.length > 0 ? availableCategories[Math.floor(Math.random() * availableCategories.length)] : BUS_CATEGORIES[Math.floor(Math.random() * BUS_CATEGORIES.length)];
                    letter = availableLetters.length > 0 ? availableLetters[Math.floor(Math.random() * availableLetters.length)] : arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
                } else {
                    category = BUS_CATEGORIES[Math.floor(Math.random() * BUS_CATEGORIES.length)];
                    letter = arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
                }
            } else {
                category = BUS_CATEGORIES[Math.floor(Math.random() * BUS_CATEGORIES.length)];
                letter = arabicLetters[Math.floor(Math.random() * arabicLetters.length)];
            }
            
            state.currentGame.category = category;
            state.currentGame.letter = letter;
            state.currentGame.lastCategory = category.name;
            state.currentGame.lastLetter = letter;
        }
        function busPlayerSuccess() { const player = state.players[state.currentGame.playerIndex]; state.currentGame.results.push({ player, success: true }); updateScore(player.id, false, 1); if (state.currentGame.playerIndex < state.players.length - 1) { state.currentGame.playerIndex++; generateNewBusRound(); state.currentGame.timeLeft = 10; state.currentGame.phase = 'ready'; playSound('success'); saveState(); render(); } else { state.currentGame.phase = 'result'; playSound('success'); saveState(); render(); } }
        function busPlayerFail() { const player = state.players[state.currentGame.playerIndex]; state.currentGame.results.push({ player, success: false }); if (state.currentGame.playerIndex < state.players.length - 1) { state.currentGame.playerIndex++; generateNewBusRound(); state.currentGame.timeLeft = 10; state.currentGame.phase = 'ready'; playSound('fail'); saveState(); render(); } else { state.currentGame.phase = 'result'; playSound('fail'); saveState(); render(); } }
        function nextBusRound() { startBusGame(); }
        function renderBusSetup() { if (!state.currentGame || state.currentGame.type !== 'bus') return renderGameStartScreen('ุฃูุชูุจูุณ ูููุจููุช', 'ูู ุฌููุฉ ุชุธูุฑ ูุฆุฉ ูุงูุญุฑู ุงูุฃูู. ูู ูกู ุซูุงูู ูู ูุงุนุจ ูููู ูููุฉ ุชุจุฏุฃ ุจุงูุญุฑู. ูู ูุฌุญุชูุง ูููู +ูก ููู ูุงุฌุญ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startBusGame()', 'bg-purple-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center animate-in"><div class="text-2xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู:</div><div class="text-5xl font-bold mb-10">${state.players[game.playerIndex].name}</div><div onclick="startBusTimerNow()" class="w-40 h-40 bg-purple-500 rounded-full flex items-center justify-center cursor-pointer shadow-lg animate-pulse hover:scale-105 transition border-4 border-white/20"><span class="text-2xl font-bold">ุฏูุณ<br>ุนุดุงู ุชุจุฏุฃ</span></div></div>`; if (game.phase === 'playing') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-600 text-white text-center"><div class="bg-white/20 p-6 rounded-3xl mb-8 w-full"><div class="text-sm opacity-80 mb-2">ุงููุฆุฉ</div><div class="text-4xl font-black mb-4">${game.category.name}</div><div class="text-sm opacity-80 mb-2">ุงูุญุฑู</div><div class="text-6xl font-black text-yellow-300">${game.letter}</div></div><div class="mb-6"><div class="text-lg opacity-90 mb-2">ุงูุฏูุฑ ุนูู:</div><div class="text-3xl font-bold">${state.players[game.playerIndex].name}</div></div><div class="text-7xl font-black mb-8" id="game-timer">${game.timeLeft}</div><div class="grid grid-cols-2 gap-3 w-full"><button onclick="busPlayerSuccess()" class="py-3 bg-green-500 rounded-xl font-bold">โ ูุฌุญ</button><button onclick="busPlayerFail()" class="py-3 bg-red-500 rounded-xl font-bold">โ ูุดู</button></div></div>`; if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-purple-900 text-white text-center"><h2 class="text-3xl font-bold mb-6">ูุชูุฌุฉ ุงูุฌููุฉ!</h2><div class="bg-white/10 p-6 rounded-2xl w-full mb-8">${game.results.map(r => `<div class="flex justify-between items-center py-2 border-b border-white/20"><span>${r.player.name}</span><span class="text-2xl">${r.success ? 'โ' : 'โ'}</span></div>`).join('')}</div><button onclick="nextBusRound()" class="w-full py-4 bg-purple-500 rounded-xl font-bold text-xl">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold mt-3">ุฎุฑูุฌ</button></div>`; }

        // --- LIAR ---
        function startLiarGame() { const card = getUniqueItem('liar', LIAR_CARDS); const player = getFairPlayer(); state.currentGame = { type: 'liar', phase: 'ready', card, player, selectedFact: null, timeLeft: 15 }; playSound('click'); render(); }
        function startLiarTimerNow() { state.currentGame.phase = 'reading'; playSound('click'); saveState(); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); if (state.currentGame.selectedFact !== null) revealLiarCard(); } if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function selectLiarFact(index) { state.currentGame.selectedFact = index; playSound('click'); render(); }
        function revealLiarCard() { state.currentGame.phase = 'result'; playSound('click'); saveState(); render(); }
        function liarGameAddPoint() { const p = getFairPlayer(); updateScore(p.id, false, 1); nextLiarRound(); }
        function nextLiarRound() { startLiarGame(); }
        function renderLiarSetup() { if (!state.currentGame || state.currentGame.type !== 'liar') return renderGameStartScreen('ุงููุงุฑุช ุงููุฏุงุจ', 'ูู ูุงุฑุช ููู ูฃ ุญูุงุฆูุ ููู ูุงุญุฏุฉ ูุฐุจุฉ. ุงูุณู ุงููุฐุจุฉ ูู ูกูฅ ุซุงููุฉ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startLiarGame()', 'bg-orange-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-orange-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-6">${game.player.name}</h1><div class="text-6xl mb-6">๐</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒ ูุง ุจุทูุ</h2><p class="text-xl opacity-90 mb-10">ูุฏูู ุงูููุจุงูู.. ุงูุฑุฃ ุงูู 3 ุญูุงุฆู ุจุณุฑุนุฉ!</p><div onclick="startLiarTimerNow()" class="w-full py-6 bg-white text-orange-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-orange-50 transition">ุฏูุณ ุนุดุงู ุชุดูู ุงููุงุฑุช<br><span class="text-sm font-normal text-slate-500">(ุงูุนุฏุงุฏ ููุจุฏุฃ ููุฑุงู!)</span></div></div>`; if (game.phase === 'reading') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-orange-600 text-white text-center"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><h2 class="text-3xl font-bold mb-6">${game.card.topic}</h2><div class="bg-white/20 p-6 rounded-2xl w-full mb-8 space-y-4">${game.card.facts.map((fact, i) => `<button onclick="selectLiarFact(${i})" class="w-full p-4 bg-white/10 hover:bg-white/30 rounded-xl text-right ${game.selectedFact === i ? 'ring-4 ring-yellow-300' : ''}"><span class="font-bold">${i + 1}.</span> ${fact}</button>`).join('')}</div><div class="text-5xl font-black mb-6" id="game-timer">${game.timeLeft}</div><button onclick="revealLiarCard()" class="w-full py-4 bg-white text-orange-700 rounded-xl font-bold text-xl" ${game.selectedFact === null ? 'disabled opacity-50' : ''}>ูุดู ุงูุฅุฌุงุจุฉ</button></div>`; if (game.phase === 'result') { const lieIndex = 2; const isCorrect = game.selectedFact === lieIndex; return `<div class="h-screen flex flex-col items-center justify-center p-6 ${isCorrect ? 'bg-green-600' : 'bg-red-600'} text-white text-center animate-in"><div class="text-6xl mb-6">${isCorrect ? 'โ' : 'โ'}</div><h2 class="text-3xl font-bold mb-4">${isCorrect ? 'ุตุญ! ุฃุญุณูุช!' : 'ุบูุท!'}</h2><p class="text-xl mb-8">ุงููุฐุจุฉ ูุงูุช: "${game.card.facts[lieIndex]}"</p>${isCorrect ? `<button onclick="updateScore(${game.player.id}, false, 1); nextLiarRound()" class="w-full py-3 bg-white/20 rounded-xl font-bold mb-3">+ูก ููุทุฉ</button>` : state.daresEnabled ? `<button onclick="showDare()" class="w-full py-3 bg-white/20 rounded-xl font-bold mb-3">๐ ุนูุงุจ</button>` : ''}<button onclick="nextLiarRound()" class="w-full py-4 bg-white text-orange-700 rounded-xl font-bold">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-800 rounded-xl font-bold mt-3">ุฎุฑูุฌ</button></div>`; } }

        // --- AUCTION ---
        function startAuctionGame() { const category = getUniqueItem('auction', AUCTION_CATEGORIES); state.currentGame = { type: 'auction', phase: 'bidding', category, currentBid: 1, timeLeft: 30 }; playSound('click'); render(); }
        function raiseBid() { state.currentGame.currentBid++; playSound('click'); render(); }
        function auctionPass() { state.currentGame.phase = 'select_winner'; state.currentGame.finalBid = state.currentGame.currentBid; playSound('click'); saveState(); render(); }
        function selectAuctionWinner(playerId) { state.currentGame.winnerId = playerId; state.currentGame.phase = 'answering_ready'; state.currentGame.timeLeft = 30; playSound('click'); render(); }
        function startAuctionTimerNow() { state.currentGame.phase = 'answering'; playSound('click'); saveState(); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); auctionFail(); return; } if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function auctionSuccess() { updateScore(state.currentGame.winnerId, false, state.currentGame.finalBid); startAuctionGame(); }
        function auctionFail() { if (state.daresEnabled) showDare(); startAuctionGame(); }
        function renderAuctionSetup() { if (!state.currentGame || state.currentGame.type !== 'auction') return renderGameStartScreen('ุงููุฒุงุฏ', 'ุงููุฑูู ูุฑุงูู ุนูู ุนุฏุฏ ุงูุฅุฌุงุจุงุช ุงููู ููุฏุฑ ูููููุง. ุงููุฒุงุฏ ููุฃุนููุ ูุงููุฑูู ุงููุงูุฒ ูุงุฒู ูููุฐ!', '๐จ', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startAuctionGame()', 'bg-cyan-600'); const game = state.currentGame; if (game.phase === 'bidding') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-600 text-white text-center"><div class="bg-white/20 p-6 rounded-2xl mb-8 w-full"><div class="text-sm opacity-80 mb-2">ุงููุฆุฉ:</div><h2 class="text-3xl font-bold">${game.category.name}</h2></div><div class="text-lg opacity-90 mb-4">ุฃุนูู ุฑูู ูุฒุงุฏ:</div><div class="text-8xl font-black text-yellow-300 mb-8">${game.currentBid}</div><div class="grid grid-cols-2 gap-3 w-full"><button onclick="raiseBid()" class="py-4 bg-white/20 rounded-xl font-bold text-xl">+ูก ุนูู</button><button onclick="auctionPass()" class="py-4 bg-red-500 rounded-xl font-bold text-xl">ุจุงุณ!</button></div></div>`; if (game.phase === 'select_winner') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-600 text-white text-center animate-in"><div class="text-6xl mb-6">๐จ</div><h2 class="text-3xl font-bold mb-4">ุงููุฒุงุฏ ุฎูุต!</h2><p class="text-xl opacity-90 mb-2">ูุทููุจ <span class="font-black text-yellow-300 text-2xl">${game.finalBid}</span> ุฅุฌุงุจุฉ</p><p class="text-lg mb-6 mt-6">ููู ุฑุณู ุนููู ุงููุฒุงุฏุ</p><div class="grid grid-cols-2 gap-3 w-full max-h-[50vh] overflow-y-auto">${state.players.map(p => `<button onclick="selectAuctionWinner(${p.id})" class="py-4 bg-white/20 rounded-xl font-bold text-lg hover:bg-white/30 transition">${p.name}</button>`).join('')}</div></div>`; if (game.phase === 'answering_ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-cyan-600 text-white text-center animate-in"><div class="text-6xl mb-6">๐จ</div><h2 class="text-3xl font-bold mb-4">ุฌุงูุฒููุ</h2><p class="text-xl opacity-90 mb-2">ุงููุงุฆุฒ: <span class="font-black text-yellow-300">${state.players.find(p => p.id === game.winnerId)?.name}</span></p><p class="text-lg opacity-80 mb-4">ูุทููุจ <span class="font-black text-yellow-300 text-2xl">${game.finalBid}</span> ุฅุฌุงุจุฉ</p><div onclick="startAuctionTimerNow()" class="w-full py-6 mt-8 bg-white text-cyan-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-cyan-50 transition">ุฏูุณ ุนุดุงู ุชุจุฏุฃ ุงูุนุฏุงุฏ</div></div>`; if (game.phase === 'answering') return `<div class="h-screen flex flex-col p-6 bg-cyan-50"><div class="text-center mt-8 mb-8"><h2 class="text-cyan-700 text-lg">ุงููุฆุฉ: <span class="font-bold">${game.category.name}</span></h2><div class="text-5xl font-black text-cyan-600 mt-4">ูุงุฒู ${game.finalBid} ุฅุฌุงุจุฉ!</div></div><div class="flex-1 flex justify-center items-center"><div class="text-8xl font-black text-cyan-600" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3"><button onclick="auctionSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl">โ ูุฌุญ!</button><button onclick="auctionFail()" class="w-full py-3 bg-red-500 text-white rounded-xl font-bold">โ ูุดู!</button></div></div>`; }

        // --- GIBBERISH ---
        function startGibberishGame() { 
            const phrase = getUniqueItem('gibberish', GIBBERISH_DATA);
            const player = getFairPlayer();
            state.currentGame = { type: 'gibberish', phase: 'ready', phrase, player, timeLeft: 30 }; 
            playSound('click'); 
            saveState();
            render(); 
        }
        function startGibberishTimerNow() { state.currentGame.phase = 'playing'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); revealGibberishAnswer(); } if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function revealGibberishAnswer() { state.currentGame.phase = 'answer'; playSound('click'); saveState(); render(); }
        function nextGibberishRound() { startGibberishGame(); }
        function renderGibberishSetup() { if (!state.currentGame || state.currentGame.type !== 'gibberish') return renderGameStartScreen('ูู ุงูุดูุฑุฉ', 'ุฌูู ุบุฑูุจุฉ! ุงูุฑุฃูุง ุจุตูุช ุนุงูู ูุฐุง ูุฑุฉ ูุญุฏ ูุง ุชููู ุงููุนูู ุงูุญูููู!', '๐ฃ๏ธ', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startGibberishGame()', 'bg-pink-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-600 text-white text-center animate-in"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="text-6xl mb-6">๐ฃ๏ธ</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒ ุชูู ุงูุดูุฑุฉุ</h2><div onclick="startGibberishTimerNow()" class="w-full py-6 bg-white text-pink-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-pink-50 transition">ุฏูุณ ุนุดุงู ุชุจุฏุฃ<br><span class="text-sm font-normal text-slate-500">(ุงูุนุฏุงุฏ ููุจุฏุฃ ููุฑุงู!)</span></div></div>`; if (game.phase === 'playing') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-600 text-white text-center"><div class="text-center mb-4"><p class="text-slate-200 mb-1">ุงูุฏูุฑ ุนูู:</p><h2 class="text-2xl font-bold">${game.player.name}</h2></div><div class="text-sm opacity-80 mb-4">ุงูุฑุฃูุง ุจุตูุช ุนุงูู!</div><div class="bg-white/20 p-8 rounded-3xl mb-8"><h1 class="text-4xl font-black">${game.phrase.gibberish}</h1></div><div class="text-6xl font-black mb-8" id="game-timer">${game.timeLeft}</div><button onclick="revealGibberishAnswer()" class="w-full py-4 bg-white text-pink-700 rounded-xl font-bold text-xl">ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ</button></div>`; if (game.phase === 'answer') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-pink-900 text-white text-center"><div class="bg-white/10 p-6 rounded-2xl mb-8"><div class="text-sm opacity-80 mb-2">ูุงูุช:</div><div class="text-2xl font-bold mb-4">${game.phrase.gibberish}</div><div class="text-sm opacity-80 mb-2">ุงูุฅุฌุงุจุฉ:</div><div class="text-3xl font-black text-yellow-300">${game.phrase.answer}</div></div><button onclick="nextGibberishRound()" class="w-full py-4 bg-pink-500 rounded-xl font-bold text-xl mb-3">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold">ุฎุฑูุฌ</button></div>`; }

        // --- HUM ---
        function startHumGame() { const song = getUniqueItem('hum', HUM_SONGS); const player = getFairPlayer(); state.currentGame = { type: 'hum', phase: 'prepare', song, player, revealed: false, timeLeft: 45 }; playSound('click'); saveState(); render(); }
        function startHumRound() { state.currentGame.phase = 'humming'; playSound('click'); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); humFail(); return; } if (state.currentGame.timeLeft <= 10) playSound('tick'); }, 1000); }
        function humSuccess() { updateScore(state.currentGame.player.id, false, 1); startHumGame(); }
        function humFail() { if (state.daresEnabled) showDare(); startHumGame(); }
        function renderHumSetup() { if (!state.currentGame || state.currentGame.type !== 'hum') return renderGameStartScreen('ุทุฑุจูู ุดูุฑุงู', 'ูููู ุงููุญู ุจุณ! ููููุน ุงููููุงุช. "ุชู ุชู ุฑู ุชู" ููุท!', '๐ต', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startHumGame()', 'bg-yellow-600'); const game = state.currentGame; if (game.phase === 'prepare') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-yellow-600 text-white text-center"><p class="text-xl opacity-80 mb-2">ุงูุฏูุฑ ุนูู</p><h1 class="text-4xl font-black mb-8">${game.player.name}</h1><div class="bg-white/10 p-6 rounded-2xl border-2 border-white/20 w-full mb-8 relative overflow-hidden">${!game.revealed ? `<div onclick="state.currentGame.revealed = true; render()" class="absolute inset-0 bg-yellow-700 z-10 flex items-center justify-center cursor-pointer hover:bg-yellow-800 transition"><span class="text-xl font-bold animate-pulse">ุฏูุณ ุนุดุงู ุชุดูู ุงูุฃุบููุฉ</span></div>` : ''}<p class="text-sm mb-2 opacity-75">ุงูุฃุบููุฉ:</p><h2 class="text-3xl font-bold text-yellow-300">${game.song.song}</h2><p class="text-sm mt-2 opacity-75">ุงูุตุนูุจุฉ: ${game.song.difficulty}</p></div><button onclick="startHumRound()" class="w-full py-4 bg-white text-yellow-700 rounded-xl font-bold text-xl" ${!game.revealed ? 'disabled opacity-50' : ''}>ุงุจุฏุฃ ุงูููููุฉ!</button></div>`; if (game.phase === 'humming') return `<div class="h-screen flex flex-col p-6 bg-yellow-50"><div class="text-center mt-8 mb-8"><h2 class="text-slate-500">ุงูููููู: <span class="font-bold text-yellow-700">${game.player.name}</span></h2><h1 class="text-3xl font-black text-slate-800 mt-2">${game.song.song}</h1></div><div class="flex-1 flex justify-center items-center"><div class="text-8xl font-black text-yellow-600" id="game-timer">${game.timeLeft}</div></div><div class="space-y-3"><button onclick="humSuccess()" class="w-full py-4 bg-green-500 text-white rounded-xl font-bold text-xl">โ ุนุฑูููุง!</button><button onclick="humFail()" class="w-full py-3 bg-slate-200 text-slate-600 rounded-xl font-bold">ูุนุฑููุด</button></div></div>`; }

        // --- LIKELY ---
        function startLikelyGame() { const question = getUniqueItem('likely', MOST_LIKELY); state.currentGame = { type: 'likely', phase: 'ready', question, timeLeft: 5 }; playSound('click'); saveState(); render(); }
        function startLikelyTimerNow() { state.currentGame.phase = 'showing'; playSound('click'); saveState(); render(); if (gameInterval) clearInterval(gameInterval); gameInterval = setInterval(() => { state.currentGame.timeLeft--; const t = document.getElementById('game-timer'); if(t) t.innerText = state.currentGame.timeLeft; if (state.currentGame.timeLeft <= 0) { clearInterval(gameInterval); state.currentGame.phase = 'result'; playSound('fail'); saveState(); render(); } else if (state.currentGame.timeLeft <= 5) playSound('tick'); }, 1000); }
        function likelySelectPlayer(playerId) { if (state.daresEnabled) showDare(); nextLikelyRound(); }
        function nextLikelyRound() { startLikelyGame(); }
        function renderLikelySetup() { if (!state.currentGame || state.currentGame.type !== 'likely') return renderGameStartScreen('ููู ุงููุงุฑุซุฉุ', 'ุณุคุงู ูุธูุฑ. ูู ูฅ ุซูุงูู ูููู ุชุดุงูุฑูุง ุนูู ููุณ ุงูุดุฎุต. ุงููู ุงููู ุดุงูุฑ ุนููู.. ุนูุงุจ!', '๐', 'ุงุจุฏุฃ ุงููุนุจุฉ', 'startLikelyGame()', 'bg-red-600'); const game = state.currentGame; if (game.phase === 'ready') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-red-600 text-white text-center animate-in"><div class="text-6xl mb-6">๐</div><h2 class="text-3xl font-bold mb-8">ุฌุงูุฒููุ</h2><div onclick="startLikelyTimerNow()" class="w-full py-6 bg-white text-red-700 rounded-2xl font-black text-2xl shadow-xl cursor-pointer hover:bg-red-50 transition">ุฏูุณ ุนุดุงู ุชุดูู ุงูุณุคุงู<br><span class="text-sm font-normal text-slate-500">(5 ุซูุงูู ุจุณ!)</span></div></div>`; if (game.phase === 'showing') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-red-600 text-white text-center"><div class="bg-white/20 p-8 rounded-3xl mb-8 w-full"><h1 class="text-3xl font-black leading-relaxed">${game.question}</h1></div><div class="text-8xl font-black mb-8" id="game-timer">${game.timeLeft}</div><p class="text-xl opacity-90">ุดุงูุฑูุง ุฏูููุชู! ๐</p></div>`; if (game.phase === 'result') return `<div class="h-screen flex flex-col items-center justify-center p-6 bg-red-900 text-white text-center"><div class="bg-white/10 p-6 rounded-2xl mb-6 w-full"><h3 class="text-sm opacity-75 mb-2">ุงูุณุคุงู ูุงู:</h3><h1 class="text-2xl font-black leading-relaxed">${game.question}</h1></div><h2 class="text-3xl font-bold mb-8">ุงุชูููุง ุนูู ูููุ</h2><div class="grid grid-cols-2 gap-3 w-full mb-8">${state.players.map(p => `<button onclick="likelySelectPlayer(${p.id})" class="p-4 bg-white/20 rounded-xl font-bold hover:bg-white/30">${p.name}</button>`).join('')}</div><button onclick="nextLikelyRound()" class="w-full py-3 bg-red-500 rounded-xl font-bold">ุฌููุฉ ุฌุฏูุฏุฉ</button><button onclick="goHome()" class="w-full py-3 bg-slate-700 rounded-xl font-bold mt-3">ุฎุฑูุฌ</button></div>`; }

        // Update mute button appearance based on state
        function updateMuteButton() {
            const btn = document.getElementById('muteBtn');
            if (btn) {
                if (state.isMuted) {
                    btn.className = 'p-2 bg-red-100 rounded-full shadow-md text-red-500 hover:bg-red-200 transition';
                    btn.innerHTML = '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>';
                } else {
                    btn.className = 'p-2 bg-white rounded-full shadow-md text-slate-600 hover:bg-slate-50 transition';
                    btn.innerHTML = '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>';
                }
            }
        }
        
        // ===== INIT =====
        // Auto-load on page load using DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            loadState(); // Load saved state from localStorage (includes players array)
            render(); // Trigger render to display the loaded data
            updateMuteButton(); // Update mute button appearance
        });
    </script>
</body>
</html>
